<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>BLOG</title>
  
  
  <link href="http://blog.3amupupup.online/atom.xml" rel="self"/>
  
  <link href="http://blog.3amupupup.online/"/>
  <updated>2021-03-18T08:17:15.264Z</updated>
  <id>http://blog.3amupupup.online/</id>
  
  <author>
    <name>æ‹¦äº‘</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ngxç¼“å†²åŒºç»“æ„.md</title>
    <link href="http://blog.3amupupup.online/2021/03/18/ngx%E7%BC%93%E5%86%B2%E5%8C%BA%E7%BB%93%E6%9E%84-md/"/>
    <id>http://blog.3amupupup.online/2021/03/18/ngx%E7%BC%93%E5%86%B2%E5%8C%BA%E7%BB%93%E6%9E%84-md/</id>
    <published>2021-03-18T07:14:01.000Z</published>
    <updated>2021-03-18T08:17:15.264Z</updated>
    
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="nginx" scheme="http://blog.3amupupup.online/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginxæ•°ç»„</title>
    <link href="http://blog.3amupupup.online/2021/03/18/ngx_array/"/>
    <id>http://blog.3amupupup.online/2021/03/18/ngx_array/</id>
    <published>2021-03-18T05:25:40.825Z</published>
    <updated>2021-03-18T08:32:26.835Z</updated>
    
    <content type="html"><![CDATA[<h5 id="nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„"><a href="#nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„" class="headerlink" title="nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„"></a>nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„</h5><p><img src="https://img.3amupupup.online/ngx_array-.png" alt="ngx_array"></p><pre><code class="c">typedef struct {    void        *elts;      // æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ    ngx_uint_t   nelts;     // æœªä½¿ç”¨çš„å…ƒç´ çš„ç´¢å¼•    size_t       size;      // æ¯ä¸ªå…ƒç´ å¤§å°    ngx_uint_t   nalloc;    //  å…ƒç´ ä¸ªæ•°    ngx_pool_t  *pool;      //  å†…å­˜æ± } ngx_array_t;</code></pre><h5 id="æ•°ç»„æä¾›çš„æ¥å£"><a href="#æ•°ç»„æä¾›çš„æ¥å£" class="headerlink" title="æ•°ç»„æä¾›çš„æ¥å£"></a>æ•°ç»„æä¾›çš„æ¥å£</h5><pre><code class="c">ngx_array_t *ngx_array_create(ngx_pool_t *p, ngx_uint_t n, size_t size);    // åˆ›å»ºæ•°ç»„çš„æ•°æ®ç»“æ„void ngx_array_destroy(ngx_array_t *a); // é”€æ¯æ•°ç»„void *ngx_array_push(ngx_array_t *a);   // pushå•ä¸ªå…ƒç´ void *ngx_array_push_n(ngx_array_t *a, ngx_uint_t n);    // push nä¸ªå…ƒç´ static ngx_inline ngx_int_t ngx_array_init(ngx_array_t *array, ngx_pool_t *pool, ngx_uint_t n, size_t size)    //  // ngx_array_createä¼šè°ƒç”¨æ­¤å‡½æ•°ï¼Œç”³è¯·ä¹‹åè°ƒç”¨è¿™ä¸ªå‡½æ•°è¿›è¡Œåˆå§‹åŒ–æ“ä½œ</code></pre><h6 id="ngx-array-t-ngx-array-create-ngx-pool-t-p-ngx-uint-t-n-size-t-size"><a href="#ngx-array-t-ngx-array-create-ngx-pool-t-p-ngx-uint-t-n-size-t-size" class="headerlink" title="ngx_array_t *ngx_array_create(ngx_pool_t *p, ngx_uint_t n, size_t size);"></a>ngx_array_t *ngx_array_create(ngx_pool_t *p, ngx_uint_t n, size_t size);</h6><pre><code class="c">ngx_array_t *ngx_array_create(ngx_pool_t *p, ngx_uint_t n, size_t size){    ngx_array_t *a;      // åœ¨å†…å­˜æ± ä¸Šä¸ºngx_array_tç»“æ„ä½“ç”³è¯·å†…å­˜,å…·ä½“åˆ†é…åˆ°å°æ•°æ®å—é“¾è¡¨è¿˜æ˜¯å¤§æ•°æ®å—é“¾è¡¨å–å†³äºsize,ä¸å†ä½œè§£é‡Š    a = ngx_palloc(p, sizeof(ngx_array_t));    if (a == NULL) {        return NULL;    }    if (ngx_array_init(a, p, n, size) != NGX_OK) {  // å†æ¬¡ç”³è¯·å†…å­˜(ç»™æ•°ç»„åˆ†é…çš„)        return NULL;    }    return a;}</code></pre><h6 id="static-ngx-inline-ngx-int-t-ngx-array-init-ngx-array-t-array-ngx-pool-t-pool-ngx-uint-t-n-size-t-size"><a href="#static-ngx-inline-ngx-int-t-ngx-array-init-ngx-array-t-array-ngx-pool-t-pool-ngx-uint-t-n-size-t-size" class="headerlink" title="static ngx_inline ngx_int_t ngx_array_init(ngx_array_t *array, ngx_pool_t *pool, ngx_uint_t n, size_t size)"></a>static ngx_inline ngx_int_t ngx_array_init(ngx_array_t *array, ngx_pool_t *pool, ngx_uint_t n, size_t size)</h6><pre><code class="c">// ngx_array_createä¼šè°ƒç”¨æ­¤å‡½æ•°ï¼Œç”³è¯·ä¹‹åè¿›è¡Œåˆå§‹åŒ–æ“ä½œstatic ngx_inline ngx_int_tngx_array_init(ngx_array_t *array, ngx_pool_t *pool, ngx_uint_t n, size_t size){    /*     * set &quot;array-&gt;nelts&quot; before &quot;array-&gt;elts&quot;, otherwise MSVC thinks     * that &quot;array-&gt;nelts&quot; may be used without having been initialized     */    array-&gt;nelts = 0;    array-&gt;size = size;    array-&gt;nalloc = n;    array-&gt;pool = pool;    array-&gt;elts = ngx_palloc(pool, n * size);   // å»å†…å­˜æ± ä¸Šåˆ†é…å†…å­˜    if (array-&gt;elts == NULL) {        return NGX_ERROR;    }    return NGX_OK;}</code></pre><h6 id="void-ngx-array-destroy-ngx-array-t-a"><a href="#void-ngx-array-destroy-ngx-array-t-a" class="headerlink" title="void ngx_array_destroy(ngx_array_t *a)"></a>void ngx_array_destroy(ngx_array_t *a)</h6><ul><li><pre><code class="c">/* * åœ¨ ngx_array_create() å‡½æ•°ä¸­ ngx_array_tç»“æ„çš„å†…å­˜å’Œæ•°ç»„çš„å†…å­˜æ˜¯åˆ†å¼€ç”³è¯·çš„ï¼Œä¸ä¸€å®šè¿ç»­ï¼Œ * æ‰€ä»¥åœ¨å°†å†…å­˜å½’è¿˜ç»™å†…å­˜æ± çš„æ—¶å€™ä¹Ÿå¾—åˆ†å¼€å½’è¿˜ */voidngx_array_destroy(ngx_array_t *a){    ngx_pool_t  *p;    p = a-&gt;pool;    // å†…å­˜æ± çš„åœ°å€æ˜¯è¢«ä¿å­˜åœ¨ngxæ•°ç»„æ•°æ®ç»“æ„ä¸­çš„    /*     * å¦‚æœ æ•°ç»„é¦–å…ƒç´ åœ°å€ + å…ƒç´ å¤§å°*å…ƒç´ ä¸ªæ•° == lastçš„æŒ‡å‘ä½ç½®ï¼Œ     * åˆ™è¯´æ˜è¿™ä¸ªæ•°ç»„çš„å†…å­˜æ®µæ˜¯åœ¨usedåŒºåŸŸçš„å°¾éƒ¨çš„ï¼Œlastç›´æ¥å‡å» å…ƒç´ å¤§å°*å…ƒç´ ä¸ªæ•° å°±ä»£è¡¨é”€æ¯äº†è¿™ä¸ªæ•°ç»„çš„å†…å­˜     */    if ((u_char *) a-&gt;elts + a-&gt;size * a-&gt;nalloc == p-&gt;d.last) {        p-&gt;d.last -= a-&gt;size * a-&gt;nalloc;    }    /*     *  é“ç†å’Œä¸Šé¢ç±»ä¼¼     */    if ((u_char *) a + sizeof(ngx_array_t) == p-&gt;d.last) {        p-&gt;d.last = (u_char *) a;    }    // å¦åˆ™å°±ä¸èƒ½ç§»åŠ¨last}</code></pre></li><li><p><img src="http://img.3amupupup.online/ngx_array_destroy-.png" alt="ngx_array"></p><p>1ã€3æ˜¯å¯ä»¥ä¿®æ”¹lastæŒ‡å‘çš„ï¼Œ2ã€4ä¸è¡Œã€‚</p><p>è¿™é‡Œæœ‰ç–‘é—®ï¼š2ã€4è¿™ä¸¤ç§æƒ…å†µå†…å­˜å²‚ä¸æ˜¯æ— æ³•é‡Šæ”¾(å½’è¿˜ç»™å†…å­˜æ± )ï¼Œå†…å­˜æ± ä¼šè¶Šæ¥è¶Šå¤§ã€‚</p></li></ul><h6 id="void-ngx-array-push-ngx-array-t-a"><a href="#void-ngx-array-push-ngx-array-t-a" class="headerlink" title="void *ngx_array_push(ngx_array_t *a)"></a>void *ngx_array_push(ngx_array_t *a)</h6><pre><code class="c">void *ngx_array_push(ngx_array_t *a)  // æ·»åŠ 1ä¸ªå…ƒç´ {    void        *elt, *new;    size_t       size;    ngx_pool_t  *p;    if (a-&gt;nelts == a-&gt;nalloc) {        /* the array is full */        size = a-&gt;size * a-&gt;nalloc; // è®¡ç®—å½“å‰æ•°ç»„çš„å¤§å°        p = a-&gt;pool;        if ((u_char *) a-&gt;elts + size == p-&gt;d.last            &amp;&amp; p-&gt;d.last + a-&gt;size &lt;= p-&gt;d.end)        /*         * å¦‚æœeltsæŒ‡å‘çš„ä½ç½®åŠ ä¸Šå½“å‰æ•°ç»„çš„å¤§å°ç­‰äºlastä¸”laståˆ°endä¹‹é—´æœ‰è¶³å¤Ÿçš„ç©ºé—´å»å®¹çº³ä¸€ä¸ªå…ƒç´ åˆ™ç›´æ¥åœ¨è¿™ä¸ªå†…å­˜æ± ä¸Šæ·»åŠ å…ƒç´          * è¿™ä¸ªåˆ¤å®šæ˜¯è¦ä¿è¯æ·»åŠ çš„å…ƒç´ æ‰€åœ¨çš„å†…å­˜ä¸ä¹‹å‰æ•°ç»„çš„å†…å­˜æ˜¯è¿ç»­çš„         */        {            /*             * the array allocation is the last in the pool             * and there is space for new allocation             */            p-&gt;d.last += a-&gt;size;            a-&gt;nalloc++;        } else {            // å¦åˆ™å°±æ˜¯ä¸èƒ½ä¿è¯å†…å­˜è¿ç»­æˆ–è€…ç©ºé—´ä¸è¶³            /* allocate a new array */            // ç”³è¯·ä¸€ä¸ªä¸¤å€çš„ç©ºé—´ï¼Œnewæ˜¯é¦–åœ°å€            new = ngx_palloc(p, 2 * size);            if (new == NULL) {                return NULL;            }            // #define ngx_memcpy(dst, src, n)   (void) memcpy(dst, src, n) çœ‹åˆ°è¿™ä¸ªğŸ‘´ğŸ»æƒ³ç¬‘            ngx_memcpy(new, a-&gt;elts, size); // å°†åŸæ¥çš„å†…å­˜åœ°å€ä¸Šçš„æ•°ç»„éƒ¨åˆ†çš„å†…å®¹æ‹·è´åˆ°æ–°å†…å­˜æ± ä¸Š            a-&gt;elts = new;  // æŒ‡å‘æ–°å†…å­˜çš„ä½ç½®            a-&gt;nalloc *= 2; // å…ƒç´ ä¸ªæ•°ç¿»å€        }    }    // æœªä½¿ç”¨çš„ç´¢å¼•    elt = (u_char *) a-&gt;elts + a-&gt;size * a-&gt;nelts;    a-&gt;nelts++;    return elt;}</code></pre><h6 id="void-ngx-array-push-n-ngx-array-t-a-ngx-uint-t-n"><a href="#void-ngx-array-push-n-ngx-array-t-a-ngx-uint-t-n" class="headerlink" title="void *ngx_array_push_n(ngx_array_t *a, ngx_uint_t n)"></a>void *ngx_array_push_n(ngx_array_t *a, ngx_uint_t n)</h6><pre><code class="c">void *ngx_array_push_n(ngx_array_t *a, ngx_uint_t n){    void        *elt, *new;    size_t       size;    ngx_uint_t   nalloc;    ngx_pool_t  *p;    size = n * a-&gt;size;    if (a-&gt;nelts + n &gt; a-&gt;nalloc) {        /* the array is full */        p = a-&gt;pool;        /*         * å¦‚æœeltsæŒ‡å‘çš„ä½ç½®åŠ ä¸Šå½“å‰æ•°ç»„çš„å¤§å°ç­‰äºlast ä¸” laståˆ°endä¹‹é—´ æœ‰è¶³å¤Ÿçš„ç©ºé—´å»å®¹çº³nä¸ªå…ƒç´ åˆ™ç›´æ¥åœ¨è¿™ä¸ªå†…å­˜æ± ä¸Šæ·»åŠ å…ƒç´          * è¿™ä¸ªåˆ¤å®šæ˜¯è¦ä¿è¯æ·»åŠ çš„å…ƒç´ æ‰€åœ¨çš„å†…å­˜ä¸ä¹‹å‰æ•°ç»„çš„å†…å­˜æ˜¯è¿ç»­çš„         */        if ((u_char *) a-&gt;elts + a-&gt;size * a-&gt;nalloc == p-&gt;d.last            &amp;&amp; p-&gt;d.last + size &lt;= p-&gt;d.end)        {            /*             * the array allocation is the last in the pool             * and there is space for new allocation             */            p-&gt;d.last += size;  // size = n * a-&gt;size; è°ƒæ•´lastçš„æŒ‡å‘            a-&gt;nalloc += n;     // æ›´æ–°å…ƒç´ ä¸ªæ•°        } else {    // å¦åˆ™æ‰©å®¹            /* allocate a new array */            nalloc = 2 * ((n &gt;= a-&gt;nalloc) ? n : a-&gt;nalloc);            new = ngx_palloc(p, nalloc * a-&gt;size);            if (new == NULL) {                return NULL;            }            ngx_memcpy(new, a-&gt;elts, a-&gt;nelts * a-&gt;size);    // å®å‡½æ•°ï¼Œå®é™…ä¸Šè°ƒç”¨çš„memcpyå‡½æ•°            a-&gt;elts = new;            a-&gt;nalloc = nalloc;        }    }    elt = (u_char *) a-&gt;elts + a-&gt;size * a-&gt;nelts;    a-&gt;nelts += n;    return elt;}</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„&quot;&gt;&lt;a href=&quot;#nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„&quot; class=&quot;headerlink&quot; title=&quot;nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„&quot;&gt;&lt;/a&gt;nginxæ•°æ®ç±»å‹ï¼šæ•°ç»„&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.3amupupu</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="nginx" scheme="http://blog.3amupupup.online/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>æ’åº</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E6%8E%92%E5%BA%8F/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E6%8E%92%E5%BA%8F/</id>
    <published>2021-03-18T03:09:52.078Z</published>
    <updated>2021-03-18T03:09:52.078Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h4><ol><li><p>æ’åºæ€æƒ³</p><p>ä¸€ä¸ªæ— åºæ•°åˆ—ï¼Œä»ç¬¬ä¸€ä¸ªæ•°å¼€å§‹ï¼Œå¾ªç¯æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªæ•°çš„å¤§å°ï¼Œå¦‚æœå‰ä¸€ä¸ªæ•°å¤§äºåä¸€ä¸ªæ•°åˆ™äº¤æ¢å®ƒä»¬çš„ä½ç½®(å‡åº)ã€‚</p></li><li><p>ç¤ºæ„å›¾</p><p>ä¸€ä¸ªæ•°åˆ—ï¼š10 9 8 7 6 5 4 3 2 1</p><p><img src="http://img.3amupupup.online/BoubleSort.png" alt="å†’æ³¡æ’åº"></p><p><img src="http://img.3amupupup.online/BubbleSort.gif" alt="å†’æ³¡æ’åº"></p></li></ol><ol start="3"><li><p>å®ç°</p><pre><code class="c">void BubbleSort(int* arr, int arrSize){    for (int i = 0; i &lt; arrSize-1; ++i)    {        int flag = 0;        for (int j = 0; j &lt; arrSize-i-1; ++j) // æ¯å¾ªç¯ä¸€æ¬¡æ„å‘³ç€ä¸€ä¸ªæœ€å¤§çš„æ•°è¢«ç§»åŠ¨åˆ°äº†æ•°ç»„æœ«å°¾ï¼Œåœ¨ä¸‹ä¸€æ¬¡å¾ªç¯æ—¶æœ€åä¸€ä¸ªæ•°æ²¡å¿…è¦å‚ä¸æ¯”è¾ƒ        {            if(arr[j] &gt; arr[j+1])            {                flag = 1; // åˆ¤æ–­å¾ªç¯æ—¶æ˜¯å¦å‘ç”Ÿäº¤æ¢ï¼Œæ²¡æœ‰å‘ç”Ÿäº¤æ¢åˆ™è¯´æ˜å·²ç»æœ‰åºï¼Œç›´æ¥é€€å‡ºã€‚                int temp = arr[j];                arr[j] = arr[j+1];                arr[j+1] = temp;            }        }        if (!flag)            return;    }}</code></pre></li><li><p>ç†è§£</p><p>å†’æ³¡æ’åºæ¯è¿­ä»£ä¸€æ¬¡æ•°ç»„ï¼Œæœ€å¤§æ•°ä¼šè¢«å†’åˆ°æœ€åï¼Œåœ¨ä¸‹ä¸€æ¬¡è¿­ä»£æ—¶æ’é™¤æ‰ä¹‹å‰è¿­ä»£å†’çš„å¤§æ•°ã€‚</p><p>æ—¶é—´å¤æ‚åº¦ï¼šN-1 + N-2 + â€¦â€¦ + 1 å³ O(N^2)ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šåœ¨æ’åºè¿‡ç¨‹ä¸­æ— éœ€å€ŸåŠ©å…¶å®ƒç©ºé—´ä¿å­˜æ•°æ®ï¼Œå³O(1)ã€‚</p></li></ol><h4 id="ç›´æ¥æ’å…¥æ’åº"><a href="#ç›´æ¥æ’å…¥æ’åº" class="headerlink" title="ç›´æ¥æ’å…¥æ’åº"></a>ç›´æ¥æ’å…¥æ’åº</h4><ol><li><p>æ’åºæ€æƒ³</p><p>ä¸€ä¸ªæ— åºæ•°åˆ—ï¼Œå‡è®¾å‰nä¸ªæ•°æ˜¯æœ‰åºçš„ï¼Œä¾æ¬¡å–å‡ºnä¹‹åçš„æ•°å­—ä¸ n=&gt;0 è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå°äºnåˆ™æ’å…¥åˆ°nä¹‹å‰(å‡åº)ã€‚</p></li><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/InsertSort.png" alt="æ’å…¥æ’åº"></p><p><img src="http://img.3amupupup.online/InsertSort.gif" alt="æ’å…¥æ’åº"></p></li><li><p>å®ç°</p><pre><code class="c">void InsertSort(int* arr, int arrSize){    for (int i = 0; i &lt; arrSize-1; ++i)    {        int end = i; // å‡è®¾ 0-endæ˜¯æœ‰åºæ•°åˆ—ï¼Œç¬¬ä¸€æ¬¡endå°±æ˜¯0,æ‹¿arr[1]å’Œarr[0]æ¯”è¾ƒ        int temp = arr[end+1]; // é€‰å‡ºendä¹‹åçš„ç¬¬ä¸€ä¸ªæ•°        while (end &gt;= 0)        {            if(temp &lt; arr[end]) // å‡åº            {                arr[end+1] = arr[end]; // å¦‚æœtempå°äºarr[end]ï¼Œåˆ™è¯´æ˜è¦å°†endå¾€åæŒªä¸€æ¬¡                end--; // ç„¶åendç»§ç»­å¾€å‰èµ°,ç»§ç»­åˆ¤æ–­tempæ˜¯å¦å°äºarr[end]            }            else            {                break; // ä¸å°äºarr[end]æ—¶ç›´æ¥è·³å‡ºå¾ªç¯            }        }        arr[end+1] = temp;    }}</code></pre></li></ol><h4 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h4><ol><li><p>æ’åºæ€æƒ³</p><p>å¸Œå°”æ’åºæ˜¯åœ¨æ’å…¥æ’åºçš„åŸºç¡€ä¸Šåšçš„ä¼˜åŒ–ã€‚æ’å…¥æ’åºä¸­ï¼Œå¦‚æœå€¼å¤§å°åˆ†å¸ƒè¶Šä¸å‡åŒ€ï¼Œåœ¨é€‰æ‹©ä¸€ä¸ªæ•°ä¸æœ‰åºåºåˆ—æ¯”è¾ƒæ—¶éœ€è¦ç§»åŠ¨endçš„æ¬¡æ•°ä¼šè¶Šå¤šï¼Œåºåˆ—è¶Šæ¥è¿‘æœ‰åºï¼Œéœ€è¦ç§»åŠ¨endçš„æ¬¡æ•°å°±ä¼šè¶Šå°‘ã€‚å¸Œå°”æ’åºåœ¨æ­¤åŸºç¡€ä¸Šï¼Œå°†åºåˆ—åˆ†æˆä¸è¿ç»­å¤šä¸ªç»„ï¼Œç„¶åè¿›è¡Œæ’å…¥æ’åºï¼Œè¿™ä¼šä½¿å¾—åºåˆ—èƒ½æ›´å¿«çš„æ¥è¿‘æœ‰åºã€‚ç›´è‡³é—´éš”ä¸º1æ—¶å°±æ˜¯æ’å…¥æ’åºï¼Œæ­¤æ—¶æ•°ç»„æ¥è¿‘æœ‰åºï¼Œæ•ˆç‡ä¼šæ›´é«˜ã€‚</p></li><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/ShellSort.png" alt="å¸Œå°”æ’åº"></p><p><img src="http://img.3amupupup.online/ShellSort.gif" alt="å¸Œå°”æ’åº"></p><p>å›¾ä¸­ï¼Œ2ã€5ã€13ä¸ºä¸€ç»„ï¼Œ5ã€3ã€3ä¸ºä¸€ç»„ï¼Œå‡åºæƒ…å†µä¸‹ï¼šé—´éš”è¶Šå¤§ï¼Œé‚£ä¹ˆæ’åœ¨é åä½ç½®çš„æ•°å°±æ›´åŠ å®¹æ˜“çš„è¢«æ’å…¥åœ¨æ•°ç»„é å‰çš„ä½ç½®ï¼Œæ¯”å¦‚arr[1]=5ã€arr[5]=3ã€arr[9]=3ï¼Œå¦‚æœæ˜¯æ’å…¥æ’åºï¼Œarr[9]=3 endéœ€è¦ç§»åŠ¨6æ¬¡æ‰èƒ½ä½¿arr[9]åˆ°è¾¾é å‰çš„ä½ç½®ï¼Œä½¿ç”¨å¸Œå°”æ’åºï¼Œendç§»åŠ¨ä¸¤æ¬¡å°±é å‰äº†ã€‚ä¼šä½¿æ•°ç»„æ›´å®¹æ˜“çš„æ¥è¿‘æœ‰åºã€‚</p></li><li><p>å®ç°</p><pre><code class="c">void ShellSort(int* arr, int arrSize){    int gap = arrSize;    while(gap &gt; 1)    {        gap = gap/3+1; // 2/3=0,ä¼šå¯¼è‡´æ’åºæå‰ç»“æŸ(gapè¿˜æ²¡ç­‰äº1å°±ç»“æŸäº†),æ‰€ä»¥æ¯æ¬¡ç»™gapåŠ ä¸Šä¸ª1ã€‚        for(int i = 0;i &lt; arrSize-gap;i++)        // arrSizeä¸ºä»€ä¹ˆè¦å‡å»gap: å‡å¦‚æ•°ç»„é•¿åº¦æ˜¯10,gapç¬¬ä¸€æ¬¡å¾ªç¯ä¸º4ã€‚        // å¾ªç¯å¼€å§‹ä¹‹åï¼Œtempçš„ä¸‹æ ‡(ä¹Ÿå°±æ˜¯end+gap)ä¸èƒ½è¶…å‡ºæ•°ç»„èŒƒå›´å³:i+gap &lt; arrsize,ä¹Ÿå°±æ˜¯i&lt;arrSize-gap        {            int end = i;            int temp = arr[end+gap];            while(end &gt;= 0)            {                if(temp &lt; arr[end])                {                    arr[end+gap] = arr[end];                    end-=gap;                }                else                {                    break;                }            }            arr[end+gap] = temp;        }    }}</code></pre></li></ol><h4 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h4><ol><li><p>æ’åºæ€æƒ³</p><p>æœ‰åºæ•°åˆ—(æ•°ç»„)çš„åœ¨å†…å­˜ä¸Šå­˜å‚¨å½¢å¼æ˜¯çº¿æ€§çš„(ä¸€æ®µè¿ç»­çš„å†…å­˜)ï¼Œå…¶é€»è¾‘ç»“æ„æ˜¯äºŒå‰æ ‘(å®Œå…¨äºŒå‰æ ‘)ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥å°†æ•°ç»„çœ‹æˆä¸€ä¸ªäºŒå‰æ ‘ï¼Œç„¶åè¿›è¡Œå»ºå †æ“ä½œã€‚ï¼ˆå¤§å †çš„çˆ¶ç»“ç‚¹å¤§äºå·¦å³å­©å­ç»“ç‚¹ï¼Œå°å †çš„çˆ¶ç»“ç‚¹å°äºå·¦å³å­©å­ç»“ç‚¹ï¼‰ï¼Œç„¶åæ¯æ¬¡å–å‡ºå †é¡¶çš„æ•°å†é‡æ–°å»ºå †ã€‚(å‡åºå»ºå¤§å †ï¼Œé™åºå»ºå°å †)ã€‚leftChild = parent*2+1ï¼ŒrightChile = parent*2+2ã€‚</p></li><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/BuildBigHeap.png" alt="å»ºå¤§å †"></p><p><img src="http://img.3amupupup.online/BuildArrayToHeap.png" alt="å»ºå †å®Œæˆåçš„æ•ˆæœ"></p><p><img src="http://img.3amupupup.online/SortByHeap.png" alt="åˆ©ç”¨å †ç‰¹æ€§æ’åº"></p><p><img src="http://img.3amupupup.online/HeapSort.gif" alt="å †æ’åº"></p></li><li><p>å®ç°</p><pre><code class="c">void Swap(int* a, int* b){    int temp = *a;    *a = *b;    *b= temp;}void AdJustDown(int* arr, int root, int arrSize) // å»ºå †{    int parent = root;    int child = parent*2 + 1;    while (child &lt; arrSize)    {        if (child+1 &lt; arrSize &amp;&amp; arr[child+1] &gt; arr[child])        {            child++;        }        if(arr[parent] &lt; arr[child])        {            Swap(&amp;arr[parent],&amp;arr[child]);            parent = child;            child = parent*2+1;        }        else        {            break;        }    }}void HeapSort(int* arr, int arrSize){    for (int i = (arrSize-1-1)/2; i &gt;=0 ; --i)    {        AdJustDown(arr,i,arrSize);    }    int end = arrSize-1;    while (end &gt; 0)    {        Swap(&amp;arr[end],&amp;arr[0]);        AdJustDown(arr,0,end);        end--;    }}</code></pre></li></ol><h4 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h4><ol><li><p>æ’åºæ€æƒ³(å‡åº)</p><p>å·¦å³ä¸¤ä¸ªæŒ‡é’ˆleftã€rightï¼Œå–ä¸€ä¸ªkeyå€¼ã€‚å·¦å³å¼€å§‹å‘å³å‘å·¦éå†ï¼Œå·¦æŒ‡é’ˆé‡è§æ¯”keyå¤§çš„æ•°åœæ­¢ç§»åŠ¨ï¼Œå³æŒ‡é’ˆé‡è§æ¯”keyå°çš„æ•°åœæ­¢ç§»åŠ¨ï¼Œæ­¤æ—¶äº¤æ¢å·¦å³æŒ‡é’ˆå¯¹åº”çš„å€¼ï¼Œç›´åˆ°å·¦å³æŒ‡é’ˆé‡åˆã€‚æ­¤æ—¶keyå·¦è¾¹çš„å€¼å…¨æ¯”keyå°ï¼Œå³è¾¹çš„å€¼å…¨æ¯”keyå¤§ã€‚å†é€šè¿‡åˆ†æ²»æ€æƒ³å¯¹keyå·¦å³ä¸¤è¾¹çš„åŒºé—´è¿›è¡Œé€’å½’æ“ä½œã€‚</p></li><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/QuickSortt.png" alt="å¿«é€Ÿæ’åº"></p><p><img src="http://img.3amupupup.online/RecursionForQuickSort.png" alt="åˆ†æ²»æ€æƒ³"></p><p><img src="http://img.3amupupup.online/QuickSortTime1.png" alt="æ—¶é—´å¤æ‚åº¦"></p><p><img src="http://img.3amupupup.online/QuickSOrt.gif" alt="å¿«é€Ÿæ’åº"></p></li><li><p>ä»£ç å®ç°</p><pre><code class="c">/* * ä¸‰æ•°å–ä¸­ * åœ¨æ•°ç»„æœ‰åºæ—¶(å‡è®¾æ˜¯é™åº),keyIndexæ¯æ¬¡éƒ½æ˜¯æœ€å°çš„æ•°çš„ä¸‹æ ‡ * ä¼šå¯¼è‡´å¿«æ’å˜æˆä¸€ä¸ªN^2çš„ç®—æ³•,ä¸‰æ•°å–ä¸­èƒ½æœ‰æ•ˆé¿å…è¿™ä¸ªç¼ºé™·ã€‚ */int GetMidIdx(int* arr ,int left, int right){    int mid = (left+right)/2;    if (arr[left] &lt; arr[mid])    {        if (arr[mid] &lt; arr[right])            return mid;        else if (arr[left] &gt; arr[right])            return left;        else            return right;    }    else    {        if (arr[mid] &gt; arr[right])            return mid;        else if (arr[left] &lt; arr[right])            return left;        else            return right;    }}int Part(int* arr, int left, int right){    int midIndex = GetMidIdx(arr,left,right); // æ‰¾å‡ºä¸­ä½æ•°    Swap(&amp;arr[midIndex],&amp;arr[right]);    int keyIndex = right;    while(left &lt; right)    {        while(left &lt; right &amp;&amp; arr[left] &lt;= arr[keyIndex]) // å› ä¸ºæ˜¯leftå…ˆç§»åŠ¨,æ‰€ä»¥leftçš„æœ€ç»ˆåœç•™ä½ç½®çš„æ•°ä¸€å®šæ¯”keyIndexå¤§            left++;        while(left &lt; right &amp;&amp; arr[right] &gt;= arr[keyIndex])            right--;        Swap(&amp;arr[left], &amp;arr[right]); // å¾ªç¯èµ°åˆ°è¿™é‡Œæ—¶,leftä½ç½®çš„æ•°æ¯”keyIndexå¤§,rightä½ç½®çš„æ•°æ¯”keyIndexå°,å¯¹å®ƒä»¬è¿›è¡Œäº¤æ¢    }    Swap(&amp;arr[keyIndex], &amp;arr[left]); // leftæœ€ç»ˆåœæ­¢çš„ä½ç½®å’ŒkeyIndexè¿›è¡Œäº¤æ¢,æ­¤æ—¶leftçš„å·¦è¾¹å…¨æ˜¯æ¯”é€‰å‡ºçš„keyIndexå°çš„æ•°,å³è¾¹å…¨æ˜¯æ¯”keyIndexå¤§çš„æ•°ã€‚    return left; // å¿…é¡»è¿”å›left,ä¸‹ä¸€æ¬¡æ’åºæ—¶å°±å¯ä»¥æ’é™¤æ‰leftï¼Œå¯¹leftå·¦å³çš„ä¸¤è¾¹çš„æ•°è¿›è¡Œæ’åº}void QuickSort(int* arr, int left, int right){    if(left &lt; right)    {        int div = Part(arr,left,right);        QuickSort(arr,left,div-1);        QuickSort(arr,div+1,right);    }}void QuickSortNoR(int* arr, int left, int right){    Stack st;    StackInit(&amp;st);    StackPush(&amp;st,left); // æ³¨æ„è¿›æ ˆé¡ºåº,å…ˆè¿›çš„åè¢«å–å‡ºæ¥    StackPush(&amp;st,right);    while(!StackEmpty(&amp;st)) // æ ˆä¸ä¸ºç©ºè¯´æ˜è¿˜å­˜åœ¨æ²¡è¢«æ’åºçš„åŒºé—´åˆ™è¦ç»§ç»­å¾ªç¯    {        int _right = StackTop(&amp;st);        StackPop(&amp;st);        int _left = StackTop(&amp;st);        StackPop(&amp;st);        int div = Part(arr,_left,_right);        if(div+1 &lt; _right)        {            StackPush(&amp;st,div+1); // ä¿è¯å…¥æ ˆé¡ºåºå’Œç¬¬ä¸€æ¬¡ä¸€è‡´            StackPush(&amp;st,_right);        }        if(_left &lt; div-1)        {            StackPush(&amp;st,_left);            StackPush(&amp;st,div-1);        }    }    StackDestory(&amp;st);}</code></pre></li></ol><h4 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h4><ol><li><p>æ’åºæ€æƒ³</p><p>åˆå¹¶æœ‰åºæ•°ç»„</p></li><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/MergeSort.png" alt="å½’å¹¶æ’åº"></p><p><img src="http://img.3amupupup.online/MergeSortNoR.png" alt="éé€’å½’"></p><p><img src="http://img.3amupupup.online/MergeSort.gif" alt="å½’å¹¶æ’åº"></p></li><li><p>å®ç°</p><pre><code class="c">// å°†æ•°ç»„åˆ†å‰²æˆNä¸ªæœ‰åºå°åŒºé—´(1ä¸ªæ•°çš„åŒºé—´ï¼Œä¸€ä¸ªæ•°ä¹Ÿç®—æœ‰åº)ï¼Œå†åˆå¹¶æœ‰åºçš„æ•°ç»„void _MergeSort(int* arr,int left, int right, int* tmp){    if(left&gt;=right) // åˆ†å‰²é€€å‡ºçš„æ¡ä»¶        return;    int mid = (left+right)/2; // æ‹¿åˆ°ä¸­é—´ä½ç½®çš„ç´¢å¼•ï¼Œä¸‹ä¸€æ­¥é€’å½’åˆ†å‰²ï¼Œç›´åˆ°ä¸å¯åˆ†ä¸ºæ­¢(åˆ†å‰²åˆ°åªæœ‰ä¸€ä¸ªæ•°)    _MergeSort(arr,left,mid,tmp); // é€’å½’åˆ†å‰²å·¦åŠè¾¹    _MergeSort(arr,mid+1,right,tmp); // é€’å½’åˆ†å‰²å³åŠè¾¹    int begin1 = left, end1 = mid; // èµ°åˆ°è¿™é‡Œè¯´æ˜å·²ç»åˆ†å‰²å®Œäº†ï¼Œåˆ†æˆäº†right+1ä¸ªä¸€ä¸ªå…ƒç´ çš„æ•°ç»„    int begin2 = mid+1, end2 = right;    int index = begin1; // tmpåŒºé—´èµ·å§‹ä½ç½®    while (begin1 &lt;= end1 &amp;&amp; begin2 &lt;= end2) // å½’å¹¶æœ‰åºæ•°ç»„    {        if (arr[begin1] &lt; arr[begin2])        {            tmp[index++] = arr[begin1++];        }        else        {           tmp[index++] = arr[begin2++];        }    }    while (begin1&lt;=end1)        tmp[index++] = arr[begin1++];    while (begin2&lt;=end2)        tmp[index++] = arr[begin2++];    for (int i = left; i &lt;= right; ++i) // æ‹·è´å›åŸæ•°ç»„ï¼Œæ‹·è´ä¸€å®šæ˜¯ &lt;= é—­åŒºé—´ï¼Œå› ä¸ºrightä¼ å…¥çš„æ˜¯é—­åŒºé—´    {        arr[i] = tmp[i];    }}// å½’å¹¶ï¼Œé€’å½’å®ç°void MergeSort(int* arr, int arrSize){    int* tmp = malloc(sizeof(int)*arrSize);    _MergeSort(arr,0,arrSize-1,tmp);    free(tmp);}// å½’å¹¶ï¼Œéé€’å½’å®ç°void _MergeSortNoR(int* arr, int begin1, int end1, int begin2, int end2, int* tmp){    PrintArr(arr,10);    int left = begin1,right = end2; // è¿™é‡Œå¿…é¡»ä½¿ç”¨æ–°å˜é‡è®°å½•æ•°ç»„çš„èµ·å§‹ç»“æŸä½ç½®ï¼Œå› ä¸ºç»è¿‡è¿­ä»£åbegin1ä¼šè‡ªå¢    int index = begin1; // tmpåŒºé—´èµ·å§‹ä½ç½®    while (begin1 &lt;= end1 &amp;&amp; begin2 &lt;= end2) // å½’å¹¶æœ‰åºæ•°ç»„    {        if (arr[begin1] &lt; arr[begin2])        {            tmp[index++] = arr[begin1++];        }        else        {            tmp[index++] = arr[begin2++];        }    }    while (begin1&lt;=end1)        tmp[index++] = arr[begin1++];    while (begin2&lt;=end2)        tmp[index++] = arr[begin2++];    for (int i = left; i &lt;= right; ++i)    {        arr[i] = tmp[i];    }}void MergeSortNoR(int* arr, int arrSize){    int* tmp = (int*)malloc(sizeof(int)*arrSize);    int gap = 1;    while (gap&lt;arrSize)    {        for (int i = 0; i &lt; arrSize; i+=2*gap)        {            // [i,i+gap-1] [i+gap, i+2*gap-1]            int begin1 = i, end1 = i+gap-1, begin2 = i+gap, end2 =i+gap*2-1;            if (begin2 &gt;= arrSize) // begin2å¤§äºç­‰äºæ•°ç»„é•¿åº¦æ—¶è¯´æ˜åªå­˜åœ¨ä¸€ç»„æ•°æ®(æ— æ³•åˆ†å‰²æˆä¸¤ç»„)                break;            if (end2&gt;=arrSize) // end2å¤§äºç­‰äºæ•°ç»„é•¿åº¦åˆ™è¯´æ˜æ— æ³•åˆ†å‰²æˆå‡ç­‰çš„ä¸¤ç»„ï¼Œend2è¶…å‡ºäº†æ•°ç»„çš„èŒƒå›´                end2 = arrSize-1; // æ‰€ä»¥éœ€è¦è°ƒæ•´end2çš„ä½ç½®ï¼Œä½¿å…¶ä¸èƒ½è¶…å‡ºæ•°ç»„èŒƒå›´            _MergeSortNoR(arr,begin1,end1,begin2,end2,tmp);        }        gap*=2;    }    free(tmp);}</code></pre></li></ol><h4 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h4><ol><li><p>æ€æƒ³</p><p>è®°å½•ä¸€ä¸ªåºåˆ—ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°ã€‚</p><p>æ‰¾å‡ºåºåˆ—ä¸­çš„æœ€å¤§å€¼ max ç„¶ååˆ›å»ºä¸€ä¸ªsizeä¸ºmax+1çš„tmpæ•°ç»„ï¼Œéå†æ•°æ®åºåˆ—ï¼Œæ‹¿åºåˆ—ä¸­çš„å€¼åštmpæ•°ç»„çš„ä¸‹æ ‡ï¼Œtmpå¯¹åº”ä¸‹æ ‡çš„å€¼è¿›è¡Œ++ è®¡æ•°ã€‚éå†ç»“æŸåï¼Œä¾æ¬¡ä»tmpä¸­å–å€¼æ‹·è´åˆ°åŸåºåˆ—ä¸­ï¼Œtmpçš„ä¸‹æ ‡ä½œä¸ºåºåˆ—çš„å€¼ï¼Œtmpä¸‹æ ‡å¯¹åº”çš„å€¼ä½œä¸ºæ‹·è´çš„æ¬¡æ•°ã€‚</p></li><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/CountSort.png" alt="è®¡æ•°æ’åº"></p><p><img src="http://img.3amupupup.online/849589-20171015231740840-6968181.gif" alt="è®¡æ•°æ’åº"></p></li><li><p>å®ç°</p><pre><code class="c">void CountSort(int* arr, int arrSize){    int min = arr[0];     int max = arr[0]; // æ‰¾å‡ºæœ€å¤§æœ€å°çš„å€¼    for (int i = 0; i &lt; arrSize; ++i)    {        if (arr[i] &gt; max)        {            max = arr[i];        }        if (arr[i] &lt; min)        {            min = arr[i];        }    }    int range = max-min+1; // åˆ›å»ºä¸€ä¸ªrange+1å¤§å°çš„æ•°ç»„ï¼Œåˆ©ç”¨ç›¸å¯¹ä½ç½®å­˜å‚¨è®¡æ•°ï¼Œè¿˜åŸæ—¶tmpæ•°ç»„ä¸‹æ ‡åŠ ä¸Šminå°±æ˜¯åŸæ•°ç»„çš„å€¼    int* countArray = (int*)malloc(sizeof(int)*range);    if (!countArray)    {        printf(&quot;malloc failed.\n&quot;);        exit(-1);    }    memset(countArray,0,sizeof(int)*range);    for (int i = 0; i &lt; arrSize; ++i)    {        countArray[arr[i]-min]++;    }    int index = 0;    for (int i = 0; i &lt; range; ++i)    {        while (countArray[i]--)        {            arr[index++] = i+min;        }    }    free(countArray);}</code></pre></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;å†’æ³¡æ’åº&quot;&gt;&lt;a href=&quot;#å†’æ³¡æ’åº&quot; class=&quot;headerlink&quot; title=&quot;å†’æ³¡æ’åº&quot;&gt;&lt;/a&gt;å†’æ³¡æ’åº&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ’åºæ€æƒ³&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ— åºæ•°åˆ—ï¼Œä»ç¬¬ä¸€ä¸ªæ•°å¼€å§‹ï¼Œå¾ªç¯æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªæ•°çš„å¤§å°ï¼Œå¦‚æœå‰ä¸€ä¸ªæ•°å¤§äºåä¸€ä¸ªæ•°åˆ™</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="æ’åº" scheme="http://blog.3amupupup.online/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>Jenkinsç»“åˆsonarä»£ç æ£€æµ‹æµæ°´çº¿</title>
    <link href="http://blog.3amupupup.online/2021/03/18/Jenkins%E7%BB%93%E5%90%88sonar%E4%BB%A3%E7%A0%81%E6%A3%80%E6%B5%8B%E6%B5%81%E6%B0%B4%E7%BA%BF/"/>
    <id>http://blog.3amupupup.online/2021/03/18/Jenkins%E7%BB%93%E5%90%88sonar%E4%BB%A3%E7%A0%81%E6%A3%80%E6%B5%8B%E6%B5%81%E6%B0%B4%E7%BA%BF/</id>
    <published>2021-03-18T03:09:52.078Z</published>
    <updated>2021-03-18T03:09:52.078Z</updated>
    
    <content type="html"><![CDATA[<h5 id="1ã€jenkinsæ‰€éœ€æ’ä»¶"><a href="#1ã€jenkinsæ‰€éœ€æ’ä»¶" class="headerlink" title="1ã€jenkinsæ‰€éœ€æ’ä»¶"></a>1ã€jenkinsæ‰€éœ€æ’ä»¶</h5><p><a href="https://plugins.jenkins.io/workflow-aggregator" target="_blank" rel="noopener">Pipeline</a>ã€<a href="https://plugins.jenkins.io/sonar-quality-gates" target="_blank" rel="noopener">Sonar Quality Gates Plugin</a>ã€<a href="https://plugins.jenkins.io/sonar" target="_blank" rel="noopener">SonarQube Scanner</a>ã€<a href="https://plugins.jenkins.io/generic-webhook-trigger" target="_blank" rel="noopener">Generic Webhook Trigger Plugin</a></p><h5 id="2ã€jenkinsé…ç½®"><a href="#2ã€jenkinsé…ç½®" class="headerlink" title="2ã€jenkinsé…ç½®"></a>2ã€jenkinsé…ç½®</h5><ul><li><p>Dashboard =&gt; ç³»ç»Ÿç®¡ç† =&gt; å…¨å±€å·¥å…·é…ç½®</p><p><img src="/image/image-20201227165338711.png" alt="sonar scannerå®‰è£…"></p></li><li><p>Dashboard =&gt; ç³»ç»Ÿç®¡ç† =&gt; ç³»ç»Ÿé…ç½®</p><p><img src="/image/image-20201227165501679.png" alt="sonarqube serversé…ç½®"></p></li></ul><p>  <img src="/image/image-20201227165627390.png" alt="tokené…ç½®"></p><p>  è¿™ä¸ªtokenæ˜¯åœ¨sonar webä¸Šç”Ÿæˆçš„ï¼Œç„¶ååœ¨jenkinsä¸Šåˆ›å»ºä¸€ä¸ªsecret textç±»å‹å‡­æ®ã€‚</p><p>  <img src="/image/image-20201227165828644.png" alt="gitlab"></p><p>  é…ç½®è¿æ¥gitlabï¼Œè¦ç”Ÿæˆgitlab api token</p><p>  <img src="/image/image-20201227165956042.png" alt="è·å–gitlab Private token"></p><p>  ç”Ÿæˆprivate tokenã€‚åœ¨sonaræ£€æµ‹ä»£ç æ‰€æœ‰æ¡ä»¶éƒ½é€šè¿‡æ—¶ï¼Œè¦é€šè¿‡è¿™ä¸ªprivate tokenå»æ“ä½œgitlabçš„apiæ¥è‡ªåŠ¨æ¥å—åˆå¹¶è¯·æ±‚ã€‚</p><p>  <img src="/image/image-20201227170513752.png" alt="private token å‡­æ®"></p><p>  ç”Ÿæˆå‡­æ®ï¼Œè®°ä½è¿™é‡Œçš„id ä¸º12ï¼Œä¸€ä¼špipelineè„šæœ¬è¦ç”¨</p><ul><li><p>åœ¨gitlabé¡¹ç›®ä¸‹é…ç½®è§¦å‘å™¨ï¼Œåªå‹¾é€‰Merge Request Events (è¿™ä¸ªtokenéšæœºç”Ÿæˆä¸€ä¸ªå°±å¥½äº†)</p><p><img src="/image/image-20201227170841973.png" alt="gitlab webhook"></p></li></ul><h5 id="3ã€pipilineè„šæœ¬"><a href="#3ã€pipilineè„šæœ¬" class="headerlink" title="3ã€pipilineè„šæœ¬"></a>3ã€pipilineè„šæœ¬</h5><pre><code class="pipeline">pipeline {   agent any   environment {        PrivateToken= credentials(&#39;12&#39;) // è·å–private tokenï¼Œä¹‹å‰åœ¨å‡­æ®é‡Œé…ç½®è¿‡ï¼Œè¿™æ ·æ¯”è¾ƒå®‰å…¨ï¼Œä¸éœ€è¦åœ¨è„šæœ¬é‡Œæ˜æ–‡ä½¿ç”¨token    }   options {      gitLabConnection(&#39;gitlab&#39;)    }       triggers {        GenericTrigger(            genericVariables: [            [key: &#39;source_branch&#39;, value: &#39;$.object_attributes.source_branch&#39;], // è·å–mergeçš„æºåˆ†æ”¯,åªæ£€æµ‹æºåˆ†æ”¯ï¼Œæºåˆ†æ”¯çš„ä»£ç æ£€æµ‹æˆåŠŸæ‰èƒ½åˆå¹¶åˆ°ç›®æ ‡åˆ†æ”¯            [key: &#39;url&#39;, value: &#39;$.object_attributes.url&#39;], // è·å–gitlab mergeè¯·æ±‚çš„url            [key: &#39;action&#39;, value: &#39;$.object_attributes.action&#39;], // è·å–mergeåŠ¨ä½œ [reopen,close,open],åªåœ¨reopenå’Œopenæ—¶æ‰å‡ºå‘æµæ°´çº¿æ£€æµ‹            [key: &#39;source_project_id&#39;, value: &#39;$.object_attributes.source_project_id&#39;],            [key: &#39;iid&#39;, value: &#39;$.object_attributes.iid&#39;],            [key: &#39;name&#39;, value: &#39;$.user.name&#39;], // è·å–åˆå¹¶è¯·æ±‚çš„å‘èµ·äºº            [key: &#39;project_name&#39;, value: &#39;$.project.name&#39;], // æˆ–è€…é¡¹ç›®å            [key: &#39;target_branch&#39;, value: &#39;$.object_attributes.target_branch&#39;], // è·å–ç›®æ ‡åˆ†æ”¯ï¼Œæˆ‘è¿™é‡Œçš„éœ€æ±‚æ˜¯ï¼šåˆå¹¶åˆ°release.teståˆ†æ”¯çš„è¯·æ±‚æ‰è¿›è¡Œè´¨æ£€ã€è‡ªåŠ¨åˆå¹¶ï¼Œæ‰€ä»¥æˆ‘éœ€è¦æ‹¿åˆ°è¿™ä¸ªå˜é‡            [key: &#39;object_kind&#39;, value: &#39;$.object_kind&#39;]            ],            token: &#39;fc161920aa6f1886e7417416edc85500&#39; , // è¿™æ˜¯webhookä¸Šå¡«å†™çš„token            causeString: &#39; Triggered on $ref&#39; ,            printContributedVariables: true,            printPostContent: true        )    }   stages {    stage(&quot;select branch&quot;){        steps{                script{                    if((env.source_branch =~ &#39;release.*&#39;).matches() || (env.action!=&quot;open&quot;  &amp;&amp; env.action!=&quot;update&quot;) || env.target_branch != &quot;release.test&quot;){ // è§¦å‘æµæ°´çº¿æ£€æµ‹ä»£ç çš„æ¡ä»¶                        stage(&quot;exit with 0&quot;){                            ansiColor(&#39;gnome-terminal&#39;) {                                echo &quot;\033[32m Jump Sonar\n user:$name\nproject_name:$project_name\nobject_kind:$object_kind\naction:$action\nsource_branch:$source_branch\n target_branch:$target_branch \033[0m&quot;                            }                                   }                    }else{                        stage(&#39;pull branch&#39;) {                            checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;*/$source_branch&quot;]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: &#39;11&#39;, url: &#39;http://gitlab.xxxxxx.com:8888/xubin/xxxxxxxx.git&#39;]]])                        }                        stage(&#39;SonarQubeanalysis&#39;) {                                script {                                    scannerHome = tool &#39;sonar-scanner&#39;                                }                            withSonarQubeEnv(&#39;sonar&#39;) {                            sh &quot;echo ${scannerHome}&quot;                            sh &quot;${scannerHome}/bin/sonar-scanner -Dsonar.projectKey=$JOB_BASE_NAME -Dsonar.sources=./app&quot;                            }                    }                       stage(&quot;SonarQube Quality Gate&quot;) {                                    timeout(time: 1, unit: &#39;HOURS&#39;) {                                    def qg = waitForQualityGate(&#39;sonar&#39;)                                    if (qg.status != &#39;OK&#39;) {                                    echo &quot;Status: ${qg.status}&quot;                                    error &quot;Pipeline aborted due to quality gate failure: ${qg.status}&quot; // è´¨æ£€æ²¡é€šè¿‡ç›´æ¥è®©æµæ°´çº¿å¤±è´¥é€€å‡º                                    }                                }                                ansiColor(&#39;gnome-terminal&#39;) {                                echo &quot;\033[32m Jump Sonar\n user:$name\nproject_name:$project_name\nobject_kind:$object_kind\naction:$action\nsource_branch:$source_branch\n target_branch:$target_branch \033[0m&quot;                            }                    }                         stage(&quot;Merge&quot;){ // å¦‚æœæ£€æµ‹é€šè¿‡è‡ªåŠ¨åˆå¹¶è¯·æ±‚                                script{                                    httpRequest authentication: &#39;11&#39;, customHeaders: [[maskValue: false, name: &#39;PRIVATE-TOKEN&#39;, value: &quot;$PrivateToken&quot;]], httpMode: &#39;PUT&#39;, responseHandle: &#39;NONE&#39;, url: &quot;http://gitlab.xxxxxx.com:8888/api/v4/projects/$source_project_id/merge_requests/$iid/merge&quot;                                }                        }                    }                }            }        }    }}</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;1ã€jenkinsæ‰€éœ€æ’ä»¶&quot;&gt;&lt;a href=&quot;#1ã€jenkinsæ‰€éœ€æ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;1ã€jenkinsæ‰€éœ€æ’ä»¶&quot;&gt;&lt;/a&gt;1ã€jenkinsæ‰€éœ€æ’ä»¶&lt;/h5&gt;&lt;p&gt;&lt;a href=&quot;https://plugins.j</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="http://blog.3amupupup.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="sonar" scheme="http://blog.3amupupup.online/tags/sonar/"/>
    
  </entry>
  
  <entry>
    <title>å¸¦ç¯é“¾è¡¨</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E5%B8%A6%E7%8E%AF%E9%93%BE%E8%A1%A8/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E5%B8%A6%E7%8E%AF%E9%93%BE%E8%A1%A8/</id>
    <published>2021-03-18T03:09:52.077Z</published>
    <updated>2021-03-18T03:09:52.077Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1ã€åˆ¤æ–­é“¾è¡¨æ˜¯å¦å¸¦ç¯"><a href="#1ã€åˆ¤æ–­é“¾è¡¨æ˜¯å¦å¸¦ç¯" class="headerlink" title="1ã€åˆ¤æ–­é“¾è¡¨æ˜¯å¦å¸¦ç¯"></a>1ã€<a href="https://leetcode-cn.com/problems/linked-list-cycle/" target="_blank" rel="noopener">åˆ¤æ–­é“¾è¡¨æ˜¯å¦å¸¦ç¯</a></h4><h5 id="è§£é¢˜è¿‡ç¨‹ï¼š"><a href="#è§£é¢˜è¿‡ç¨‹ï¼š" class="headerlink" title="è§£é¢˜è¿‡ç¨‹ï¼š"></a>è§£é¢˜è¿‡ç¨‹ï¼š</h5><ol><li><p>ç»™é“¾è¡¨è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œslowç§»åŠ¨ä¸€æ­¥ï¼Œfastç§»åŠ¨ä¸¤æ­¥ã€‚</p><p><img src="/image/image-20201227013251253.png" alt="åˆå§‹çŠ¶æ€"></p></li><li><p>fastå’ŒslowæŒ‡é’ˆéƒ½è¿›å…¥ç¯ä¹‹å</p><p><img src="/image/image-20201227013617501.png" alt="fastã€slowè¿›ç¯"></p></li><li><p>fastå’ŒslowæŒ‡é’ˆé‡åˆ</p><p>åœ¨slowå’Œfastéƒ½è¿›ç¯ä¹‹åï¼Œfastå¼€å§‹è¿½slowã€‚slowç§»åŠ¨ä¸€æ­¥ï¼Œfastç§»åŠ¨ä¸¤æ­¥ã€‚</p><p><img src="/image/image-20201227014743194.png" alt="æŒ‡é’ˆè¿½èµ¶"></p><p>æ¯ä¸€æ¬¡ç§»åŠ¨fastå’Œslowä¹‹é—´çš„è·ç¦»ç¼©çŸ­ä¸€æ­¥ï¼Œæœ€ç»ˆé‡åˆï¼Œåˆ™è¯æ˜æœ‰ç¯ã€‚å¦‚æœfastæŒ‡é’ˆåœ¨ç»è¿‡è‹¥å¹²æ¬¡ç§»åŠ¨ä¹‹åä¸ºNULL(å¾ªç¯ç»“æŸ)ï¼Œåˆ™è¯´æ˜ä¸å¸¦ç¯ã€‚</p><p><img src="/image/image-20201227013919844.png" alt="æŒ‡é’ˆé‡åˆ"></p></li><li><p>ä»£ç ï¼š</p><pre><code class="c">/** * Definition for singly-linked list. * struct ListNode { *     int val; *     struct ListNode *next; * }; */bool hasCycle(struct ListNode *head) {    struct ListNode *slow = head;    struct ListNode *fast = head;    while(fast &amp;&amp; fast-&gt;next)    {        slow = slow-&gt;next;        fast = fast-&gt;next-&gt;next;        if (slow == fast)        {            return true;        }    }    return false;}</code></pre></li></ol><h4 id="2ã€å¸¦ç¯é“¾è¡¨çš„å…¥ç¯ç»“ç‚¹"><a href="#2ã€å¸¦ç¯é“¾è¡¨çš„å…¥ç¯ç»“ç‚¹" class="headerlink" title="2ã€å¸¦ç¯é“¾è¡¨çš„å…¥ç¯ç»“ç‚¹"></a>2ã€<a href="https://leetcode-cn.com/problems/linked-list-cycle-ii/" target="_blank" rel="noopener">å¸¦ç¯é“¾è¡¨çš„å…¥ç¯ç»“ç‚¹</a></h4><h5 id="è§£é¢˜è¿‡ç¨‹"><a href="#è§£é¢˜è¿‡ç¨‹" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h5><ol><li><p>ç»™é“¾è¡¨è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œslowç§»åŠ¨ä¸€æ­¥ï¼Œfastç§»åŠ¨ä¸¤æ­¥ã€‚</p><p><img src="/image/image-20201227132753055.png" alt="åˆå§‹çŠ¶æ€"></p></li><li><p>slowåœ¨è¿›å…¥ç¯ä¹‹åï¼Œåœ¨ä¸€ä¸ªCä¹‹å†…å°±ä¼šè¢«fastè¿½ä¸Š(fastçš„é€Ÿåº¦æ˜¯slowçš„ä¸¤å€)ã€‚</p><p>slowèµ°çš„è·ç¦»æ˜¯ï¼šL+X</p><p>fastèµ°çš„è·ç¦»æ˜¯ ï¼šL+N*C+X (å¦‚æœLè¶³å¤Ÿé•¿ç¯è¶³å¤Ÿå°ï¼Œfastè¿›ç¯ä¸”ç»•ç¯Næ¬¡ä¹‹åslowæ‰ä¼šè¿›å…¥)</p><p>2*(L+X) = L+N*C+X =&gt; L = N*C -X</p><p>ç„¶ååŒæ—¶ä»headå’Œfastä½ç½®å¼€å§‹éå†ï¼Œæ‰¾åˆ°ç›¸åŒçš„èŠ‚ç‚¹ã€‚</p><p><img src="/image/image-20201227154937844.png" alt="slowã€fasté‡åˆ"></p></li><li><p>ä»£ç ï¼š</p><pre><code class="c">/** * Definition for singly-linked list. * struct ListNode { *     int val; *     struct ListNode *next; * }; */struct ListNode *detectCycle(struct ListNode *head) {    struct ListNode *slow = head;    struct ListNode *fast = head;    while(fast &amp;&amp; fast-&gt;next) // éå†é“¾è¡¨ï¼Œæ‰¾åˆ°slowä¸fasté‡åˆçš„ç‚¹    {        slow = slow-&gt;next;        fast = fast-&gt;next-&gt;next;        if(fast == slow)        {            break;        }    }    if(!fast || !fast-&gt;next) // åˆ¤æ–­ä¸Šä¸€æ­¥å¾ªç¯æ—¶å› ä¸ºéå†åˆ°NULLç»“æŸçš„è¿˜æ˜¯å› ä¸º fast==slow ç»“æŸçš„    {        return NULL; // å¦‚æœfastæˆ–è€…fast-&gt;nextä¸ºNULLè¯´æ˜é“¾è¡¨ä¸å¸¦ç¯ï¼Œç›´æ¥è¿”å›NULL    }    while(fast &amp;&amp; head) // éå†å¯»æ‰¾ç›¸äº¤ç»“ç‚¹    {        if(fast == head)        {            return fast;        }        fast = fast-&gt;next;        head = head-&gt;next;    }    return NULL;}</code></pre></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;1ã€åˆ¤æ–­é“¾è¡¨æ˜¯å¦å¸¦ç¯&quot;&gt;&lt;a href=&quot;#1ã€åˆ¤æ–­é“¾è¡¨æ˜¯å¦å¸¦ç¯&quot; class=&quot;headerlink&quot; title=&quot;1ã€åˆ¤æ–­é“¾è¡¨æ˜¯å¦å¸¦ç¯&quot;&gt;&lt;/a&gt;1ã€&lt;a href=&quot;https://leetcode-cn.com/problems/linked-list-</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://blog.3amupupup.online/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>ECSç£ç›˜æ‰©å®¹</title>
    <link href="http://blog.3amupupup.online/2021/03/18/ECS%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/"/>
    <id>http://blog.3amupupup.online/2021/03/18/ECS%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/</id>
    <published>2021-03-18T03:09:52.075Z</published>
    <updated>2021-03-18T03:09:52.076Z</updated>
    
    <content type="html"><![CDATA[<h6 id="1ã€é€šè¿‡-df-h-çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚"><a href="#1ã€é€šè¿‡-df-h-çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚" class="headerlink" title="1ã€é€šè¿‡ df -h çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚"></a>1ã€é€šè¿‡ df -h çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚</h6><p><img src="/image/image-20200512133700547.png" alt="image-20200512133700547"></p><h6 id="2ã€åœ¨é˜¿é‡Œäº‘åå°å¯¹å½“å‰ECSå®ä¾‹çš„ç£ç›˜è¿›è¡Œåœ¨çº¿æ‰©å®¹ã€‚"><a href="#2ã€åœ¨é˜¿é‡Œäº‘åå°å¯¹å½“å‰ECSå®ä¾‹çš„ç£ç›˜è¿›è¡Œåœ¨çº¿æ‰©å®¹ã€‚" class="headerlink" title="2ã€åœ¨é˜¿é‡Œäº‘åå°å¯¹å½“å‰ECSå®ä¾‹çš„ç£ç›˜è¿›è¡Œåœ¨çº¿æ‰©å®¹ã€‚"></a>2ã€åœ¨é˜¿é‡Œäº‘åå°å¯¹å½“å‰ECSå®ä¾‹çš„ç£ç›˜è¿›è¡Œåœ¨çº¿æ‰©å®¹ã€‚</h6><p><img src="/image/image-20200512134218782.png" alt="image-20200512134218782"></p><h6 id="3ã€æ‰©å®¹åç™»é™†ECSä½¿ç”¨fdisk-læŸ¥çœ‹ç£ç›˜å¤§å°ï¼Œç£ç›˜å·²ç»æ‰©å®¹åˆ°100Gã€‚"><a href="#3ã€æ‰©å®¹åç™»é™†ECSä½¿ç”¨fdisk-læŸ¥çœ‹ç£ç›˜å¤§å°ï¼Œç£ç›˜å·²ç»æ‰©å®¹åˆ°100Gã€‚" class="headerlink" title="3ã€æ‰©å®¹åç™»é™†ECSä½¿ç”¨fdisk -læŸ¥çœ‹ç£ç›˜å¤§å°ï¼Œç£ç›˜å·²ç»æ‰©å®¹åˆ°100Gã€‚"></a>3ã€æ‰©å®¹åç™»é™†ECSä½¿ç”¨fdisk -læŸ¥çœ‹ç£ç›˜å¤§å°ï¼Œç£ç›˜å·²ç»æ‰©å®¹åˆ°100Gã€‚</h6><p><img src="/image/image-20200512134102595.png" alt="image-20200512134102595"></p><h6 id="4ã€å®‰è£…growpart"><a href="#4ã€å®‰è£…growpart" class="headerlink" title="4ã€å®‰è£…growpart"></a>4ã€å®‰è£…growpart</h6><pre><code class="shell">[root@iZbp1e8z3uz7pmqbsis8bkZ ~]# yum -y install cloud-utils-growpartLoaded plugins: fastestmirrorbase                                                     | 3.6 kB     00:00epel                                                     | 4.7 kB     00:00extras                                                   | 2.9 kB     00:00updates                                                  | 2.9 kB     00:00(1/7): base/7/x86_64/group_gz                              | 153 kB   00:00(2/7): extras/7/x86_64/primary_db                          | 190 kB   00:00(3/7): epel/x86_64/group_gz                                |  95 kB   00:00(4/7): updates/7/x86_64/primary_db                         | 176 kB   00:00(5/7): epel/x86_64/updateinfo                              | 1.0 MB   00:00(6/7): base/7/x86_64/primary_db                            | 6.1 MB   00:00(7/7): epel/x86_64/primary_db                              | 6.8 MB   00:00Determining fastest mirrors * base: mirrors.cloud.aliyuncs.com * epel: mirrors.cloud.aliyuncs.com * extras: mirrors.cloud.aliyuncs.com * updates: mirrors.cloud.aliyuncs.comResolving Dependencies--&gt; Running transaction check---&gt; Package cloud-utils-growpart.noarch 0:0.29-5.el7 will be installed--&gt; Finished Dependency ResolutionDependencies Resolved================================================================================ Package                     Arch          Version            Repository   Size================================================================================Installing: cloud-utils-growpart        noarch        0.29-5.el7         base         27 kTransaction Summary================================================================================Install  1 PackageTotal download size: 27 kInstalled size: 61 kDownloading packages:cloud-utils-growpart-0.29-5.el7.noarch.rpm                 |  27 kB   00:00Running transaction checkRunning transaction testTransaction test succeededRunning transaction  Installing : cloud-utils-growpart-0.29-5.el7.noarch                       1/1  Verifying  : cloud-utils-growpart-0.29-5.el7.noarch                       1/1Installed:  cloud-utils-growpart.noarch 0:0.29-5.el7Complete!</code></pre><h6 id="5ã€æ‰©å±•-dev-vda1åˆ†åŒºï¼ˆå‘½åå«ä¹‰ä¸ºæ‰©å±•-dev-vdaç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼‰ã€‚"><a href="#5ã€æ‰©å±•-dev-vda1åˆ†åŒºï¼ˆå‘½åå«ä¹‰ä¸ºæ‰©å±•-dev-vdaç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼‰ã€‚" class="headerlink" title="5ã€æ‰©å±•/dev/vda1åˆ†åŒºï¼ˆå‘½åå«ä¹‰ä¸ºæ‰©å±•/dev/vdaç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼‰ã€‚"></a>5ã€æ‰©å±•/dev/vda1åˆ†åŒºï¼ˆå‘½åå«ä¹‰ä¸ºæ‰©å±•/dev/vdaç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼‰ã€‚</h6><pre><code class="shell">[root@iZbp1e8z3uz7pmqbsis8bkZ ~]# growpart /dev/vda 1CHANGED: partition=1 start=2048 old: size=83881984 end=83884032 new: size=209713119 end=209715167</code></pre><p>â€‹     è‹¥æŠ¥é”™unexpected output in sfdisk â€“versionâ€¦â€¦..åˆ™è¿è¡ŒLANG=en_US.UTF-8åˆ‡æ¢ECSå®ä¾‹çš„å­—ç¬¦ç¼–ç ç±»å‹ã€‚</p><p>6ã€è¿è¡Œresize2fs <PartitionName> å‘½ä»¤è°ƒç”¨resize2fsæ‰©å®¹æ–‡ä»¶ç³»ç»Ÿã€‚</p><pre><code class="shell">[root@iZbp1e8z3uz7pmqbsis8bkZ ~]# resize2fs /dev/vda1resize2fs 1.42.9 (28-Dec-2013)Filesystem at /dev/vda1 is mounted on /; on-line resizing requiredold_desc_blocks = 3, new_desc_blocks = 7The filesystem on /dev/vda1 is now 26214139 blocks long.[root@iZbp1e8z3uz7pmqbsis8bkZ ~]# df -hFilesystem      Size  Used Avail Use% Mounted on/dev/vda1        99G  1.5G   93G   2% /devtmpfs        487M     0  487M   0% /devtmpfs           497M     0  497M   0% /dev/shmtmpfs           497M  308K  496M   1% /runtmpfs           497M     0  497M   0% /sys/fs/cgrouptmpfs           100M     0  100M   0% /run/user/0</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h6 id=&quot;1ã€é€šè¿‡-df-h-çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚&quot;&gt;&lt;a href=&quot;#1ã€é€šè¿‡-df-h-çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚&quot; class=&quot;headerlink&quot; title=&quot;1ã€é€šè¿‡ df -h çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚&quot;&gt;&lt;/a&gt;1ã€é€šè¿‡ df -h çŸ¥æ ¹åˆ†åŒºå¤§å°ä¸º40Gã€‚</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="http://blog.3amupupup.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="ecs" scheme="http://blog.3amupupup.online/tags/ecs/"/>
    
  </entry>
  
  <entry>
    <title>linuxæ€§èƒ½ä¼˜åŒ–å®æˆ˜ç¬”è®°</title>
    <link href="http://blog.3amupupup.online/2021/03/18/linux%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/"/>
    <id>http://blog.3amupupup.online/2021/03/18/linux%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/</id>
    <published>2021-03-18T03:09:52.075Z</published>
    <updated>2021-03-18T03:09:52.075Z</updated>
    
    <content type="html"><![CDATA[<h4 id="01ã€å¹³å‡è´Ÿè½½"><a href="#01ã€å¹³å‡è´Ÿè½½" class="headerlink" title="01ã€å¹³å‡è´Ÿè½½"></a>01ã€å¹³å‡è´Ÿè½½</h4><p>å¹³å‡è´Ÿè½½ï¼šç³»ç»Ÿå‡ºäºå¯è¿è¡ŒçŠ¶æ€<font size=2 color=red>ï¼ˆæ­£åœ¨ä½¿ç”¨cpuæˆ–è€…æ­£åœ¨ç­‰å¾…cpuçš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯pså‘½ä»¤çœ‹åˆ°çš„Running æˆ– RunnableçŠ¶æ€çš„è¿›ç¨‹ï¼‰</font>å’Œä¸å¯ä¸­æ–­çŠ¶æ€<font size=2 color=red>ï¼ˆè¿›ç¨‹æ­£åœ¨å¤„äºå†…æ ¸æ€å…³é”®æµç¨‹ä¸­çš„è¿›ç¨‹ï¼Œè¿™äº›æµç¨‹æ˜¯ä¸å¯æ‰“æ–­çš„ï¼Œä¾‹å¦‚ç­‰å¾…ç¡¬ä»¶è®¾å¤‡çš„I/Oå“åº”ï¼Œä¹Ÿå°±æ˜¯pså‘½ä»¤çœ‹åˆ°çš„DçŠ¶æ€ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹å‘ç£ç›˜è¯»å†™æ•°æ®æ—¶ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œåœ¨å¾—åˆ°ç£ç›˜å›å¤å‰ï¼Œå®ƒæ˜¯ä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹æˆ–è€…ä¸­æ–­æ‰“æ–­çš„ï¼Œè¿™ä¸ªæ—¶å€™çš„è¿›ç¨‹å°±å¤„äºä¸å¯ä¸­æ–­çŠ¶æ€ã€‚å¦‚æœæ­¤æ—¶çš„è¿›ç¨‹è¢«æ‰“æ–­äº†ï¼Œå°±å®¹æ˜“å‡ºç°ç£ç›˜æ•°æ®ä¸è¿›ç¨‹æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œä¸å¯ä¸­æ–­çŠ¶æ€å®é™…ä¸Šæ˜¯ç³»ç»Ÿå¯¹è¿›ç¨‹å’Œç¡¬ä»¶è®¾å¤‡çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ã€‚ï¼‰</font>çš„å¹³å‡è¿›ç¨‹æ•°ï¼Œä¹Ÿå°±æ˜¯å¹³å‡æ´»è·ƒè¿›ç¨‹æ•°ã€‚</p><pre><code class="shell">#è§‚å¯Ÿè¿›ç¨‹çš„cpuä½¿ç”¨æƒ…å†µï¼Œé—´éš”ä¸€ç§’è¾“å‡ºä¸€æ¬¡pidstat  -u 1#è§‚å¯Ÿcpuä½¿ç”¨æƒ…å†µï¼Œè§‚å¯Ÿå„çŠ¶æ€å æ¯”mpstat -P ALL  1</code></pre><h4 id="02ã€CPU-ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#02ã€CPU-ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="02ã€CPU ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>02ã€CPU ä¸Šä¸‹æ–‡åˆ‡æ¢</h4><p>CPU å¯„å­˜å™¨ï¼šæ˜¯ CPU å†…ç½®çš„å®¹é‡å°ã€ä½†é€Ÿåº¦æå¿«çš„å†…å­˜ã€‚</p><p>ç¨‹åºè®¡æ•°å™¨ï¼šåˆ™æ˜¯ç”¨æ¥å­˜å‚¨ CPU æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ä½ç½®ã€æˆ–è€…å³å°†æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ä½ç½®ã€‚</p><p>å®ƒä»¬éƒ½æ˜¯ CPU åœ¨è¿è¡Œä»»ä½•ä»»åŠ¡å‰ï¼Œå¿…é¡»çš„ä¾èµ–ç¯å¢ƒï¼Œå› æ­¤ä¹Ÿè¢«å«åš CPU ä¸Šä¸‹æ–‡ã€‚</p><p>CPU ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå°±æ˜¯å…ˆæŠŠå‰ä¸€ä¸ªä»»åŠ¡çš„ CPU ä¸Šä¸‹æ–‡ï¼ˆä¹Ÿå°±æ˜¯ CPU å¯„å­˜å™¨å’Œç¨‹åºè®¡æ•°å™¨ï¼‰ä¿å­˜èµ·æ¥ï¼Œç„¶ååŠ è½½æ–°ä»»åŠ¡çš„ä¸Šä¸‹æ–‡åˆ°è¿™äº›å¯„å­˜å™¨å’Œç¨‹åºè®¡æ•°å™¨ï¼Œæœ€åå†è·³è½¬åˆ°ç¨‹åºè®¡æ•°å™¨æ‰€æŒ‡çš„æ–°ä½ç½®ï¼Œè¿è¡Œæ–°ä»»åŠ¡ã€‚</p><p>ä¸Šä¸‹æ–‡åˆ‡æ¢æƒ…æ™¯ï¼š</p><p>â‘  ç³»ç»Ÿè°ƒç”¨ï¼Œcpuå¯„å­˜å™¨é‡ŒåŸæ¥ç”¨æˆ·æ€çš„æŒ‡ä»¤ä½ç½®ï¼Œéœ€è¦å…ˆä¿å­˜èµ·æ¥ï¼Œæ¥ç€ä¸ºäº†æ‰§è¡Œå†…æ ¸æ€çš„ä»£ç ï¼Œcpuå¯„å­˜å™¨éœ€è¦æ›´æ–°ä¸ºå†…æ ¸æ€æŒ‡ä»¤çš„æœ€æ–°ä½ç½®ï¼Œæœ€åæ‰æ˜¯è·³è½¬åˆ°å†…æ ¸æ€è¿è¡Œå†…æ ¸ä»»åŠ¡ï¼Œç³»ç»Ÿè°ƒç”¨ç»“æŸåcpuéœ€è¦æ¢å¤åˆ°åŸæ¥ä¿å­˜çš„ç”¨æˆ·æ€ï¼Œç»§ç»­è¿è¡Œè¿›ç¨‹ã€‚soï¼Œä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨å‘ç”Ÿäº†ä¸¤æ¬¡cpuä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ï¼ˆ<font size=2 color=red>ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸ä¼šæ¶‰åŠåˆ°è™šæ‹Ÿå†…å­˜ç­‰è¿›ç¨‹ç”¨æˆ·æ€çš„èµ„æºï¼Œä¹Ÿä¸ä¼šåˆ‡æ¢è¿›ç¨‹ã€‚è¿™è·Ÿæˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä¸ä¸€æ ·çš„</font>ï¼‰</p><p>è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ˜¯æŒ‡ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹è¿è¡Œã€‚è€Œç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ä¸­ä¸€ç›´æ˜¯åŒä¸€ä¸ªè¿›ç¨‹åœ¨è¿è¡Œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;01ã€å¹³å‡è´Ÿè½½&quot;&gt;&lt;a href=&quot;#01ã€å¹³å‡è´Ÿè½½&quot; class=&quot;headerlink&quot; title=&quot;01ã€å¹³å‡è´Ÿè½½&quot;&gt;&lt;/a&gt;01ã€å¹³å‡è´Ÿè½½&lt;/h4&gt;&lt;p&gt;å¹³å‡è´Ÿè½½ï¼šç³»ç»Ÿå‡ºäºå¯è¿è¡ŒçŠ¶æ€&lt;font size=2 color=red&gt;ï¼ˆæ­£åœ¨ä½¿ç”¨cpuæˆ–è€…æ­£åœ¨ç­‰</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="http://blog.3amupupup.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="linuxæ€§èƒ½ä¼˜åŒ–å®æˆ˜ç¬”è®°" scheme="http://blog.3amupupup.online/tags/linux%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€æ¬¡æµ·å¤–k8sé›†ç¾¤ä»£ç å‘å¸ƒå®è·µ</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E4%B8%80%E6%AC%A1%E6%B5%B7%E5%A4%96k8s%E9%9B%86%E7%BE%A4%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83%E5%AE%9E%E8%B7%B5/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E4%B8%80%E6%AC%A1%E6%B5%B7%E5%A4%96k8s%E9%9B%86%E7%BE%A4%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83%E5%AE%9E%E8%B7%B5/</id>
    <published>2021-03-18T03:09:52.074Z</published>
    <updated>2021-03-18T03:09:52.074Z</updated>
    
    <content type="html"><![CDATA[<p>é¡¹ç›®èƒŒæ™¯ï¼šè¦ä¸Šä¸€ä¸ªæµ·å¤–ç‰ˆçš„å°è¯´å¹³å°ï¼Œgitlabåœ¨å›½å†…ï¼Œå½“å‰æ˜¯è¦æ±‚åœ¨æµ·å¤–æ­å»ºä¸€ä¸ªæµ‹è¯•ç¯å¢ƒ(phpä»£ç )</p><h3 id="ç¬¬ä¸€é˜¶æ®µï¼š"><a href="#ç¬¬ä¸€é˜¶æ®µï¼š" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼š"></a>ç¬¬ä¸€é˜¶æ®µï¼š</h3><p>è¯ä¸å¤šè¯´ï¼Œåœ¨é¦™æ¸¯ä¹°äº†å°æœºå™¨ï¼Œdownäº†ä¸ªoneinstackè„šæœ¬è£…ç¯å¢ƒï¼Œç¯å¢ƒå…·ä½“ä¸ºmysql+redis+php-fpm7.1.3+nginxã€‚</p><p>jenkins+gitlabéƒ½æ˜¯åœ¨å›½å†…ï¼Œä¹Ÿæ²¡å¤šæƒ³ç›´æ¥åœ¨jenkinsåˆ›å»ºäº†ä¸€ä¸ªå·¥ç¨‹ï¼Œä½¿ç”¨ssh-serveræ’ä»¶å°†æ„å»ºå¥½çš„ä»£ç pushåˆ°é¦™æ¸¯æœºå™¨ã€‚é—®é¢˜æ¥äº†ï¼Œå› ä¸ºæœºå™¨æ˜¯åœ¨é¦™æ¸¯ï¼Œåœ¨jenkins pushä»£ç çš„æ—¶å€™å·¨æ…¢æ— æ¯”ï¼Œæ¯ä¸€æ¬¡å‘å¸ƒèµ·ç èŠ±è´¹ååˆ†é’Ÿä»¥ä¸Šçš„æ—¶é—´ï¼Œä¸¥é‡å½±å“å¼€å‘æ•ˆç‡ã€‚</p><h3 id="ç¬¬äºŒé˜¶æ®µï¼š"><a href="#ç¬¬äºŒé˜¶æ®µï¼š" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼š"></a>ç¬¬äºŒé˜¶æ®µï¼š</h3><p>æƒ³åˆ°äº†ç”¨å®¹å™¨çš„æ–¹å¼å‘å¸ƒï¼Œæ€è·¯æ˜¯è¿™æ ·ï¼šåœ¨æ­å·æœºå™¨ä¸Šå°†é•œåƒæ„å»ºå¥½ï¼Œç„¶åpushåˆ°é¦™æ¸¯ä»“åº“å»ï¼Œå› ä¸ºé•œåƒpushçš„æ—¶å€™ä¼šè¿›è¡Œå‹ç¼©ï¼Œå¦å¤–pushåˆ°é¦™æ¸¯ä»“åº“ä¹‹åé‚£è¾¹æœºå™¨æ‹‰å–ä»£ç çš„é€Ÿåº¦ä¼šå¤§å¤§æå‡ï¼Œç¼©çŸ­äº†å‘å¸ƒæ—¶é—´ï¼ˆè¿™æ˜¯ä¸ºä»¥åç”Ÿäº§å‘å¸ƒåšè€ƒè™‘ï¼Œä»£ç åŒæ­¥æ…¢ï¼Œæœ‰äº›æ–‡ä»¶æ›´æ–°æœ‰äº›æ–‡ä»¶æ²¡æ›´æ–°å¯èƒ½ä¼šé€ æˆçº¿ä¸ŠæŠ¥é”™çš„ï¼‰ã€‚äºæ˜¯å¼€å§‹æ„å»ºåŸºç¡€é•œåƒï¼Œç¼–å†™<a href="http://127.0.0.1:4000/2020/07/28/Dockerfile/" target="_blank" rel="noopener">Dockerfile</a>ã€‚</p><p>ç¼–å†™dockerfileï¼šâ‘ ä¿è¯é•œåƒç²¾ç®€ â‘¡å°½é‡å‡å°‘é•œåƒçš„å±‚æ•°ï¼Œå°†åº•å±‚ç¯å¢ƒå›ºå®šã€‚</p><p>nginxå’Œphp-fpmåŸºç¡€é•œåƒæ„å»ºå®Œæˆåä½¿ç”¨jenkinsè¿›è¡Œæ‰“åŒ…ä»£ç åˆ°é•œåƒé‡Œï¼Œä½¿ç”¨çš„pipelineè„šæœ¬ã€‚</p><p>ç¬¬äºŒé˜¶æ®µä½¿ç”¨çš„æ˜¯docker composeï¼Œå› æ­¤æ¯ä¸€æ¬¡æ›´æ–°éƒ½éœ€è¦ç™»å½•é¦™æ¸¯æœºå™¨æ‰‹åŠ¨æ‹‰å–å¹¶æ›´æ–°é•œåƒï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥å¾ˆå¿«å°±æ”¾å¼ƒäº†è¿™ç§æ–¹å¼</p><h3 id="ç¬¬ä¸‰é˜¶æ®µï¼š"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼š" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼š"></a>ç¬¬ä¸‰é˜¶æ®µï¼š</h3><p>è€ƒè™‘ä½¿ç”¨k8sï¼Œäºæ˜¯åœ¨é¦™æ¸¯ä¹°äº†ä¸ªk8sé›†ç¾¤ï¼Œä¸¤ä¸ª2c4gçš„èŠ‚ç‚¹ï¼Œå¤–åŠ ä¸€å°2c4gçš„æœºå™¨ä½œä¸ºæ•°æ®åº“æœºå™¨ï¼ˆredis+mysqlï¼‰ï¼Œåç»­æ­£å¼ä¸Šçº¿ä¹‹åå†è€ƒè™‘æ‰©å®¹ã€‚</p><p>é—®é¢˜ï¼š</p><p>â€‹    1ã€nginxå®¹å™¨å’Œphp-fpmå®¹å™¨éœ€è¦å…±äº«ä»£ç æ‰èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚</p><p>â€‹    è§£å†³ï¼šé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ¯æ¬¡å‘å¸ƒæ„å»ºä¸¤ä¸ªé•œåƒï¼Œå³å°†ä»£ç åˆ†åˆ«æ‹·è´è¿›nginxå’Œphpå®¹å™¨ï¼Œç„¶åé€šè¿‡deploymentå»è¿è¡Œï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å¤ªéº»çƒ¦ï¼Œå› ä¸ºæ²¡æ¬¡éƒ½éœ€è¦é‡æ–°æ›´æ–°phpå’Œnginxå®¹å™¨ï¼Œè¿™ä¸¤ä¸ªé•œåƒçš„ä½“ç§¯åŠ èµ·æ¥å·®ä¸å¤šæœ‰800Mäº†ï¼Œæ‰€ä»¥ä¸è€ƒè™‘è¿™ç§æ–¹å¼ã€‚</p><p>â€‹                äºæ˜¯ä½¿ç”¨äº†deploymentæ§åˆ¶å™¨ä¸­çš„volume â€”- emptydirå…±äº«å·ï¼Œä»£ç ä½¿ç”¨ä¸€ä¸ªinitcontaineræ‹·è´è¿›å»ã€‚è¿™æ ·çš„è¯æˆ‘æ¯æ¬¡åªéœ€è¦æ›´æ–°initcontainer(initcontainerä¸éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Œä½¿ç”¨çš„busyboxï¼ŒåŸºç¡€é•œåƒæ‰å‡ Mï¼ŒåŠ ä¸Šä»£ç ä¹Ÿå°±30Må·¦å³ï¼Œè¿™æ ·çš„è¯å¤§å¤§æé«˜äº†é•œåƒæ„å»ºã€æ¨é€ã€æ‹‰å–çš„é€Ÿåº¦)ã€‚</p><p>ä½¿ç”¨pipelineæ„å»ºä»£ç å®¹å™¨ï¼š</p><pre><code class="yaml">pipeline {   agent any   stages {      stage(&#39;pull code&#39;) {         steps {            checkout([$class: &#39;GitSCM&#39;, branches: [[name: &#39;*/test&#39;]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: &#39;11&#39;, url: &#39;http://xxxxx.xxxxxxx.com/xxxxx/xxxxxxx_api.git&#39;]]])         }      }      stage(&#39;build image&#39;){          steps {              sh &#39;wget http://172.16.72.173/leshuapi/.dockerignore -O .dockerignore&#39;              sh &#39;wget http://172.16.72.173/leshuapi/Dockerfile -O Dockerfile&#39;              sh &#39;sudo docker build -t registry.cn-hongkong.aliyuncs.com/ysg_codebox/$JOB_BASE_NAME:latest .&#39;          }      }      stage(&#39;push image&#39;){          steps {              timeout(time: 3, unit: &#39;MINUTES&#39;){                  retry(5) {                      sh &#39;docker push registry.cn-hongkong.aliyuncs.com/ysg_codebox/$JOB_BASE_NAME:latest&#39;                  }              }          }      }   }}</code></pre><p>deployment.yamlå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="yaml">---apiVersion: extensions/v1beta1kind: Deploymentmetadata:  name: leshuapispec:  replicas: 2  template:    metadata:      labels:        app: leshuapp    spec:      dnsPolicy: Default      shareProcessNamespace: true      imagePullSecrets:        - name: regsecret      initContainers:      - name: copycode        #ä»£ç å®¹å™¨        image: registry.cn-hongkong.aliyuncs.com/ysg_codebox/xxxxxxxxx:latest        imagePullPolicy: Always        command: [&quot;mv&quot;,&quot;/data/wwwroot/&quot;,&quot;/data/www/&quot;]        volumeMounts:        - name: www          mountPath: /data/www      - name: chown        image: registry.cn-hongkong.aliyuncs.com/ysg_baseimage/xxxxbox:v2        imagePullPolicy: IfNotPresent        command: [&quot;chown&quot;,&quot;-R&quot;,&quot;www.www&quot;,&quot;/data/www/&quot;]        volumeMounts:        - name: www          mountPath: /data/www      containers:        - name: nginx          image: registry.cn-hongkong.aliyuncs.com/ysg_baseimage/nginx:v3          imagePullPolicy: IfNotPresent          securityContext:            capabilities:              add:              - SYS_PTRACE          stdin: true          tty: true          resources:            requests:              memory: 200Mi              cpu: 100m            limits:              memory: 300Mi              cpu: 200m          ports:            - containerPort: 80          livenessProbe:            tcpSocket:              port: 80          command: [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]          volumeMounts:            - name: www              mountPath: /data/www            - name: logs              mountPath: /data/logs/            - name: nginx-conf              mountPath: /etc/nginx/conf.d/            - name: env              mountPath: /data/www/wwwroot/env/        - name: php-fpm          image: registry.cn-hongkong.aliyuncs.com/ysg_baseimage/php-fpm:v2          imagePullPolicy: IfNotPresent          securityContext:            capabilities:              add:              - SYS_PTRACE          stdin: true          tty: true          resources:            requests:              memory: 200Mi              cpu: 100m            limits:            memory: 300Mi              cpu: 200m          ports:            - containerPort: 9000          livenessProbe:            tcpSocket:              port: 9000          command: [&quot;/usr/local/php/sbin/php-fpm&quot;,&quot;-F&quot;]          volumeMounts:            - name: www              mountPath: /data/www            - name: logs              mountPath: /data/logs/            - name: phpfpm-conf              mountPath: /usr/local/php/etc/php-fpm.d/            - name: env              mountPath: /data/www/wwwroot/env/      volumes:      - name: www        emptyDir: {}      - name: logs        emptyDir: {}      - name: nginx-conf        configMap:          name: leshuapi-nginx-conf          items:           - key: server.conf             path: server.conf      - name: phpfpm-conf        configMap:          name: leshuapi-phpfpm-conf          items:           - key: www.conf             path: www.conf      - name: env        configMap:          name: leshuapi-env          items:           - key: .env             path: .env---apiVersion: v1kind: Servicemetadata:  name: leshuapiservicespec:  ports:  - protocol: TCP    port: 80    targetPort: 80  selector:    app: leshuapp</code></pre><p>é•œåƒé‡Œçš„é¡¹ç›®é…ç½®æ–‡ä»¶ã€nginxé…ç½®æ–‡ä»¶ã€php-fpmçš„é…ç½®æ–‡ä»¶å…¨éƒ¨é€šè¿‡configmapæŒ‚è½½å‡ºæ¥æ–¹ä¾¿ä¿®æ”¹ï¼Œå…·ä½“yamlçœç•¥ã€‚</p><p>é…ç½®æ–‡ä»¶ç»“æ„ï¼š</p><p><img src="/image/image-20201016181209870.png" alt="image-20201016181209870"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é¡¹ç›®èƒŒæ™¯ï¼šè¦ä¸Šä¸€ä¸ªæµ·å¤–ç‰ˆçš„å°è¯´å¹³å°ï¼Œgitlabåœ¨å›½å†…ï¼Œå½“å‰æ˜¯è¦æ±‚åœ¨æµ·å¤–æ­å»ºä¸€ä¸ªæµ‹è¯•ç¯å¢ƒ(phpä»£ç )&lt;/p&gt;
&lt;h3 id=&quot;ç¬¬ä¸€é˜¶æ®µï¼š&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€é˜¶æ®µï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€é˜¶æ®µï¼š&quot;&gt;&lt;/a&gt;ç¬¬ä¸€é˜¶æ®µï¼š&lt;/h3&gt;&lt;p</summary>
      
    
    
    
    <category term="k8s" scheme="http://blog.3amupupup.online/categories/k8s/"/>
    
    
    <category term="cicd" scheme="http://blog.3amupupup.online/tags/cicd/"/>
    
  </entry>
  
  <entry>
    <title>äºŒå‰æ ‘</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E4%BA%8C%E5%8F%89%E6%A0%91/</id>
    <published>2021-03-18T03:09:52.073Z</published>
    <updated>2021-03-18T03:09:52.073Z</updated>
    
    <content type="html"><![CDATA[<h6 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h6><ol><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/FullBinaryTree.png" alt="æ»¡äºŒå‰æ ‘"></p><p><img src="http://img.3amupupup.online/wanquanBinaryTree.png" alt="å®Œå…¨äºŒå‰æ ‘"></p></li><li><p>æ€§è´¨</p><ol><li>ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå¦‚æœæ¯ä¸€å±‚çš„ç»“ç‚¹ä¸ªæ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼åˆ™å°±æ˜¯æ»¡äºŒå‰æ ‘ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ·±åº¦ä¸ºkçš„äºŒå‰æ ‘ï¼Œå¦‚æœç»“ç‚¹æ€»æ•°æ˜¯(2^k)-1åˆ™æ˜¯æ»¡äºŒå‰æ ‘ã€‚</li><li>å‰k-1å±‚ç»“ç‚¹ä¸ªæ•°éƒ½æ˜¯æ»¡çš„(è¾¾åˆ°æœ€å¤§ä¸ªæ•°)ï¼Œæœ€åä¸€å±‚å¯ä»¥ä¸æ»¡ï¼Œä½†æ˜¯å¿…é¡»ä»å·¦åˆ°å³è¿ç»­ï¼Œç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚(æ»¡äºŒå‰æ ‘æ˜¯ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘)</li><li>è‹¥è§„å®šæ ¹ç»“ç‚¹çš„å±‚æ•°ä¸º1ï¼Œåˆ™ä¸€æ£µéç©ºäºŒå‰æ ‘çš„ç¬¬iå±‚è‡³å¤šæœ‰2^(i-1)ä¸ªç»“ç‚¹ã€‚</li><li>ä»»ä½•ä¸€é¢—äºŒå‰æ ‘ï¼Œåº¦ä¸º0çš„ç»“ç‚¹ä¸ªæ•°æ¯”åº¦ä¸º2çš„ç»“ç‚¹ä¸ªæ•°å¤š1ã€‚</li><li>å¯¹äºæœ‰Nä¸ªç»“ç‚¹çš„æ»¡äºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘çš„é«˜åº¦ h=log<sub>2</sub><sup>N+1</sup>ã€‚</li><li>å¯¹äºæœ‰Nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘çš„é«˜åº¦ h=log<sub>2</sub><sup>N</sup>+1ã€‚</li></ol></li></ol><h6 id="äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ã€‚"><a href="#äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ã€‚" class="headerlink" title="äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ã€‚"></a>äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ã€‚</h6><ol><li><p>ç¤ºæ„å›¾</p><p><img src="http://img.3amupupup.online/BinaryTreeStorageInArray1.png" alt="image-20210125135822359"></p></li><li><p>çˆ¶äº²ç»“ç‚¹ä¸‹æ ‡æ˜¯iï¼Œåˆ™å·¦å­©å­ç»“ç‚¹ä¸‹æ ‡ä¸º2*i+1ã€å³å­©å­ç»“ç‚¹ä¸‹æ ‡</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h6 id=&quot;äºŒå‰æ ‘&quot;&gt;&lt;a href=&quot;#äºŒå‰æ ‘&quot; class=&quot;headerlink&quot; title=&quot;äºŒå‰æ ‘&quot;&gt;&lt;/a&gt;äºŒå‰æ ‘&lt;/h6&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;ç¤ºæ„å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://img.3amupupup.online/FullBina</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>sonar</title>
    <link href="http://blog.3amupupup.online/2021/03/18/sonar/"/>
    <id>http://blog.3amupupup.online/2021/03/18/sonar/</id>
    <published>2021-03-18T03:09:52.072Z</published>
    <updated>2021-03-18T03:09:52.073Z</updated>
    
    <content type="html"><![CDATA[<pre><code>gitlabBranchgitlabSourceBranchgitlabActionTypegitlabUserNamegitlabUserUsernamegitlabUserEmailgitlabSourceRepoHomepagegitlabSourceRepoNamegitlabSourceNamespacegitlabSourceRepoURLgitlabSourceRepoSshUrlgitlabSourceRepoHttpUrlgitlabMergeRequestTitlegitlabMergeRequestDescriptiongitlabMergeRequestIdgitlabMergeRequestIidgitlabMergeRequestStategitlabMergedByUsergitlabMergeRequestAssigneegitlabMergeRequestLastCommitgitlabMergeRequestTargetProjectIdgitlabTargetBranchgitlabTargetRepoNamegitlabTargetNamespacegitlabTargetRepoSshUrlgitlabTargetRepoHttpUrlgitlabBeforegitlabAftergitlabTriggerPhrase</code></pre><pre><code class="java">pipeline {   agent any   stages {      stage(&#39;pull code&#39;) {         steps {            checkout([$class: &#39;GitSCM&#39;, branches: [[name: &#39;*/release.test&#39;]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: &#39;11&#39;, url: &#39;http://xxxx.xxxxxx.com:8888/xxxx/xxxxxx.git&#39;]]])         }      }      stage(&#39;SonarQube&#39;) {            steps{                sh &quot;sonar-scanner -X -Dsonar.host.url=http://172.16.72.182:8888/ -Dsonar.language=php -Dsonar.projectVersion=$BUILD_NUMBER -Dsonar.sources=./app -Dsonar.sourceEncoding=UTF-8  -Dsonar.projectName=$JOB_BASE_NAME -Dsonar.projectKey=$JOB_BASE_NAME -Dsonar.login=a65d0c254cfxx2ax013bcxe93xb8xg13f25b2407&quot;         }      }  }}</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;pre&gt;&lt;code&gt;gitlabBranch
gitlabSourceBranch
gitlabActionType
gitlabUserName
gitlabUserUsername
gitlabUserEmail
gitlabSourceRepoHomepage
gitla</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2021-03-18T03:09:52.072Z</published>
    <updated>2021-03-18T03:09:52.072Z</updated>
    
    <content type="html"><![CDATA[<p>è®¡ç®—æœºç½‘ç»œ</p><h5 id="ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š"><a href="#ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š" class="headerlink" title="ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š"></a>ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š</h5><table><thead><tr><th>äº¤æ¢æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>ç”µè·¯äº¤æ¢</td><td>é€šä¿¡æ—¶å»¶å°(æ¯”ç‰¹æµç›´è¾¾ç»ˆç‚¹)<br />æœ‰åºä¼ è¾“<br />æ²¡æœ‰å†²çª<br />ä½¿ç”¨èŒƒå›´å¹¿(æ¨¡æ‹Ÿä¿¡å·ã€æ•°å­—ä¿¡å·)<br />å®æ—¶æ€§å¼º<br />æ§åˆ¶ç®€å•</td><td>å»ºç«‹è¿æ¥æ—¶é—´é•¿<br />çº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½<br />çµæ´»æ€§å·®<br />éš¾ä»¥è§„æ ¼åŒ–</td></tr><tr><td>æŠ¥æ–‡äº¤æ¢</td><td>æ— éœ€å»ºç«‹è¿æ¥(ä¸éœ€è¦ä¸ºé€šä¿¡åŒæ–¹äº‹å…ˆå»ºç«‹ä¸€æ¡ä¸“ç”¨çš„é€šä¿¡çº¿è·¯ï¼Œä¸å­˜åœ¨å»ºç«‹è¿æ¥çš„æ—¶å»¶ã€‚)<br />åŠ¨æ€åˆ†é…çº¿è·¯<br />æé«˜çº¿è·¯å¯é æ€§<br />æé«˜çº¿è·¯åˆ©ç”¨ç‡<br />æä¾›å¤šç›®æ ‡æœåŠ¡</td><td>å¼•èµ·äº†è½¬å‘æ—¶å»¶<br />éœ€è¦è¾ƒå¤§çš„å­˜å‚¨ç¼“å­˜ç©ºé—´<br />éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡(æŠ¥å¤´è¦æºå¸¦ç›®æ ‡åœ°å€ã€æºåœ°å€ç­‰ä¿¡æ¯)<br /></td></tr><tr><td>åˆ†ç»„äº¤æ¢</td><td>æ— éœ€å»ºç«‹è¿æ¥<br />çº¿è·¯åˆ©ç”¨ç‡é«˜<br />ç®€åŒ–äº†å­˜å‚¨ç®¡ç†<br />åŠ é€Ÿä¼ è¾“<br />å‡å°‘å‡ºé”™æ¦‚ç‡å’Œé‡ä¼ æ•°æ®é‡</td><td>å¼•èµ·äº†è½¬å‘æ—¶å»¶<br />éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡<br />å¯¹äºæ•°æ®æŠ¥æœåŠ¡ï¼Œå­˜åœ¨å¤±åºã€ä¸¢å¤±æˆ–é‡å¤åˆ†ç»„çš„é—®é¢˜ï¼›å¯¹äºè™šç”µè·¯æœåŠ¡ï¼Œå­˜åœ¨å‘¼å«å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œè™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹</td></tr></tbody></table><h5 id="è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»"><a href="#è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»" class="headerlink" title="è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»"></a>è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»</h5>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è®¡ç®—æœºç½‘ç»œ&lt;/p&gt;
&lt;h5 id=&quot;ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š&quot;&gt;&lt;a href=&quot;#ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š&quot;&gt;&lt;/a&gt;ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;äº¤æ¢æ–¹å¼&lt;/th&gt;
&lt;th&gt;ä¼˜</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/</id>
    <published>2021-03-18T03:09:52.071Z</published>
    <updated>2021-03-18T03:09:52.072Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜"><a href="#ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜" class="headerlink" title="ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜"></a>ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜</h3><h6 id="1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ</h6><p>è™šæ‹Ÿå†…å­˜æ˜¯ç£ç›˜ä¸Š(è¾ƒä½å±‚)è¿ç»­Nä¸ªå­—èŠ‚ç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸ªå­—èŠ‚éƒ½æœ‰å”¯ä¸€çš„è™šæ‹Ÿåœ°å€ä½œä¸ºæ•°ç»„çš„ç´¢å¼•ï¼Œç£ç›˜ä¸Šæ•°ç»„çš„å†…å®¹è¢«ç¼“å­˜åœ¨ä¸»å­˜ä¸­ã€‚(è™šæ‹Ÿé¡µå­˜åœ¨äºç£ç›˜ä¸Š)</p><p>ç‰©ç†å†…å­˜è¢«åˆ†éš”æˆç‰©ç†é¡µ(Physical Page,PP)ã€‚</p><p>VMç³»ç»Ÿå°†è™šæ‹Ÿå†…å­˜åˆ†éš”æˆè™šæ‹Ÿé¡µ(Virtual Page,VP)ï¼Œè™šæ‹Ÿé¡µé¢çš„é›†åˆåˆ†ä¸ºä¸‰ä¸ªä¸ç›¸äº¤çš„å­é›†ï¼š</p><ol><li>æœªåˆ†é…çš„(VMç³»ç»Ÿè¿˜æœªåˆ†é…æˆ–è€…æœªåˆ›å»ºçš„é¡µï¼Œæœªåˆ†é…çš„å—æ²¡æœ‰ä»»ä½•æ•°æ®å’Œä»–ä»¬ç›¸å…³è”ï¼Œå› ä¸ºä¸å ç”¨ä»»ä½•ç£ç›˜ç©ºé—´)ã€‚</li><li>ç¼“å­˜çš„(å·²ç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­çš„å·²åˆ†é…é¡µ)ã€‚</li><li>æœªç¼“å­˜çš„(æœªç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­çš„å·²åˆ†é…é¡µ)ã€‚</li></ol><h6 id="2ã€DRAMç¼“å­˜ç»„ç»‡ç»“æ„"><a href="#2ã€DRAMç¼“å­˜ç»„ç»‡ç»“æ„" class="headerlink" title="2ã€DRAMç¼“å­˜ç»„ç»‡ç»“æ„"></a>2ã€DRAMç¼“å­˜ç»„ç»‡ç»“æ„</h6><ul><li>SRAMï¼šè¡¨ç¤ºä½äºcpuå’Œä¸»å­˜ä¹‹é—´çš„L1ã€L2ã€L3é«˜é€Ÿç¼“å­˜ã€‚</li><li>DRAMï¼šè¡¨ç¤ºè™šæ‹Ÿå†…å­˜ç³»ç»Ÿçš„ç¼“å­˜ï¼Œå®ƒåœ¨ä¸»å­˜ä¸­ç¼“å­˜è™šæ‹Ÿé¡µã€‚</li><li>ç›´   å†™ï¼šå½“ CPU è¦å°†æ•°æ®å†™å…¥å†…å­˜æ—¶ é™¤äº†æ›´æ–°ç¼“å†²å†…å­˜(é«˜é€Ÿç¼“å­˜L1ã€L2ã€L3)ä¸Šçš„æ•°æ®å¤–ä¹Ÿå°†æ•°æ®å†™åœ¨ DRAM ä¸­ ä»¥ç»´æŒä¸»å­˜ä¸ç¼“å†²å†…å­˜çš„ä¸€è‡´æ€§ å½“è¦å†™å…¥å†…å­˜çš„æ•°æ®ä¸€å¤š é€Ÿåº¦è‡ªç„¶å°±æ…¢äº†ä¸‹æ¥ </li><li>å›   å†™ï¼šæ¯å½“ CPU è¦å°†æ•°æ®å†™å…¥å†…å­˜æ—¶ åªä¼šå…ˆæ›´æ–°ç¼“å†²å†…å­˜(é«˜é€Ÿç¼“å­˜L1ã€L2ã€L3)ä¸Šçš„æ•°æ® éšåå†è®©ç¼“å†²å†…å­˜åœ¨æ€»çº¿ä¸å¡è½¦çš„æ—¶å€™ æ‰æŠŠæ•°æ®å†™å› DRAM æ‰€ä»¥é€Ÿåº¦è‡ªç„¶å¿«å¾—å¤š</li></ul><h6 id="3ã€é¡µè¡¨"><a href="#3ã€é¡µè¡¨" class="headerlink" title="3ã€é¡µè¡¨"></a>3ã€é¡µè¡¨</h6><p>è™šæ‹Ÿå†…å­˜å¿…é¡»æœ‰æŸç§æ–¹æ³•æ¥åˆ¤å®šä¸€ä¸ªè™šæ‹Ÿé¡µæ˜¯å¦ç¼“å­˜åœ¨DRAMä¸­çš„æŸä¸ªåœ°æ–¹ã€‚å¦‚æœæ˜¯ï¼Œç³»ç»Ÿè¿˜å¿…é¡»ç¡®å®šè¿™ä¸ªè™šæ‹Ÿé¡µå­˜æ”¾åœ¨å“ªä¸ªç‰©ç†é¡µ(ä¸»å­˜)ã€‚å¦‚æœä¸å‘½ä¸­è¿˜å¿…é¡»åˆ¤æ–­è¿™ä¸ªè™šæ‹Ÿé¡µå­˜æ”¾åœ¨ç£ç›˜çš„å“ªä¸ªä½ç½®ä¸Šï¼Œåœ¨ç‰©ç†é¡µä¸­é€‰æ‹©ä¸€ä¸ªç‰ºç‰²é¡µï¼Œå¹¶å°†è™šæ‹Ÿé¡µä»ç£ç›˜å¤åˆ¶åˆ°DRAMä¸­ï¼Œæ›¿æ¢è¿™ä¸ªç‰ºç‰²é¡µã€‚(æ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çš„é¡µè¡¨)</p><p>é¡µè¡¨ï¼šå°†è™šæ‹Ÿé¡µæ˜ å°„åˆ°ç‰©ç†é¡µã€‚æ¯æ¬¡åœ°å€ç¿»è¯‘ç¡¬ä»¶å°†ä¸€ä¸ªè™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€æ—¶ï¼Œéƒ½ä¼šè¯»å–é¡µè¡¨ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£ç»´æŠ¤é¡µè¡¨çš„å†…å®¹ï¼Œä»¥åŠåœ¨ç£ç›˜ä¸DRAMä¹‹é—´æ¥å›ä¼ é€é¡µã€‚</p><p><img src="/image/image-20201020134441586.png" alt="image-20201020134441586"></p><p>æˆ‘ä»¬å°†å‡è®¾æ¯ä¸ªPTEæ˜¯ç”±ä¸€ä¸ªæœ‰æ•ˆä½(valid bit)å’Œä¸€ä¸ªnä½åœ°å€å­—æ®µç»„æˆï¼Œæœ‰æ•ˆä½è¡¨æ˜äº†è¯¥è™šæ‹Ÿé¡µå½“å‰æ˜¯å¦è¢«ç¼“å­˜åœ¨DRAMä¸­ã€‚å¦‚æœè®¾ç½®äº†æœ‰æ•ˆä½ï¼Œé‚£ä¹ˆåœ°å€å­—æ®µå°±è¡¨ç¤ºDRAMä¸­ç›¸åº”çš„ç‰©ç†é¡µçš„èµ·å§‹ä½ç½®ï¼Œè¿™ä¸ªç‰©ç†é¡µä¸­ç¼“å­˜äº†è¯¥è™šæ‹Ÿé¡µã€‚ å¦‚æœæ²¡æœ‰è®¾ç½®æœ‰æ•ˆä½ï¼Œé‚£ä¹ˆä¸€ä¸ªç©ºåœ°å€è¡¨ç¤ºè¿™ä¸ªè™šæ‹Ÿé¡µè¿˜æœªè¢«åˆ†é…ã€‚å¦åˆ™ï¼Œè¿™ä¸ªåœ°å€å°±æŒ‡å‘è¯¥è™šæ‹Ÿé¡µåœ¨ç£ç›˜ä¸Šçš„èµ·å§‹ä½ç½®ã€‚</p><h6 id="4ã€ç¼ºé¡µ"><a href="#4ã€ç¼ºé¡µ" class="headerlink" title="4ã€ç¼ºé¡µ"></a>4ã€ç¼ºé¡µ</h6><p>DRAMç¼“å­˜ä¸å‘½ä¸­ç§°ä¸ºç¼ºé¡µã€‚</p><p>è‡ªå·±çš„ç†è§£ï¼šåœ¨cpuè·å–è™šæ‹Ÿé¡µä¸­çš„æ•°æ®æ—¶ï¼Œåœ°å€ç¿»è¯‘ç¡¬ä»¶å»è¯»é¡µè¡¨çš„é¡µè¡¨è®°å½•çš„æœ‰æ•ˆä½ï¼Œå¦‚æœæœ‰æ•ˆä½ä¸º0åˆ™æ¨æ–­å‡ºè¯¥è™šæ‹Ÿé¡µæœªè¢«ç¼“å­˜ï¼Œå¹¶ä¸”è§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ã€‚ç¼ºé¡µå¼‚å¸¸è°ƒç”¨å†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè¯¥ç¨‹åºä¼šåœ¨ä¸»å­˜çš„PP(ç‰©ç†é¡µ)ä¸­é€‰æ‹©ä¸€ä¸ªè¢«ç¼“å­˜çš„VPä½œä¸ºç‰ºç‰²é¡µï¼Œæ¥ä¸‹æ¥å°†è¦ç¼“å­˜çš„vpä»ç£ç›˜ä¸­åŠ è½½å‡ºæ¥ç¼“å­˜åˆ°ä¸»å­˜ä¸Šå»(æ›¿æ¢ç‰ºç‰²é¡µ)ã€‚</p><p><img src="/image/image-20201020140133328.png" alt="image-20201020140133328"></p><h6 id="5ã€åœ°å€ç¿»è¯‘"><a href="#5ã€åœ°å€ç¿»è¯‘" class="headerlink" title="5ã€åœ°å€ç¿»è¯‘"></a>5ã€åœ°å€ç¿»è¯‘</h6><p>å½“é¡µé¢å‘½ä¸­æ—¶ï¼ŒCPUç¡¬ä»¶æ‰§è¡Œçš„æ­¥éª¤ï¼š</p><ol><li>å¤„ç†å™¨ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™MMUã€‚</li><li>MMUç”ŸæˆPTEåœ°å€ï¼Œå¹¶ä»é«˜é€Ÿç¼“å­˜/ä¸»å­˜è¯·æ±‚å¾—åˆ°å®ƒã€‚</li><li>é«˜é€Ÿç¼“å­˜/ä¸»å­˜å‘MMUè¿”å›PTEã€‚</li><li>MMUæ„é€ ç‰©ç†åœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ ç»™å‘Šè¯‰ç¼“å­˜/ä¸»å­˜ã€‚</li><li>é«˜é€Ÿç¼“å­˜/ä¸»å­˜è¿”å›æ‰€è¯·æ±‚çš„æ•°æ®å­—ç»™å¤„ç†å™¨ã€‚</li></ol><p><img src="/image/image-20201020145055727.png" alt="image-20201020145055727"></p><p>ç¼ºé¡µï¼ŒCPUç¡¬ä»¶æ‰§è¡Œæ­¥éª¤ï¼š</p><ol><li>å¤„ç†å™¨ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™MMUã€‚</li><li>MMUç”ŸæˆPTEåœ°å€ï¼Œå¹¶ä»é«˜é€Ÿç¼“å­˜/ä¸»å­˜è¯·æ±‚å¾—åˆ°å®ƒã€‚</li><li>é«˜é€Ÿç¼“å­˜/ä¸»å­˜å‘MMUè¿”å›PTEã€‚</li><li>PTEä¸­çš„æœ‰æ•ˆä¸ºæ˜¯0ï¼Œæ‰€ä»¥MMUè§¦å‘äº†ä¸€æ¬¡å¼‚å¸¸ï¼Œä¼ é€’CPUä¸­çš„æ§åˆ¶åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºã€‚</li><li>ç¼ºé¡µå¤„ç†ç¨‹åºç¡®å®šå‡ºç‰©ç†å†…å­˜ä¸­çš„ç‰ºç‰²é¡µï¼Œå¦‚æœè¿™ä¸ªé¡µé¢ä¿®æ”¹äº†åˆ™æŠŠå®ƒæ¢å‡ºåˆ°ç£ç›˜ã€‚</li><li>ç¼ºé¡µå¤„ç†ç¨‹åºé¡µé¢è°ƒå…¥æ–°çš„é¡µé¢ï¼Œå¹¶æ›´æ–°å†…å­˜ä¸­çš„PTEã€‚</li><li>ç¼ºé¡µå¤„ç†ç¨‹åºè¿”å›åˆ°åŸæ¥çš„è¿›ç¨‹ï¼Œå†æ¬¡æ‰§è¡Œå¯¼è‡´ç¼ºé¡µçš„æŒ‡ä»¤ï¼ŒCPUå°†å¼•èµ·ç¼ºé¡µçš„è™šæ‹Ÿåœ°å€é‡æ–°å‘é€ç»™MMUã€‚</li></ol><p><img src="/image/image-20201020145822292.png" alt="image-20201020145822292"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜&quot;&gt;&lt;a href=&quot;#ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜&quot;&gt;&lt;/a&gt;ç¬¬ä¹ç« ï¼šè™šæ‹Ÿå†…å­˜&lt;/h3&gt;&lt;h6 id=&quot;1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ&quot;&gt;&lt;a href=&quot;#1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ&quot; class=&quot;</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="è™šæ‹Ÿå†…å­˜" scheme="http://blog.3amupupup.online/tags/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>æ±‡ç¼–ç¬”è®°</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/</id>
    <published>2021-03-18T03:09:52.070Z</published>
    <updated>2021-03-18T03:09:52.071Z</updated>
    
    <content type="html"><![CDATA[<p>AX = AH + AL</p><p>BX = BH + BL</p><p>CX = CH + CL</p><p>DX = DH + DL</p><p>æ•°æ®å¯„å­˜å™¨</p><p>æ®µåœ°å€å¯„å­˜å™¨ï¼šåç§»åœ°å€å¯„å­˜å™¨</p><p>DS    SP</p><p>ES    BP</p><p>SS    SI</p><p>CS    DI</p><p>â€‹         IP(å’ŒæŒ‡ä»¤æœ‰å…³)</p><p>â€‹         BX</p><p>uæŒ‡ä»¤ï¼šå°†å†…å­˜æŸä¸ªåœ°å€å¼€å§‹çš„å­—èŠ‚å…¨éƒ¨å½“åšæŒ‡ä»¤</p><p>dæŒ‡ä»¤ï¼šå°†æŸä¸ªå†…å­˜åœ°å€å¼€å§‹çš„å­—èŠ‚å…¨éƒ¨å½“åšæ•°æ®</p><p>æŒ‡ä»¤å’Œæ•°æ®åœ¨å†…å­˜ä¸­æ˜¯æ²¡æœ‰åŒºåˆ«çš„</p><p>cpuä¸­çš„csæ®µåœ°å€å¯„å­˜å™¨å’Œipè¿™ä¸ªåç§»åœ°å€å¯„å­˜å™¨ç»„åˆçš„æ—¶å€™ï¼Œä»ä¸­è¯»å–çš„å†…å®¹å½“ä½œæŒ‡ä»¤æ¥æ‰§è¡Œ</p><p>æŒ‡ä»¤æ˜¯æœ‰é•¿åº¦çš„ï¼Œä¸€æ¡æŒ‡ä»¤å¯ä»¥ç”±å¤šä¸ªå­—èŠ‚æ„æˆ</p><p>æ‰§è¡Œè¿‡ç¨‹ï¼š</p><p>1ã€cpuä»cs:ipæ‰€æŒ‡å‘çš„å†…å­˜å•å…ƒè¯»å–æŒ‡ä»¤ï¼Œå­˜æ”¾åˆ°æŒ‡ä»¤ç¼“å­˜å™¨ä¸­</p><p>2ã€ip = ip+æ‰€è¯»æŒ‡ä»¤çš„é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤</p><p>3ã€æ‰§è¡ŒæŒ‡ä»¤ç¼“å­˜å™¨ä¸­çš„å†…å®¹ï¼Œæ¯åˆ°æ­¥éª¤1</p><p>æ±‡ç¼–æŒ‡ä»¤ jmp</p><p>è½¬ç§»æŒ‡ä»¤ï¼Œå¯ä»¥ä¿®æ”¹cså’Œipè¿™ä¸¤ä¸ªå¯„å­˜å™¨ å†³å®šäº†cpuä»å“ªé‡Œè¯»å–æŒ‡ä»¤</p><p>debugè°ƒè¯•å·¥å…·ï¼š</p><ul><li><p>rï¼šå¯ä»¥æŸ¥çœ‹å’Œæ”¹å˜å¯„å­˜å™¨ä¸­çš„å†…å®¹</p><p><img src="/Users/duwei/Desktop/source/image/image-20201102234009082.png" alt="image-20201102234009082"></p><p><img src="/Users/duwei/Desktop/source/image/image-20201102234134627.png" alt="image-20201102234134627"></p></li><li><p>dï¼šå¯ä»¥æŸ¥çœ‹å†…å­˜ä¸­çš„å†…å®¹</p><p><img src="/Users/duwei/Desktop/source/image/image-20201102234450730.png" alt="image-20201102234450730"></p></li></ul><ul><li><p>uï¼šå¯ä»¥å°†å†…å­˜ä¸­çš„æœºå™¨æŒ‡ä»¤ç¿»è¯‘æˆæ±‡ç¼–æŒ‡ä»¤ u:åœ°å€</p><p><img src="/Users/duwei/Desktop/source/image/image-20201102234935752.png" alt="image-20201102234935752"></p></li><li><p>aï¼šå‘å†…å­˜å†™å…¥ä¸€æ¡æ±‡ç¼–æŒ‡ä»¤</p><p><img src="/Users/duwei/Desktop/source/image/image-20201102235151996.png" alt="image-20201102235151996"></p></li><li><p>tï¼šæ‰§è¡Œå½“å‰cs:ipæ‰€æŒ‡å‘çš„æœºå™¨æŒ‡ä»¤</p></li><li><p>eï¼šå¯ä»¥æ”¹å†™å†…å­˜ä¸­çš„å†…å®¹</p><p><img src="/Users/duwei/Desktop/source/image/image-20201102235637216.png" alt="image-20201102235637216"></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;AX = AH + AL&lt;/p&gt;
&lt;p&gt;BX = BH + BL&lt;/p&gt;
&lt;p&gt;CX = CH + CL&lt;/p&gt;
&lt;p&gt;DX = DH + DL&lt;/p&gt;
&lt;p&gt;æ•°æ®å¯„å­˜å™¨&lt;/p&gt;
&lt;p&gt;æ®µåœ°å€å¯„å­˜å™¨ï¼šåç§»åœ°å€å¯„å­˜å™¨&lt;/p&gt;
&lt;p&gt;DS    SP&lt;/p&gt;
&lt;p&gt;ES    </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>è¿›ç¨‹</title>
    <link href="http://blog.3amupupup.online/2021/03/18/%E8%BF%9B%E7%A8%8B/"/>
    <id>http://blog.3amupupup.online/2021/03/18/%E8%BF%9B%E7%A8%8B/</id>
    <published>2021-03-18T03:09:52.070Z</published>
    <updated>2021-03-18T03:09:52.070Z</updated>
    
    <content type="html"><![CDATA[<h4 id="fork"><a href="#fork" class="headerlink" title="fork:"></a>fork:</h4><p>fork()å‡½æ•°manæ‰‹å†Œï¼š</p><ul><li>forkå‡½æ•°é€šè¿‡è°ƒç”¨å®ƒçš„è¿›ç¨‹å¤åˆ¶å‡ºä¸€ä¸ªæ–°çš„è¿›ç¨‹(è°è°ƒç”¨å®ƒå¤åˆ¶è°ï¼Œå‡†ç¡®è¯´æ˜¯å…±äº«ï¼ˆæ¯”å¦‚ä»£ç æ®µï¼‰ï¼Œå¯¹äºç§æœ‰æ•°æ®é‡‡ç”¨å†™æ—¶å¤åˆ¶æœºåˆ¶)ã€‚</li><li>å­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹idä¸çˆ¶è¿›ç¨‹ç›¸åŒ</li><li>å­è¿›ç¨‹ä¸ç»§æ‰¿çˆ¶è¿›ç¨‹çš„å†…å­˜é”</li><li>å­è¿›ç¨‹çš„èµ„æºåˆ©ç”¨ç‡å’Œcpuä½¿ç”¨æ—¶é—´è®¡æ•°ä¼šè¢«ç½®0ã€‚</li><li>å­è¿›ç¨‹ä¿¡å·é›†ä¸ºç©º(è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­æ”¶åˆ°çš„ä¿¡å·éƒ½ä¼šä¿å­˜åœ¨ä¸€ä¸ªé›†åˆä¸­)ã€‚</li><li>å­è¿›ç¨‹ä¸ç»§æ‰¿çˆ¶è¿›ç¨‹çš„ä¿¡å·é‡(å¼•è‡ªç™¾åº¦ç™¾ç§‘ï¼š<a href="https://baike.baidu.com/item/ä¿¡å·é‡/9807501" target="_blank" rel="noopener">ä¿¡å·é‡</a>çš„å€¼ä¸ç›¸åº”èµ„æºçš„ä½¿ç”¨æƒ…å†µæœ‰å…³ï¼Œå½“å®ƒçš„å€¼å¤§äº 0 æ—¶ï¼Œè¡¨ç¤ºå½“å‰å¯ç”¨çš„èµ„æºæ•°çš„æ•°é‡ï¼›å½“å®ƒçš„å€¼å°äº 0 æ—¶ï¼Œå…¶ç»å¯¹å€¼è¡¨ç¤ºç­‰å¾…ä½¿ç”¨è¯¥èµ„æºçš„è¿›ç¨‹ä¸ªæ•°ã€‚ä¿¡å·é‡çš„å€¼ä»…èƒ½ç”± PV æ“ä½œæ¥æ”¹å˜ã€‚)</li><li>å­è¿›ç¨‹ä¸ç»§æ‰¿çˆ¶è¿›ç¨‹çš„è®°å½•é”(The child does not inherit record locks from its parent (fcntl(2)))</li><li>å­è¿›ç¨‹ä¸ç»§æ‰¿çˆ¶è¿›ç¨‹çš„è®¡æ—¶å™¨ã€‚</li></ul><p>forkè°ƒç”¨çš„ä¸€ä¸ªå¥‡å¦™ä¹‹å¤„å°±æ˜¯å®ƒä»…ä»…è¢«è°ƒç”¨ä¸€æ¬¡ä½†æ˜¯è¿”å›ä¸¤æ¬¡ï¼š</p><p><img src="http://img.3amupupup.online/do_fork.png" alt="do_fork"></p><p>ä¸ºä»€ä¹ˆèƒ½è¿”å›ä¸¤æ¬¡ï¼šçˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹æ—¶ï¼Œå­è¿›ç¨‹å…±äº«çˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡ï¼Œå…¶ä¸­ä¸Šä¸‹æ–‡åŒ…å«ç¨‹åºè®¡æ•°å™¨ï¼Œå®ƒé‡Œé¢å­˜å‚¨çš„æ˜¯ç¨‹åºè¦æ‰§è¡Œçš„ä¸‹ä¸€æ¡cpuæŒ‡ä»¤ã€‚ç¨‹åºæ‰§è¡Œåˆ°returnä¹‹å‰ï¼Œå­è¿›ç¨‹å·²å®Œæˆåˆ›å»ºï¼Œå¹¶ä¸”é€šè¿‡wake_up_new_taskå‡½æ•°å°†å­è¿›ç¨‹æ·»åŠ åˆ°å¯è°ƒåº¦é˜Ÿåˆ—ä¸­å»äº†ï¼Œæ­¤æ—¶å­è¿›ç¨‹å…±äº«çˆ¶è¿›ç¨‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå®ƒä»¬çš„ç¨‹åºè®¡æ•°å™¨é‡Œçš„æŒ‡ä»¤éƒ½æŒ‡å‘tracehook_report_clone_completeå‡½æ•°ï¼Œå› æ­¤å½“å­è¿›ç¨‹æ‹¿åˆ°cpuæ—¶ï¼Œä¼šä»tracehook_report_clone_completeå¼€å§‹æ‰§è¡Œç›´è‡³returnã€‚å› æ­¤è°ƒç”¨forkå‡½æ•°ä¼šæœ‰ä¸¤æ¬¡è¿”å›ï¼Œä¸€æ¬¡æ˜¯çˆ¶è¿›ç¨‹ä¸­å¦ä¸€æ¬¡æ˜¯åœ¨å­è¿›ç¨‹ä¸­ã€‚</p><p>å‡½æ•°ï¼Œå½“å­è¿›ç¨‹æ‹¿åˆ°cpuæ—¶ï¼Œä¼šæ‰§è¡Œç¨‹åºè®¡æ•°å™¨ä¸­çš„æŒ‡ä»¤å³returnï¼Œæ‰€ä»¥forkå‡½æ•°ä¼šè¿”å›ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯åœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œä¸€æ¬¡æ˜¯åœ¨å­è¿›ç¨‹ä¸­)ã€‚</p><p>å®ƒå¯èƒ½æœ‰ä¸‰ç§ä¸åŒçš„è¿”å›å€¼ï¼š</p><ol><li>åœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œfork()è¿”å›æ–°åˆ›å»ºçš„å­è¿›ç¨‹çš„pidã€‚</li><li>åœ¨å­è¿›ç¨‹ä¸­ï¼Œfork()è¿”å›0ã€‚</li><li>å¦‚æœfork()å‡ºç°é”™è¯¯ï¼Œè¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚</li></ol><p>åœ¨forkå‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå¦‚æœåˆ›å»ºè¿›ç¨‹æˆåŠŸï¼Œåˆ™å‡ºç°ä¸¤ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªæ˜¯å­è¿›ç¨‹ä¸€ä¸ªæ˜¯çˆ¶è¿›ç¨‹ã€‚åœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›æ–°åˆ›å»ºå­è¿›ç¨‹çš„pidï¼Œåœ¨å­è¿›ç¨‹ä¸­è¿”å›0ï¼Œå¯ä»¥é€šè¿‡forkè¿”å›å€¼åˆ¤æ–­å½“å‰è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ã€‚</p><p>å¦å¤–æ ¹æ®ç¨‹åºçš„è¾“å‡ºä¿¡æ¯ï¼šçˆ¶è¿›ç¨‹ä¸­çš„ageç»“æœä¸º-1ï¼Œå­è¿›ç¨‹ä¸­çš„ageä¸º1ï¼Œä½†æ˜¯ageçš„åœ°å€åœ¨çˆ¶å­è¿›ç¨‹ä¸­ç›¸åŒã€‚çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å…±äº«å†…å­˜ï¼Œä½†æ˜¯ä¸å…±äº«ç§æœ‰æ•°æ®ï¼Œä½¿ç”¨äº†å†™æ—¶å¤åˆ¶çš„æœºåˆ¶ã€‚ä½†æ˜¯pidä¸åŒ(ç°é˜¶æ®µè®¤çŸ¥)ã€‚å†…å­˜åœ°å€ç›¸åŒä½†æ˜¯å€¼å´ä¸ç›¸åŒï¼Œè¿™é‡Œéœ€è¦å­¦ä¹ ä¸€ä¸‹æ“ä½œç³»ç»Ÿ-è™šæ‹Ÿå†…å­˜ã€‚è¿™é‡Œè§£é‡Šä¸‹ï¼šè™½ç„¶çˆ¶å­è¿›ç¨‹ä¸­çš„ageçš„å†…å­˜åœ°å€ç›¸åŒï¼Œä½†æ˜¯ä»–ä»¬å½¼æ­¤ç‹¬ç«‹ä¸å¯è§ï¼Œè™šæ‹Ÿå†…å­˜åœ°å€ç›¸åŒä½†æ˜¯å®ƒä»¬å„è‡ªå¯¹åº”çš„ç‰©ç†åœ°å€ä¸ç›¸åŒã€‚</p><pre><code class="c">#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main(){    int age = 0;    int pid;    pid = fork();    if(pid &lt; 0)    {        printf(&quot;fork() error.\n)&quot;);        exit(-1);    }    else if (pid == 0)    {        age++;        printf(&quot;I am child and my pid = %d, age = %d, addr = %p\n&quot;,getpid(),age,&amp;age);    }    else if (pid &gt; 0)    {        age--;        printf(&quot;I am parent and my Pid=%d, age = %d, addr = %p\n&quot;,getpid(),age,&amp;age);    }    return 0;}// ç¼–è¯‘æ‰§è¡Œç»“æœï¼š// I am parent and my Pid=13086, age = -1, addr = 0x7fffc4e4dc98// I am child and my pid = 13087, age = 1, addr = 0x7fffc4e4dc98</code></pre><h4 id="wait"><a href="#wait" class="headerlink" title="wait"></a>wait</h4><h4 id="waitpid"><a href="#waitpid" class="headerlink" title="waitpid"></a>waitpid</h4><p>pid_t waitpid(pid_t pid, int *statusp, int options);</p><p>å½“options=0æ—¶ï¼ŒwaitpidæŒ‚èµ·è°ƒç”¨è¿›ç¨‹çš„æ‰§è¡Œï¼Œç›´åˆ°å®ƒçš„ç­‰å¾…é›†åˆä¸­çš„ä¸€ä¸ªè¿›ç¨‹ç»ˆæ­¢ï¼›å¦‚æœè¿™ä¸ªé›†åˆä¸­çš„ä¸€ä¸ªè¿›ç¨‹åœ¨åˆšè°ƒç”¨çš„æ—¶åˆ»å°±å·²ç»ç»ˆæ­¢ï¼Œé‚£ä¹ˆwaitpidç«‹å³è¿”å›ã€‚</p><ol><li><p>åˆ¤å®šç­‰å¾…é›†åˆçš„æˆå‘˜</p><p>ç­‰å¾…é›†åˆçš„æˆå‘˜æ˜¯ç”± pid å‚æ•°å†³å®šçš„ï¼š</p><ol><li>pid &gt; 0 ï¼Œç­‰å¾…çš„é›†åˆå°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­è¿›ç¨‹ï¼Œå®ƒçš„è¿›ç¨‹idç­‰äºpidã€‚</li><li>pid = -1ï¼Œé‚£ä¹ˆç­‰å¾…å°±æ˜¯çˆ¶è¿›ç¨‹çš„æ‰€æœ‰å­è¿›ç¨‹ç»„æˆçš„é›†åˆä¸­çš„ä»»æ„å­è¿›ç¨‹ã€‚</li><li>pid &lt; -1ï¼Œå›æ”¶è¿›ç¨‹ç»„idä¸ºabs(pid)çš„ä¸€ç»„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å­è¿›ç¨‹ã€‚</li><li>pid = 0ï¼Œå›æ”¶ ä¸è°ƒç”¨è¿›ç¨‹ç»„idç›¸åŒç»„å†…çš„å­è¿›ç¨‹ã€‚</li></ol></li><li><p>ä¿®æ”¹é»˜è®¤è¡Œä¸º</p><ul><li><p>0</p><p>ä¸waitåŸºæœ¬æ²¡æœ‰åŒºåˆ«ã€‚</p></li><li><p>WNOHANG</p><p>å¦‚æœç­‰å¾…é›†åˆä¸­çš„ä»»ä½•å­è¿›ç¨‹éƒ½æ²¡æœ‰ç»ˆæ­¢ï¼Œé‚£ä¹ˆç«‹å³è¿”å›(è¿”å›å€¼ä¸º0)ï¼Œå¦‚æœæœ‰å­è¿›ç¨‹é€€å‡ºè¿”å›é€€å‡ºå­è¿›ç¨‹çš„pidï¼Œå¤±è´¥è¿”å›-1(æ²¡æœ‰å­è¿›ç¨‹æˆ–è€…å­è¿›ç¨‹æ­»å…‰äº†)ã€‚åœ¨ç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢çš„åŒæ—¶å¦‚æœæƒ³åšå…¶å®ƒäº‹æƒ…ï¼Œè¿™ä¸ªé€‰é¡¹å¾ˆæœ‰ç”¨ã€‚</p><pre><code class="c">#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;int main(){    int status;    int pid;    pid = fork();    if(pid == 0)    {        printf(&quot;I&#39;m child.\n&quot;);        sleep(3);        exit(0);    }    while((pid = waitpid(-1,&amp;status,WNOHANG)) &gt; 0)    {        printf(&quot;child exit.\n&quot;);    }    printf(&quot;I&#39;m parent.\n&quot;);    return 0;}// ä½¿ç”¨ WNOHANG çˆ¶è¿›ç¨‹ä¸ä¼šç­‰å¾…è‡ªå·±æˆé€€å‡ºï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆæœæ˜¯: çˆ¶è¿›ç¨‹ã€å­è¿›ç¨‹æ‰§è¡Œå„è‡ªçš„ä»£ç ï¼Œçˆ¶è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åé€€å‡ºï¼Œå› ä¸ºå­è¿›ç¨‹sleep(3)ï¼Œæ‰€ä»¥å­è¿›ç¨‹åœ¨è¾“å‡ºæ‰“å°ä¹‹åä¸‰ç§’é’Ÿé€€å‡ºã€‚</code></pre></li><li><p>WUNTRACED</p><p>æŒ‚èµ·è°ƒåŠ¨è¿›ç¨‹çš„æ‰§è¡Œï¼Œç›´åˆ°ç­‰å¾…é›†åˆä¸­çš„ä¸€ä¸ªè¿›ç¨‹å˜æˆå·²ç»ˆæ­¢æˆ–è€…åœæ­¢ã€‚è¿”å›çš„pidä¸ºå¯¼è‡´è¿”å›çš„å·²ç»ˆæ­¢æˆ–è¢«åœæ­¢å­è¿›ç¨‹çš„pidã€‚é»˜è®¤çš„è¡Œä¸ºæ˜¯åªè¿”å›å·²ç»ˆæ­¢å­è¿›ç¨‹ã€‚åœ¨æƒ³è¦æ£€æŸ¥å·²ç»ˆæ­¢æˆ–å·²åœæ­¢çš„å­è¿›ç¨‹æ—¶ï¼Œè¿™ä¸ªé€‰é¡¹æ¯”è¾ƒæœ‰ç”¨ã€‚</p><pre><code class="c">#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;int main(){    int status;    int pid;    pid = fork();    if(pid == 0)    {        printf(&quot;child run and pid = %d\n&quot;,getpid());        printf(&quot;I&#39;m child.\n&quot;);        sleep(3);        exit(0);    }    while((pid = waitpid(-1,&amp;status,WUNTRACED)) &gt; 0)    {        printf(&quot;child exit who pid = %d.\n&quot;,pid);    }    printf(&quot;I&#39;m parent.\n&quot;);    return 0;}// root$ ./a.out// child run and pid = 26334// I&#39;m child.// child exit who pid = 26334.// I&#39;m parent.</code></pre></li><li><p>WCONTINUED</p><p>æŒ‚èµ·è°ƒç”¨è¿›ç¨‹çš„æ‰§è¡Œï¼Œç›´åˆ°ç­‰å¾…é›†åˆä¸­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ç»ˆæ­¢æˆ–è€…ç­‰å¾…é›†åˆä¸­ä¸€ä¸ªè¢«åœæ­¢çš„è¿›ç¨‹æ”¶åˆ°SIGCONTä¿¡å·é‡æ–°å¼€å§‹æ‰§è¡Œã€‚</p></li><li><p>ç»„åˆä½¿ç”¨ï¼šWNOHANG | WUNTRACED</p><p>ç«‹å³è¿”å›ï¼Œå¦‚æœç­‰å¾…é›†åˆä¸­çš„å­è¿›ç¨‹éƒ½æ²¡æœ‰åœæ­¢æˆ–è€…ç»ˆæ­¢åˆ™è¿”å›0ï¼Œå¦‚æœæœ‰ä¸€ä¸ªåœæ­¢æˆ–è€…ç»ˆæ­¢åˆ™è¿”å›è¯¥å­è¿›ç¨‹çš„pidã€‚</p></li></ul></li><li><p>æ£€æŸ¥å·²å›æ”¶å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€</p><p><img src="http://img.3amupupup.online/childProcessStatus.png" alt="waitpid() statuså‚æ•°"></p><p>å¦‚æœstatuspå‚æ•°æ˜¯éç©ºçš„ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿå°±ä¼šè¯»å–è¿›ç¨‹çš„PCBï¼Œä¿å­˜åœ¨statusæŒ‡å‘çš„å˜é‡ä¸­ã€‚</p><p>statusä¸­ä¿å­˜çš„å°±æ˜¯è¿›ç¨‹é€€å‡ºçš„ä¿¡æ¯ï¼Œintæ˜¯32bitï¼Œæ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œé€€å‡ºç æ˜¯å¤šå°‘ï¼Œé€€å‡ºä¿¡å·æ˜¯å¤šå°‘ã€‚</p><pre><code class="c">#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main(){    int status = 0;    pid_t id = fork();    if(id &lt; 0)    {        perror(&quot;fork error!\n&quot;);    }    else if(id == 0) // child    {        printf(&quot;i am child process\n&quot;);        int count = 0;        while (count &lt; 5)        {            sleep(1);            count++;            printf(&quot;sleep 1\n&quot;);        }//        int ret = 1/0;//        exit(99);        exit(0);    }    // parent    printf(&quot;father wait before.\n&quot;);    pid_t ret = waitpid(id,&amp;status,0);    printf(&quot;status = %d\n&quot;,status); // ä¿å­˜å­è¿›ç¨‹çš„è¿”å›çŠ¶æ€    if(ret &gt; 0)    {        printf(&quot;å­è¿›ç¨‹ç»ˆæ­¢ä¿¡å·: %d\n&quot;, status &amp; 0x7f); // 0 è¡¨ç¤ºæ˜¯æ­£å¸¸é€€å‡º        printf(&quot;å­è¿›ç¨‹é€€å‡ºç : %d\n&quot;,(status &gt;&gt; 8) &amp; 0xff);        printf(&quot;wait success!\n&quot;);        if(status &amp; 0x7f) // é0åˆ™è¯´æ˜å­è¿›ç¨‹ä¸æ˜¯æ­£å¸¸é€€å‡ºçš„        {            printf(&quot;child run error!\n&quot;);        }        else        {            if((status&gt;&gt;8) &amp; 0xff) // è¿è¡ŒæˆåŠŸä½†æ˜¯ç»“æœä¸æ­£ç¡®            {                printf(&quot;child run success, but result is not right, exit code: %d\n&quot;,(status&gt;&gt;8)&amp;0xff);            }            else            {                printf(&quot;child run success and result is right,exit code: %d\n&quot;,(status&gt;&gt;8)&amp;0xff);            }        }    }    else    {        printf(&quot;wait failed!\n&quot;);    }    printf(&quot;father wait after.\n&quot;);    return 0;}</code></pre><p><img src="http://img.3amupupup.online/WaitpidStatus.png" alt="image-20210202163458393"></p><p>å›¾ä¸­åœ¨å­è¿›ç¨‹sleepçš„æ—¶å€™ç»™å…¶å‘é€äº†ä¸€ä¸ªSIGSTOPä¿¡å·å¯¼è‡´å­è¿›ç¨‹é€€å‡ºï¼Œstatusä¸­ä¿å­˜çš„æ˜¯å­è¿›ç¨‹ç»ˆæ­¢çš„çŠ¶æ€ä¿¡æ¯ã€‚</p><p>æ ‡å‡†åº“ä¸­ä¹Ÿæä¾›ä¸€äº›å®å‡½æ•°æ¥æ£€æµ‹è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼š</p><ol><li><p>WIFEXITED(status): å¦‚æœä¸ºæ­£å¸¸å­è¿›ç¨‹ç»ˆæ­¢å­è¿›ç¨‹çš„è¿”å›çŠ¶æ€ï¼Œåˆ™ä¸ºçœŸã€‚(æŸ¥çœ‹å­è¿›ç¨‹æ˜¯å¦æ­£å¸¸é€€å‡ºï¼š! (status &amp; 0x7f))</p></li><li><p>WEXITSTATUS(status): å¦‚æœWIFEXITED(status)ä¸ºéé›¶ï¼Œæå–å­è¿›ç¨‹é€€å‡ºç ã€‚(æŸ¥çœ‹å­è¿›ç¨‹é€€å‡ºç : (status&gt;&gt;8)&amp;0xff))</p><pre><code class="c">#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main(){    int status = 0;    pid_t id = fork();    if(id &lt; 0)    {        perror(&quot;fork error!\n&quot;);    }    else if(id == 0) // child    {        printf(&quot;i am child process\n&quot;);        int count = 0;        while (count &lt; 3)        {            sleep(1);            count++;            printf(&quot;sleep 1\n&quot;);        }        int ret = 1/0;        exit(10);    }    // parent    printf(&quot;father wait before.\n&quot;);    pid_t ret = waitpid(id,&amp;status,0);    printf(&quot;status = %d\n&quot;,status); // ä¿å­˜å­è¿›ç¨‹çš„è¿”å›çŠ¶æ€    if(WIFEXITED(status)) // ä¸ºçœŸè¯´æ˜æ˜¯æ­£å¸¸é€€å‡ºçš„    {        printf(&quot;child exit code: %d\n&quot;,WEXITSTATUS(status));    }    else    {        printf(&quot;child exit error!\n&quot;);    }    printf(&quot;father wait after.\n&quot;);    return 0; }</code></pre></li></ol></li></ol><h4 id="IPC"><a href="#IPC" class="headerlink" title="IPC"></a>IPC</h4><h5 id="pipe"><a href="#pipe" class="headerlink" title="pipe"></a>pipe</h5><pre><code class="c">#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;#include &lt;sys/wait.h&gt;int main(){    int fd[2];     pipe(fd); // fd[1]æ˜¯å†™ç«¯ï¼Œfd[0]æ˜¯è¯»ç«¯    int pid = fork();    if(pid == 0)    {        sleep(3);        write(fd[1],&quot;hello world\n&quot;,13);    }    else if(pid &gt; 0)    {        waitpid(-1,NULL,0);        char buf[20]={0};        int ret = read(fd[0],buf,sizeof(buf)); // readä¼šé˜»å¡ç­‰å¾…        if(ret&gt;0)            write(STDOUT_FILENO,buf,ret);    }    return 0;}</code></pre><p>ç®¡é“å¤§å°</p><ul><li><pre><code class="shell">[root@iZbp11u8qxiwepq15dm1liZ ComputerSystem]# ulimit -acore file size          (blocks, -c) 0data seg size           (kbytes, -d) unlimitedscheduling priority             (-e) 0file size               (blocks, -f) unlimitedpending signals                 (-i) 6946max locked memory       (kbytes, -l) 64max memory size         (kbytes, -m) unlimitedopen files                      (-n) 65535pipe size            (512 bytes, -p) 8POSIX message queues     (bytes, -q) 819200real-time priority              (-r) 0stack size              (kbytes, -s) 8192cpu time               (seconds, -t) unlimitedmax user processes              (-u) 6946virtual memory          (kbytes, -v) unlimitedfile locks                      (-x) unlimited</code></pre><p>å¯ä»¥çœ‹åˆ°åœ¨linuxç³»ç»Ÿä¸Špipe size ä¸º512bytes * 8 = 4096bytesã€‚</p></li></ul><p>ä¼˜ç‚¹ï¼šç®€å•</p><p>ç¼ºç‚¹ï¼š</p><ul><li>åªèƒ½æœ‰è¡€ç¼˜å…³ç³»çš„è¿›ç¨‹ä¹‹é—´æ‰èƒ½ä½¿ç”¨</li><li>åªèƒ½å•å‘é€šä¿¡(åŠåŒå·¥é€šä¿¡)ï¼Œå¦‚æœéœ€è¦åŒå‘é€šä¿¡éœ€è¦åˆ›å»ºä¸¤ä¸ªç®¡é“</li></ul><h5 id="FIFO"><a href="#FIFO" class="headerlink" title="FIFO"></a>FIFO</h5><p>æœ‰åç®¡é“ï¼Œå®ç°æ— è¡€ç¼˜å…³ç³»è¿›ç¨‹é€šä¿¡ã€‚</p><ul><li><p>åˆ›å»ºä¸€ä¸ªç®¡é“çš„ä¼ªæ–‡ä»¶</p><ul><li>int mkfifo(const char *pathname, mode_t mode);</li><li>mkfifo fifoName å‘½ä»¤åˆ›å»º</li></ul></li><li><p>å†…æ ¸ä¼šç»™fifoæ–‡ä»¶å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºï¼Œæ“ä½œfifoæ–‡ä»¶ï¼Œå¯ä»¥æ“ä½œç¼“å†²åŒºï¼Œå®ç°è¿›ç¨‹é€šä¿¡â€“å®é™…ä¸Šå°±æ˜¯æ–‡ä»¶è¯»å†™</p><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;string.h&gt;#define FIFO &quot;/root/ComputerSystem/myfifo&quot; // shell: mkfifo myfifoint main(){    int fd = open(FIFO,O_WRONLY); // å¦‚æœæ²¡æœ‰ç¨‹åº readï¼Œopenä¼šé˜»å¡    char buf[256];    int num = 1;    while(1)       {        memset(buf,0x00,sizeof(buf));        sprintf(buf,&quot;hello%d&quot;,num++);        write(fd,buf,strlen(buf));        sleep(1);    }    close(fd);    return 0;}//  è‹¥æ— è¯»ç«¯å†™ç«¯opené˜»å¡</code></pre><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;int main(){    int fd = open(&quot;myfifo&quot;,O_RDONLY);    char buf[256];    int num = 1;    while(1)       {        int ret = read(fd,buf,sizeof(buf));        if(ret &gt; 0)        {            printf(&quot;read:%s\n&quot;,buf);        }    }    close(fd);    return 0;}//  è‹¥æ— å†™ç«¯è¯»ç«¯é˜»å¡ï¼Œæœ‰ç‚¹ç±»ä¼¼golangé‡Œçš„æ— ç¼“å†²channel</code></pre><p>linuxç³»ç»Ÿä¸Šé€šè¿‡å‘½ä»¤ï¼šman 7 signal æŸ¥çœ‹ä¿¡å·çš„æ‰‹å†Œ</p><p><img src="http://img.3amupupup.online/SignalAction.png" alt="signal"></p><p><img src="http://img.3amupupup.online/fifo.png" alt="fifo"></p><p>è‹¥è¯»ç«¯å…³é—­ï¼Œå†™ç«¯ä¹Ÿä¼šç»ˆæ­¢ã€‚è‡³äºä¸ºä»€ä¹ˆä¼šå…³é—­ï¼Œå¦‚ä¸‹è§£é‡Šï¼š</p><p>æ‰§è¡Œå†™ç«¯ç¨‹åºæ—¶ï¼Œopenå‡½æ•°æ‰“å¼€ç®¡é“æ–‡ä»¶ myfifoï¼Œç”±äºæ²¡æœ‰è¯»ç«¯ï¼Œæ‰€ä»¥å†™ç«¯ä¼šé˜»å¡ä½ã€‚å½“æ‰§è¡Œè¯»ç«¯ç¨‹åºä¹‹å openåœæ­¢é˜»å¡ ç»§ç»­å‘ä¸‹æ‰§è¡Œå¼€å§‹å¾€ç®¡é“é‡Œå†™æ•°æ®ã€‚å½“å…³é—­è¯»ç«¯æ—¶ï¼Œæ“ä½œç³»ç»Ÿå‘é€ sigpipe ä¿¡å·ç»™å†™ç«¯ã€‚ç”±å›¾å¯çŸ¥ sigpipe æ˜¯ä¸€ä¸ªTerm(terminate)ä¿¡å·ï¼Œæ‰€ä»¥å†™ç«¯ç¨‹åºç»ˆæ­¢é€€å‡ºã€‚</p></li></ul><h5 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h5>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;fork&quot;&gt;&lt;a href=&quot;#fork&quot; class=&quot;headerlink&quot; title=&quot;fork:&quot;&gt;&lt;/a&gt;fork:&lt;/h4&gt;&lt;p&gt;fork()å‡½æ•°manæ‰‹å†Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;forkå‡½æ•°é€šè¿‡è°ƒç”¨å®ƒçš„è¿›ç¨‹å¤åˆ¶å‡ºä¸€ä¸ªæ–°çš„è¿›ç¨‹(è°è°ƒç”¨å®ƒå¤åˆ¶è°ï¼Œ</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="è¿›ç¨‹" scheme="http://blog.3amupupup.online/tags/%E8%BF%9B%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Cæ·±å…¥å‰–æ</title>
    <link href="http://blog.3amupupup.online/2021/03/18/C%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/"/>
    <id>http://blog.3amupupup.online/2021/03/18/C%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/</id>
    <published>2021-03-18T03:09:52.069Z</published>
    <updated>2021-03-18T03:09:52.070Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>å®šä¹‰å’Œå£°æ˜</p><ul><li><p>å®šä¹‰ï¼šç¼–è¯‘å™¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸ºè¿™ä¸ªå¯¹è±¡åˆ†é…ä¸€å—å†…å­˜å¹¶ç»™å®ƒå–ä¸€ä¸ªåå­—ï¼Œåå­—å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å˜é‡æˆ–å¯¹è±¡åã€‚</p><pre><code class="c">int a;</code></pre></li><li><p>å£°æ˜ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªåå­—å·²ç»åŒ¹é…åˆ°ä¸€å—å†…å­˜ä¸Šäº†ï¼›å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªåå­—é¢„å®šäº†ï¼Œå…¶å®ƒåœ°æ–¹ä¸èƒ½å†ä½¿ç”¨ï¼Œè¿™ç§å£°æ˜çš„æœ€å…¸å‹ä¾‹å­å°±æ˜¯å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼›å£°æ˜ä¸ä¼šåˆ†é…å†…å­˜ã€‚</p><pre><code class="c">extern inn a;void func(int a);    //å£°æ˜ä¸€ä¸ªå‡½æ•°</code></pre></li></ul></li><li><p>struct</p><pre><code class="c">#include &lt;stdio.h&gt;struct stu{} s1;int main(){    printf(&quot;%lu\n&quot;,sizeof(s1)); // 0    return 0;}// ç¼–è¯‘å™¨gcc</code></pre></li><li><p>æŸ”æ€§æ•°ç»„</p><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;typedef struct{    int a;    int b[];} soft_arr;int main(){    printf(&quot;%lu\n&quot;,sizeof(soft_arr)); // 4    soft_arr *p = malloc(sizeof(soft_arr)+sizeof(int));    free(p);    return 0;}</code></pre><p>ç»“æ„ä¸­æœ€åä¸€ä¸ªæˆå‘˜å…è®¸æ˜¯ä¸€ä¸ªæœªçŸ¥å¤§å°çš„æ•°ç»„ï¼Œè¿™ä¸ªæˆå‘˜å«åšæŸ”æ€§æ•°ç»„ã€‚sizefo è¿”å›è¿™ç§ç±»å‹çš„å¤§å°ä¸åŒ…æ‹¬æŸ”æ€§æ•°ç»„çš„å†…å­˜ã€‚åŒ…å«æŸ”æ€§æ•°ç»„æˆå‘˜çš„ç»“æ„ç”¨mallocè¿›è¡Œå†…å­˜åŠ¨æ€åˆ†é…ã€‚(åº”ç”¨ï¼šæ¯”å¦‚ç½‘ç»œé€šä¿¡ï¼Œæ”¶å‘æ•°æ®åŒ…)</p></li><li><p>union</p><pre><code class="c">union Person{    char *name;    int age;    char *addr;    double balance;};int main(){    printf(&quot;%lu\n&quot;,sizeof(union Person));    return 0;}</code></pre><p>unionç»´æŠ¤è¶³å¤Ÿçš„ç©ºé—´æ¥ç½®æ”¾å¤šä¸ªæˆå‘˜çš„æŸä¸€ä¸ªæˆå‘˜ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæ•°æ®æˆå‘˜é…ç½®ç©ºé—´ã€‚åœ¨unionä¸­æ‰€æœ‰æˆå‘˜å…¬ç”¨ä¸€ä¸ªç©ºé—´ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å­˜å‚¨å…¶ä¸­ä¸€ä¸ªæ•°æ®æˆå‘˜ï¼Œæ‰€æœ‰æ•°æ®æˆå‘˜æ‹¥æœ‰ç›¸åŒçš„èµ·å§‹åœ°å€ã€‚</p><p>ä¸€ä¸ªunionéœ€è¦é…ç½®è¶³å¤Ÿçš„ç©ºé—´æ¥å®¹çº³æ‰€æœ‰æˆå‘˜ã€‚ä¸Šè¿°ä¾‹å­ä¸­ï¼šdoubleå ç”¨å†…å­˜ç©ºé—´æœ€å¤§ï¼Œæ‰€ä»¥Personçš„å†…å­˜å¤§å°æ˜¯8å­—èŠ‚ã€‚</p><p>å¤§å°ç«¯å¯¹unionçš„å½±å“ï¼š</p><pre><code class="c">union T{    char a;    int b;};int main(){    union T t1;    t1.b = 1;    printf(&quot;%d\n&quot;,t1.a);    return 0;}</code></pre><img src="https://upload-images.jianshu.io/upload_images/15150075-33c893aeed324c98.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" style="zoom:67%;" /></li><li><p>enum</p><pre><code class="c">enum Color{    RED,    BLACK,    WHITE,    YELLOW,};int main(){    RED = 3; // expression is not assignable    return 0;}</code></pre></li><li><p>auto</p><p>ç¼–è¯‘å™¨åœ¨é»˜è®¤ç¼ºçœçš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å˜é‡éƒ½æ˜¯autoã€‚</p></li><li><p>register</p><p>è¯·æ±‚ç¼–è¯‘å™¨å°½å¯èƒ½çš„å°†è¿™ä¸ªå˜é‡å­˜åœ¨cpuå†…éƒ¨çš„å¯„å­˜å™¨ä¸­è€Œä¸æ˜¯é€šè¿‡å†…å­˜å¯»å€è®¿é—®ã€‚registerå˜é‡å¯èƒ½ä¸å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨&amp;ç¬¦å–åœ°å€ã€‚</p></li><li><p>static</p><ul><li>ä¿®é¥°å˜é‡ã€‚<ul><li>å˜é‡åˆ†å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ï¼Œè¢«staticä¿®é¥°å®ƒä»¬éƒ½å­˜åœ¨äºå†…å­˜çš„é™æ€åŒºã€‚</li><li>é™æ€å…¨å±€å˜é‡ï¼šä½œç”¨åŸŸä»…é™äºå˜é‡è¢«å®šä¹‰çš„æ–‡ä»¶ä¸­ã€‚</li><li>å±€éƒ¨é™æ€å˜é‡ï¼šåªèƒ½åœ¨å®šä¹‰è¿™ä¸ªå±€éƒ¨é™æ€å˜é‡çš„å‡½æ•°ä½¿ç”¨ï¼Œå³ä½¿å‡½æ•°è°ƒç”¨ç»“æŸï¼Œè¿™ä¸ªå˜é‡ä¹Ÿä¸ä¼šæ¶ˆå¤±ã€‚</li></ul></li><li>ä¿®é¥°å‡½æ•°ã€‚<ul><li>å‡½æ•°å‰åŠ staticç§°ä¸ºé™æ€å‡½æ•°ï¼Œé™æ€ä¸æ˜¯æŒ‡å­˜å‚¨æ–¹å¼ï¼Œè€Œæ˜¯æ­¤å‡½æ•°çš„ä½œç”¨åŸŸä»…é™äºæœ¬æ–‡ä»¶å†…ã€‚</li></ul></li></ul></li><li><p>switch</p><pre><code class="c">int main(){    int a = 4;    int c=6;    switch (a) {        case 1:            printf(&quot;1\n&quot;);            break;        default:            printf(&quot;default\n&quot;);        case 2:            printf(&quot;2\n&quot;);        case 3:            printf(&quot;3\n&quot;);//        case c:   // error//            printf(&quot;%d&quot;,c);//            break;//        case 3.14:    // error//            printf(&quot;3.14\n&quot;);    }}// output:// default// 2// 3</code></pre><ul><li>caseååªèƒ½æ˜¯æ•´å½¢æˆ–å­—ç¬¦å‹å¸¸é‡æˆ–å¸¸é‡è¡¨è¾¾å¼</li></ul></li><li><p>End0</p></li><li><p>0x01&lt;&lt;2+3</p><p>ç»“æœä¸º32ï¼Œ+çš„ä¼˜å…ˆçº§æ¯”&lt;&lt;é«˜ã€‚</p><p>å·¦ç§»å³ç§»çš„ä½æ•°ä¸èƒ½å¤§äºæ•°æ®çš„é•¿åº¦ï¼Œä¸èƒ½å°äº0ã€‚</p></li><li><p>++iã€i++</p><pre><code class="c">int main(){    int i = 0;    int j = (++i,++i,++i);      // ++i å…ˆè‡ªå¢å†è¿›å®ƒå…¶ä»–è¿ç®—ã€‚iåœ¨é‡è§é€—å·ä¹‹åè®¤ä¸ºæœ¬è®¡ç®—å•ä½å·²ç»ç»“æŸï¼Œç„¶åè¿›è¡Œè‡ªå¢ã€‚    printf(&quot;j = %d\n&quot;,j);       // 3    int k = 0;    int z = (k++,k++,k++);      // i++ å…ˆè¿›è¡Œå…¶å®ƒè¿ç®—å†è‡ªå¢    printf(&quot;z = %d\n&quot;,z);       // 2    int x = 0;    int y = (x++) + (x++) + (x++);    printf(&quot;y = %d\n&quot;,y);       // 1+1+1=3 xé‡åˆ°åˆ†å·ä¹‹åæ‰è®¤ä¸ºæœ¬æ¬¡è®¡ç®—å•ä½å·²ç»“æŸï¼Œxè¿™æ—¶å€™æ‰ä¼šè¿›è¡Œè‡ªåŠ }</code></pre></li><li><p>++i+++i+++i</p><pre><code class="c">int main(){    int a = 1;    int b = 2;    int ret = a+++b;            // è´ªå¿ƒç®—æ³•ï¼ša++ + b    printf(&quot;ret = %d\n&quot;,ret);   // ret = 3}</code></pre></li><li><p>#defineå®å®šä¹‰æ³¨é‡Šç¬¦å·</p><pre><code class="c">#define BSC //#define BMC /*#define EMC */int main(){    int a = 10;BSC a is int    DMC input a number:EMC}</code></pre><p>æ³¨é‡Šå…ˆäºé¢„å¤„ç†æŒ‡ä»¤è¢«å¤„ç†ã€‚å½“å‘ç”Ÿå®æ›¿æ¢æ—¶ï¼Œæ³¨é‡Šå·²ç»å¤„ç†å®Œæ¯•ï¼Œå†å‡ºç°//ã€/*åˆ™ä¼šå‡ºç°é”™è¯¯ã€‚</p></li><li><p>å®å®šä¹‰ä¸­çš„ç©ºæ ¼</p><pre><code class="c">#define SUM(x) (x)+(x)int main(){    int ret = SUM (3);    return 0;}</code></pre><p>è¿™ä¸ªç©ºæ ¼ä»…åœ¨å®šä¹‰çš„æ—¶å€™æœ‰æ•ˆï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªå®å‡½æ•°çš„æ—¶å€™ï¼Œç©ºæ ¼ä¼šè¢«å¿½ç•¥æ‰ã€‚å› æ­¤ï¼šSUM(x) å’ŒSUM (x)æ˜¯ä¸€æ ·çš„ã€‚</p><pre><code class="shell">duweideMacBook-Pro:test duwei$ cat test.c#define SUM(x) (x)+(x)int main(){    int ret = SUM (3);    return 0;}duweideMacBook-Pro:test duwei$ gcc -E test.c -o test.iduweideMacBook-Pro:test duwei$ cat test.i# 1 &quot;test.c&quot;# 1 &quot;&lt;built-in&gt;&quot; 1# 1 &quot;&lt;built-in&gt;&quot; 3# 361 &quot;&lt;built-in&gt;&quot; 3# 1 &quot;&lt;command line&gt;&quot; 1# 1 &quot;&lt;built-in&gt;&quot; 2# 1 &quot;test.c&quot; 2</code></pre></li></ul><p>  int main(){<br>   int ret = (3)+(3);<br>   return 0;<br>  }<br>  duweideMacBook-Pro:test duwei$</p><pre><code>- é¢„å¤„ç†ä½™ä¸‹éƒ¨åˆ†æš‚æ—¶çœç•¥ï¼Œä»¥åå›æ¥çœ‹- ç•¥- ç•¥- ç•¥- int *p = NULLå’Œ *p = NULLçš„åŒºåˆ«  - ```c    int *p = NULL;    ```    å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå˜é‡pï¼Œå…¶æŒ‡å‘çš„å†…å­˜é‡Œé¢ä¿å­˜çš„æ˜¯intç±»å‹çš„æ•°æ®ï¼Œåœ¨å®šä¹‰å˜é‡pçš„åŒæ—¶æŠŠpçš„å€¼è®¾ä¸º0x00000000ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åˆå§‹åŒ–ï¼Œæ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™è¿›è¡Œçš„ã€‚  - ```c    int *p;    *p = NULL;    ```    ç¬¬ä¸€è¡Œä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæŒ‡é’ˆå˜é‡pï¼Œå…¶æŒ‡å‘å†…å­˜é‡Œä¿å­˜çš„æ˜¯intç±»å‹çš„æ•°æ®ï¼Œæ­¤æ—¶på˜é‡æœ¬èº«æ˜¯å¤šå°‘ä¸å¯çŸ¥ï¼Œä¹Ÿå°±æ˜¯è¯´på˜é‡æ­¤æ—¶æŒ‡å‘çš„å†…å­˜åœ°å€å¯èƒ½æ˜¯ä¸ªéæ³•å€¼ã€‚ç¬¬äºŒè¡Œä»£ç ç»™*pèµ‹å€¼ä¸ºNULLï¼Œä¹Ÿå°±æ˜¯ç»™ *pæŒ‡å‘çš„å†…å­˜èµ‹å€¼NULLã€‚ç”±äºpå˜é‡çš„å†…å­˜åœ°å€å¯èƒ½æ˜¯éæ³•çš„ï¼Œæ‰€ä»¥åœ¨è°ƒè¯•æ—¶ç¼–è¯‘å™¨å¯èƒ½ä¼šæŠ¥é”™ã€‚- ```c  int main(){      char *p1 = &quot;abcdef&quot;;      printf(&quot;p1 = %p\n&quot;,p1);         // p1 = 0x109002f82      printf(&quot;p1 = %p\n&quot;,p1+1);       // p1 = 0x109002f82      printf(&quot;p1 = %p\n&quot;,p1+2);       // p1 = 0x109002f82      printf(&quot;&amp;p1 = %p\n&quot;,&amp;p1);       // &amp;p1 = 0x7ffee6bfda48      char p2[] = &quot;123456&quot;;      printf(&quot;p2 = %p\n&quot;,p2);         // p2 = 0x7ffee6bfda41      printf(&quot;&amp;p2 = %p\n&quot;,p2+1);      // &amp;p2 = 0x7ffee6bfda42      printf(&quot;&amp;p2 = %p\n&quot;,p2+2);      // &amp;p2 = 0x7ffee6bfda43  }</code></pre><p>  <img src="https://upload-images.jianshu.io/upload_images/15150075-95496cd76b42207b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="p1çš„è®¿é—®æ–¹å¼"></p><p>  <img src="https://upload-images.jianshu.io/upload_images/15150075-586f59dc81a1ece9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="p2çš„è®¿é—®æ–¹å¼"></p><p>  ç»“è®ºï¼š</p><ul><li>æ•°ç»„åå³ä¸ºæ•°æ®æœ¬èº«</li><li>æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæ•°ç»„çš„åœ°å€èµ‹å€¼ç»™å½¢å‚ï¼Œå‘ç”Ÿé™ç»´ã€‚</li></ul><ul><li><p>aå’Œ&amp;açš„åŒºåˆ«(æ•°ç»„å)</p><pre><code class="c">int main(){    int a[5] = {1,2,3,4,5};    int *ptr = (int *)(&amp;a+1);    printf(&quot;*(a+1)=%d\n*(ptr-1))=%d\n&quot;,*(a+1),*(ptr-1));    // *(a+1)=2ï¼Œ*(ptr-1))=5}</code></pre><p>ç»“è®ºï¼š</p><ul><li>&amp;aä»£è¡¨çš„æ˜¯æ•°ç»„åœ°å€ï¼Œ&amp;a+1ï¼ŒåŠ ä¸Šçš„æ˜¯sizeof(a)ï¼ŒæŒ‡å‘a[4]çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</li><li>aä»£è¡¨çš„æ˜¯é¦–å…ƒç´ åœ°å€ã€‚</li></ul></li><li><p>å®šä¹‰ä¸ºæ•°ç»„ï¼Œå£°æ˜ä¸ºæŒ‡é’ˆ</p><pre><code class="c">int arr[3] = {1,2,3};int main(){    extern int *arr;}</code></pre><p>å°†arrå£°æ˜ä¸ºæŒ‡é’ˆä¼šé€ æˆè®¿é—®æ–¹å¼çš„é”™è¯¯ï¼Œå¾—å‡ºæ„å¤–çš„ç»“æœã€‚æœ¬åº”è¯¥æ˜¯ç›´æ¥è¯»å–åˆ°arrçš„å†…å­˜åœ°å€ç„¶åè¿›è¡Œåç§»æ“ä½œï¼Œä½†æ˜¯è¿™é‡Œå£°æ˜ä¸ºæŒ‡é’ˆï¼Œå¯¼è‡´äº†è®¿é—®æ–¹å¼çš„æ”¹å˜ï¼Œè®¿é—®æ—¶ä¼šå…ˆè¯»å–arræ‰€åœ¨å†…å­˜ç©ºé—´å­˜æ”¾çš„å†…å­˜åœ°å€ï¼Œç„¶åå†è¿›è¡Œåç§»æ“ä½œã€‚</p></li><li><p>å®šä¹‰ä¸ºæŒ‡é’ˆï¼Œå£°æ˜ä¸ºæ•°ç»„</p><pre><code class="c">char *p = &quot;abcd&quot;;int main(){    extern char p[];}</code></pre><p>ä¹Ÿä¼šå› ä¸ºå®šä¹‰å’Œå£°æ˜çš„æ–¹å¼ä¸ä¸€æ ·é€ æˆè®¿é—®æ–¹å¼ä¸ä¸€æ ·ä»è€Œå¾—åˆ°æ„å¤–çš„ç»“æœã€‚</p></li><li><p>æŒ‡é’ˆå’Œæ•°ç»„å¯¹æ¯”</p><table><thead><tr><th>æŒ‡é’ˆ</th><th>æ•°ç»„</th></tr></thead><tbody><tr><td>ä¿å­˜æ•°æ®çš„åœ°å€ï¼Œä»»ä½•è¢«å­˜å…¥æŒ‡é’ˆå˜é‡pçš„æ•°æ®éƒ½ä¼šè¢«å½“åšåœ°å€å¤„ç†ã€‚pæœ¬èº«çš„åœ°å€æœ‰ç¼–è¯‘å™¨å¦å¤–å­˜å‚¨ï¼Œå­˜å‚¨åœ¨å“ªé‡Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ã€‚</td><td>ä¿å­˜æ•°æ®ï¼Œæ•°ç»„åaä»£è¡¨çš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€è€Œä¸æ˜¯æ•°ç»„çš„é¦–åœ°å€ï¼Œ&amp;aæ‰æ˜¯æ•´ä¸ªæ•°ç»„çš„é¦–åœ°å€ã€‚aæœ¬èº«çš„åœ°å€ç”±ç¼–è¯‘å™¨å¦å¤–å­˜å‚¨ï¼Œå­˜å‚¨åœ¨å“ªé‡Œï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ã€‚</td></tr><tr><td>é—´æ¥è®¿é—®æ•°æ®ï¼Œé¦–å…ˆå–å¾—æŒ‡é’ˆå˜é‡pçš„å†…å®¹ï¼ŒæŠŠå®ƒå½“åšåœ°å€ï¼Œç„¶åä»è¿™ä¸ªåœ°å€æå–æˆ–è€…å†™å…¥æ•°æ®ã€‚æŒ‡é’ˆå¯ä»¥ä»¥æŒ‡é’ˆçš„å½¢å¼è®¿é—®*(p+i)ï¼›ä¹Ÿå¯ä»¥ä»¥ä¸‹æ ‡çš„æ–¹å¼è®¿é—®p[i]ã€‚ä½†æ˜¯å…¶æœ¬è´¨éƒ½æ˜¯å…ˆå–pçš„å†…å®¹ç„¶ååŠ ä¸Š i * sizeof(ç±»å‹)ä¸ªbyteä½œä¸ºæ•°æ®çš„çœŸæ­£åœ°å€ã€‚</td><td>ç›´æ¥è®¿é—®æ•°æ®ï¼Œæ•°ç»„åaæ˜¯æ•´ä¸ªæ•°ç»„çš„åå­—ï¼Œæ•°ç»„å†…æ¯ä¸ªå…ƒç´ å¹¶æ²¡æœ‰åå­—ã€‚åªèƒ½é€šè¿‡â€å…·å+åŒ¿åâ€çš„æ–¹å¼æ¥è®¿é—®å…¶å®ƒæŸä¸ªå…ƒç´ ï¼Œä¸èƒ½æŠŠæ•°ç»„å½“åšä¸€ä¸ªæ•´ä½“æ¥è¿›è¡Œè¯»å†™æ“ä½œã€‚æ•°ç»„å¯ä»¥ä»¥æŒ‡é’ˆçš„å½¢å¼è®¿é—®*(pa+i)ï¼›ä¹Ÿå¯ä»¥ä»¥ä¸‹æ ‡çš„æ–¹å¼è®¿é—®a[i]ã€‚ä½†å…¶æœ¬è´¨éƒ½æ˜¯aæ‰€ä»£è¡¨çš„æ•°ç»„çš„é¦–å…ƒç´ åœ°å€åŠ ä¸Š i * sizeof(ç±»å‹)ä¸ªbyteä½œä¸ºæ•°æ®çš„çœŸæ­£åœ°å€ã€‚</td></tr><tr><td>é€šå¸¸ç”¨äºåŠ¨æ€æ•°æ®ç»“æ„</td><td>é€šå¸¸ç”¨äºå­˜å‚¨å›ºå®šæ•°ç›®ä¸”æ•°æ®ç±»å‹ç›¸åŒçš„å…ƒç´ </td></tr><tr><td>ç›¸å…³å‡½æ•°mallocå’Œfree</td><td>éšå¼åˆ†é…å’Œåˆ é™¤</td></tr><tr><td>é€šå¸¸æŒ‡å‘åŒ¿åæ•°æ®ï¼ˆä¹Ÿå¯æŒ‡å‘å…·åæ•°æ®ï¼‰</td><td>è‡ªèº«å³ä¸ºæ•°ç»„å</td></tr></tbody></table></li><li><p>åœ°å€å¼ºåˆ¶è½¬æ¢</p><pre><code class="c">int main(){    int a[4] = {1,2,3,4};    int *ptr1 = (int *)(&amp;a+1);    int *ptr2 = (int *)((int)a+1);    printf(&quot;ptr1[-1] = %x\n&quot;,ptr1[-1]);    printf(&quot;*ptr2 = %x\n&quot;,*ptr2);    return 0;}</code></pre><p>32ä½ç³»ç»Ÿä¸‹ï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/15150075-c638b8896fc9d3be.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>64ä½ç³»ç»Ÿä¸‹ä¼šæŠ¥é”™ï¼šSegmentation fault</p><p>ä¸ªäººçœ‹æ³•ï¼šaä»£è¡¨çš„æ˜¯é¦–å…ƒç´ åœ°å€ï¼Œå°†å…¶å¼ºè½¬æˆintç„¶å+1å†å¼ºè½¬æˆint<em>ï¼Œå³å°†aåœ°å€è¿›è¡Œ+1æ“ä½œç„¶åèµ‹å€¼ç»™ptr2ã€‚åœ¨32ä½ä¸‹æŒ‡é’ˆçš„é•¿åº¦å’Œ int\</em> ç±»å‹çš„é•¿åº¦ç›¸åŒï¼Œæ‰€ä»¥ä¸ä¼šå‘ç”Ÿæå‡ã€‚ä½†æ˜¯åœ¨64ä½ä¸‹ï¼Œå°†4ä½çš„int* æå‡ä¸º8ä½çš„åœ°å€ä¼šå‘ç”Ÿæå‡ï¼Œæå‡åçš„åœ°å€è¿œè¿œå¤§äºå½“å‰æ•°ç»„æ‰€æœ‰å…ƒç´ çš„åœ°å€ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œprintfè®¿é—®æ‰“å°æ—¶ä¼šæŠ¥é”™ï¼šSegmentation faultã€‚</p></li><li><p>&amp;p[4][2] - &amp;a[4][2] ç­‰äºå¤šå°‘ï¼Ÿ</p><pre><code class="c">int main(){    int a[5][5];    int(*p)[4];    p = a;    printf(&quot;%p,%d\n&quot;,&amp;p[4][2] - &amp;a[4][2],&amp;p[4][2] - &amp;a[4][2]);}</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/15150075-59a8fe82de0a6d11.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=" æ˜¯"></p></li><li><p>æ— æ³•å‘ä¸€ä¸ªå‡½æ•°ä¼ é€’æ•°ç»„</p><ul><li>Cè¯­è¨€ä¸­ï¼Œå½“ä¸€ç»´æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œç¼–è¯‘å™¨æ€»æŠŠå®ƒè§£ææˆä¸€ä¸ªæŒ‡å‘å…¶é¦–å…ƒç´ åœ°å€çš„æŒ‡é’ˆã€‚</li><li>å‡½æ•°æœ¬èº«æ²¡æœ‰ç±»å‹ï¼Œåªæœ‰å‡½æ•°çš„è¿”å›å€¼æ‰æœ‰ç±»å‹ã€‚</li></ul></li><li><p>èƒ½å¦æŠŠæŒ‡é’ˆå˜é‡æœ¬èº«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°</p><p>mainå‡½æ•°ä¸­çš„å˜é‡ä¸æ˜¯å…¨å±€å˜é‡ï¼Œåªä¸è¿‡æ˜¯å®ƒçš„å£°æ˜å‘¨æœŸå’Œå…¨åŒºå˜é‡ä¸€æ ·é•¿è€Œå·²ã€‚å…¨å±€å˜é‡å®šä¹‰åœ¨å‡½æ•°å¤–éƒ¨ã€‚</p></li><li><p>å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰</p><pre><code class="c">char* (*func1)(char* p1, char* p2);</code></pre><p>func1æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼ŒæŒ‡å‘ä¸€ä¸ªæœ‰ä¸¤ä¸ªchar*ç±»å‹å‚æ•°ä¸”è¿”å›å€¼æ˜¯char*ç±»å‹çš„å‡½æ•°</p></li><li><p>*(int*)&amp;p</p><pre><code class="c">// 32ä½void Function(){    printf(&quot;Call Function.\n&quot;);}int main(){    void (*p)();    *(int*)&amp;p = (int)Function;    (*p)();    return 0;}</code></pre><p>pæ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼ŒæŒ‡å‘ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼çš„å‡½æ•°ï¼›</p><p>(int*)&amp;på°†pçš„åœ°å€å¼ºè½¬æˆintæ•°æ®ç±»å‹çš„æŒ‡é’ˆï¼›</p><p>*(int*)&amp;p å°±æ˜¯ä¸€ä¸ªæ•´å‹ï¼Œè¦å°†å‡½æ•°Functionçš„åœ°å€èµ‹å€¼ç»™på¾—å…ˆå°†å…¶è½¬ä¸ºæ•´å‹ã€‚</p></li><li><p>(*(void(*)())0)();</p><p>void(*)()ï¼šè¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªè¿”å›å€¼æ—¶voidä¸”æ²¡æœ‰å‚æ•°çš„å‡½æ•°ã€‚</p><p>(void(*)())0ï¼šè¡¨ç¤ºå°†0å¼ºåˆ¶è½¬æ¢æˆvoid(*)()è¿™ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹ã€‚</p><p>(*(void(*)())0)ï¼šè·å–åœ°å€0å¼€å§‹çš„å†…å­˜ä¸­çš„ä¸€æ®µå†…å®¹(è§£å¼•ç”¨)ã€‚</p><p>(*(void(*)())0)()ï¼šå‡½æ•°è°ƒç”¨ã€‚</p></li><li><p>å‡½æ•°æŒ‡é’ˆæ•°ç»„</p><pre><code class="c">char* (*pf1)(char *p);        // pf1æ˜¯ä¸€ä¸ªæŒ‡å‘å‚æ•°æ˜¯char *ç±»å‹ï¼Œè¿”å›å€¼æ—¶char*çš„å‡½æ•°çš„æŒ‡é’ˆchar* (*pf2[3])(char *p);    // pf2æ˜¯å‡½æ•°æŒ‡é’ˆæ•°ç»„</code></pre><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;string.h&gt;char * func1(char *p){    printf(&quot;%s\n&quot;,p);    return p;}char * func2(char *p){    printf(&quot;%s\n&quot;,p);    return p;}char * func3(char *p){    printf(&quot;%s\n&quot;,p);    return p;}int main(){    char *(*pf[3])(char *);    pf[0]=func1;    pf[1]=func2;    pf[2]=func3;    pf[0](&quot;func1&quot;);    pf[1](&quot;func2&quot;);    pf[2](&quot;func3&quot;);    return 0;}</code></pre></li><li><p>å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆ</p><pre><code class="c">char* (*pf2[3])(char *p);    // pf2æ˜¯å‡½æ•°æŒ‡é’ˆæ•°ç»„char* (*(*pf2)[3])(char *p);    // pf2æ˜¯å‡½æ•°æŒ‡é’ˆæ•°ç»„æŒ‡é’ˆ</code></pre></li><li><p>å¸¸è§å†…å­˜é”™è¯¯ä»¥åŠå¯¹ç­–</p><ul><li><p>æŒ‡é’ˆæ²¡æœ‰æŒ‡å‘ä¸€å—åˆæ³•çš„å†…å­˜</p><ul><li><p>ç»“æ„ä½“æˆå‘˜æŒ‡é’ˆæœªåˆå§‹åŒ–</p><pre><code class="c">struct student{    char *name;    int score;}stu,*pstu;int main(){    strcpy(stu.name,&quot;jim&quot;);    stu.score=99;    return 0;}</code></pre><p>åœ¨å®ä¾‹åŒ–stuæ—¶ï¼Œç»™nameåˆ†é…äº†å››å­—èŠ‚çš„å†…å­˜ï¼Œä½†å¹¶æ²¡æœ‰æŒ‡å‘åˆæ³•çš„åœ°å€ã€‚è°ƒç”¨strcpyå¾€æ‰€æŒ‡å‘çš„å†…å­˜æ‹·è´â€jimâ€ï¼Œè¿™å—å†…å­˜nameæŒ‡é’ˆæ ¹æœ¬å°±æ— æƒè®¿é—®ï¼Œå¯¼è‡´å‡ºé”™ã€‚</p><pre><code class="c">#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;struct student{    char *name;    int score;}stu,*pstu;int main(){    stu.name = (char*)malloc(sizeof(char));    strcpy(stu.name,&quot;jim&quot;);    stu.score=99;    printf(&quot;%s\n&quot;,stu.name);    free(pstu);    return 0;}</code></pre></li><li><p>æ²¡æœ‰ä¸ºç»“æ„ä½“æŒ‡é’ˆåˆ†é…è¶³å¤Ÿçš„å†…å­˜</p></li><li><p>å‡½æ•°å…¥å£æ ¡éªŒ</p><pre><code class="c">assert(NULL!=p); // æ˜¯ä¸€ä¸ªå®è€Œéå‡½æ•°</code></pre></li></ul></li><li><p>ä¸ºæŒ‡é’ˆåˆ†é…çš„å†…å­˜å¤ªå°</p></li><li><p>å†…å­˜åˆ†é…æˆåŠŸï¼Œä½†æœªåˆå§‹åŒ–</p><pre><code class="c">int i = 10;char *p = (char *)malloc(sizeof(char));//åœ¨ä¸ç¡®å®šå˜é‡åˆå§‹å€¼çš„æ—¶å€™å¯ä»¥åˆå§‹åŒ–ä¸º0æˆ–è€…NULLint i = 0;char *p = NULL;//æˆ–è€…ä½¿ç”¨memset(èµ·å§‹åœ°å€,è¦è¢«è®¾ç½®çš„å€¼,è¦è¢«è®¾ç½®çš„å†…å­˜å¤§å°);int a[10];memset(a,0,sizeof(a));</code></pre></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å®šä¹‰å’Œå£°æ˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å®šä¹‰ï¼šç¼–è¯‘å™¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸ºè¿™ä¸ªå¯¹è±¡åˆ†é…ä¸€å—å†…å­˜å¹¶ç»™å®ƒå–ä¸€ä¸ªåå­—ï¼Œåå­—å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å˜é‡æˆ–å¯¹è±¡åã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;int a;&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="book" scheme="http://blog.3amupupup.online/tags/book/"/>
    
  </entry>
  
  <entry>
    <title>CppPrimer</title>
    <link href="http://blog.3amupupup.online/2021/03/18/CppPrimer/"/>
    <id>http://blog.3amupupup.online/2021/03/18/CppPrimer/</id>
    <published>2021-03-18T03:09:52.068Z</published>
    <updated>2021-03-18T03:09:52.068Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç¬¬ä¸ƒç« -ç±»"><a href="#ç¬¬ä¸ƒç« -ç±»" class="headerlink" title="ç¬¬ä¸ƒç«  ç±»"></a>ç¬¬ä¸ƒç«  ç±»</h4><p>ç±»ä½œç”¨åŸŸå’Œæˆå‘˜å‡½æ•°ï¼š</p><p>ç¼–è¯‘å™¨åˆ†ä¸¤æ­¥å¤„ç†ç±»ï¼šé¦–å…ˆç¼–è¯‘æˆå‘˜çš„å£°æ˜ï¼Œç„¶åæ‰è½®åˆ°æˆå‘˜å‡½æ•°ä½“(å¦‚æœæœ‰çš„è¯)ã€‚å› æ­¤ï¼Œæˆå‘˜å‡½æ•°ä½“å¯ä»¥éšæ„ä½¿ç”¨ç±»ä¸­çš„å…¶å®ƒæˆå‘˜è€Œæ— éœ€åœ¨æ„è¿™äº›æˆå‘˜å‡ºç°çš„æ¬¡åºã€‚</p><p>IOç±»å±äºä¸èƒ½è¢«æ‹·è´çš„ç±»å‹ï¼Œå› æ­¤åªèƒ½é€šè¿‡å¼•ç”¨ä¼ é€’ã€‚</p><p>æ¯ä¸ªç±»éƒ½åˆ†åˆ«å®šä¹‰äº†å®ƒçš„å¯¹è±¡è¢«åˆå§‹åŒ–çš„æ–¹å¼ï¼Œç±»é€šè¿‡ä¸€ä¸ªæˆ–è€…å‡ ä¸ªç‰¹æ®Šçš„æˆå‘˜å‡½æ•°æ¥æ§åˆ¶å…¶å¯¹è±¡çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè¢«ç§°ä¸ºæ„é€ å‡½æ•°ã€‚æ„é€ å‡½æ•°çš„ä»»åŠ¡æ˜¯åˆå§‹åŒ–ç±»å¯¹è±¡çš„æ•°æ®æˆå‘˜ï¼Œæ— è®ºä½•æ—¶åªè¦ç±»çš„å¯¹è±¡è¢«åˆ›å»ºï¼Œå°±ä¼šæ‰§è¡Œæ„é€ å‡½æ•°ã€‚</p><p>æ„é€ å‡½æ•°ä¸èƒ½è¢«å£°æ˜æˆconstï¼Œå½“åˆ›å»ºä¸€ä¸ªconstå¯¹è±¡æ—¶ï¼Œç›´åˆ°æ„é€ å‡½æ•°å®Œæˆåˆå§‹åŒ–è¿‡ç¨‹ï¼Œå¯¹è±¡æ‰èƒ½çœŸæ­£å–å¾—å…¶â€œå¸¸é‡â€å±æ€§ã€‚å› æ­¤ï¼Œæ„é€ å‡½æ•°åœ¨constå¯¹è±¡çš„æ„é€ è¿‡ç¨‹ä¸­å¯ä»¥å‘å…¶å†™å€¼ã€‚</p><p>å¦‚æœç±»æ²¡æœ‰æ˜¾ç¤ºçš„å®šä¹‰æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šä¸ºæˆ‘ä»¬éšå¼çš„å®šä¹‰ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚</p><p>æŸäº›ç±»ä¸èƒ½ä¾èµ–äºåˆæˆçš„é»˜è®¤æ„é€ å‡½æ•°ï¼š</p><ol><li>åªæœ‰å½“ç±»æ²¡æœ‰å£°æ˜ä»»ä½•æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šè‡ªåŠ¨çš„ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ã€‚</li><li>åˆæˆçš„é»˜è®¤æ„é€ å‡½æ•°æœ‰å¯èƒ½æ‰§è¡Œé”™è¯¯çš„æ“ä½œã€‚å¦‚æœå®šä¹‰åœ¨å—ä¸­çš„å†…ç½®ç±»å‹æˆ–ç¬¦åˆç±»å‹(æ¯”å¦‚æ•°ç»„å’ŒæŒ‡é’ˆ)çš„å¯¹è±¡è¢«é»˜è®¤åˆå§‹åŒ–ï¼Œåˆ™ä»–ä»¬çš„å€¼å°†æ˜¯æœªå®šä¹‰çš„ã€‚è¯¥å‡†åˆ™åŒæ ·é€‚ç”¨äºé»˜è®¤åˆå§‹åŒ–çš„å†…ç½®ç±»å‹æˆå‘˜ã€‚å› æ­¤ï¼Œå‡½æ•°å†…ç½®ç±»å‹æˆ–è€…å¤åˆç±»å‹æˆå‘˜çš„ç±»åº”è¯¥åœ¨ç±»çš„å†…éƒ¨åˆå§‹åŒ–è¿™äº›æˆå‘˜ï¼Œæˆ–è€…å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚å¦åˆ™ï¼Œç”¨æˆ·åœ¨åˆ›å»ºç±»å¯¹è±¡æ—¶å°±å¯èƒ½å¾—åˆ°æœªå®šä¹‰çš„å€¼ã€‚</li><li>ç¼–è¯‘å™¨ä¸èƒ½ä¸ºæŸäº›ç±»åˆæˆé»˜è®¤çš„æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼šä¸€ä¸ªç±»ä¸­åŒ…å«å¦ä¸€ä¸ªç±»ç±»å‹çš„æˆå‘˜ä¸”è¿™ä¸ªæˆå‘˜æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;ç¬¬ä¸ƒç« -ç±»&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸ƒç« -ç±»&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸ƒç«  ç±»&quot;&gt;&lt;/a&gt;ç¬¬ä¸ƒç«  ç±»&lt;/h4&gt;&lt;p&gt;ç±»ä½œç”¨åŸŸå’Œæˆå‘˜å‡½æ•°ï¼š&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘å™¨åˆ†ä¸¤æ­¥å¤„ç†ç±»ï¼šé¦–å…ˆç¼–è¯‘æˆå‘˜çš„å£°æ˜ï¼Œç„¶åæ‰è½®åˆ°æˆå‘˜å‡½æ•°ä½“(å¦‚æœæœ‰çš„è¯)ã€‚å› æ­¤</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>mongo</title>
    <link href="http://blog.3amupupup.online/2021/03/18/mongo/"/>
    <id>http://blog.3amupupup.online/2021/03/18/mongo/</id>
    <published>2021-03-18T03:09:52.068Z</published>
    <updated>2021-03-18T03:09:52.069Z</updated>
    
    <content type="html"><![CDATA[<h5 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h5><h6 id="mongoå¤‡ä»½-mongoexportå¯¼å‡ºjsonæ–‡ä»¶"><a href="#mongoå¤‡ä»½-mongoexportå¯¼å‡ºjsonæ–‡ä»¶" class="headerlink" title="mongoå¤‡ä»½: mongoexportå¯¼å‡ºjsonæ–‡ä»¶"></a>mongoå¤‡ä»½: mongoexportå¯¼å‡ºjsonæ–‡ä»¶</h6><pre><code class="shell">./mongoexport --host 0.0.0.0:65535 -u username -p password --authenticationDatabase admin -d database -c collection -o file.json</code></pre><h6 id="mongoæ¢å¤-mongoimportå¯¼å…¥jsonæ–‡ä»¶"><a href="#mongoæ¢å¤-mongoimportå¯¼å…¥jsonæ–‡ä»¶" class="headerlink" title="mongoæ¢å¤: mongoimportå¯¼å…¥jsonæ–‡ä»¶"></a>mongoæ¢å¤: mongoimportå¯¼å…¥jsonæ–‡ä»¶</h6><pre><code class="shell">./mongoimport --host 0.0.0.0:65535 -u username -p password  --authenticationDatabase admin  -d database -c collection --file file.json</code></pre><h6 id="åˆ›å»ºé›†åˆ"><a href="#åˆ›å»ºé›†åˆ" class="headerlink" title="åˆ›å»ºé›†åˆ:"></a>åˆ›å»ºé›†åˆ:</h6><pre><code class="sql">db.createCollection()</code></pre><h6 id="æŸ¥çœ‹åº“ä¿¡æ¯"><a href="#æŸ¥çœ‹åº“ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹åº“ä¿¡æ¯:"></a>æŸ¥çœ‹åº“ä¿¡æ¯:</h6><pre><code class="sql">db.stats();</code></pre><h6 id="æŸ¥çœ‹é›†åˆä¿¡æ¯"><a href="#æŸ¥çœ‹é›†åˆä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹é›†åˆä¿¡æ¯:"></a>æŸ¥çœ‹é›†åˆä¿¡æ¯:</h6><pre><code class="sql">db.collection.stats()</code></pre><hr><h5 id="mongoé‡è§çš„ä¸€äº›é—®é¢˜"><a href="#mongoé‡è§çš„ä¸€äº›é—®é¢˜" class="headerlink" title="mongoé‡è§çš„ä¸€äº›é—®é¢˜"></a>mongoé‡è§çš„ä¸€äº›é—®é¢˜</h5><h6 id="åˆ é™¤æ•°æ®ï¼Œç£ç›˜ç©ºé—´ä¸é‡Šæ”¾"><a href="#åˆ é™¤æ•°æ®ï¼Œç£ç›˜ç©ºé—´ä¸é‡Šæ”¾" class="headerlink" title="åˆ é™¤æ•°æ®ï¼Œç£ç›˜ç©ºé—´ä¸é‡Šæ”¾:"></a>åˆ é™¤æ•°æ®ï¼Œç£ç›˜ç©ºé—´ä¸é‡Šæ”¾:</h6><p><code>db.collection.remove({}, {multi: true})</code>å‘½ä»¤åˆ é™¤æ–‡æ¡£ï¼Œåˆ é™¤ä¹‹åä¸ä¼šå°†è¢«åˆ é™¤æ•°æ®çš„ç£ç›˜ç©ºé—´å½’è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯å½“æœ‰æ–°æ•°æ®æ’å…¥æ—¶mongoèƒ½é‡æ–°ä½¿ç”¨è¿™å—ç©ºé—´ã€‚(<a href="https://help.aliyun.com/document_detail/96530.html?spm=a2c4g.11186623.2.13.6cd05d5dLZVLZJ" target="_blank" rel="noopener">è§£å†³åŠæ³•</a>)</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;å¸¸ç”¨å‘½ä»¤&quot;&gt;&lt;a href=&quot;#å¸¸ç”¨å‘½ä»¤&quot; class=&quot;headerlink&quot; title=&quot;å¸¸ç”¨å‘½ä»¤&quot;&gt;&lt;/a&gt;å¸¸ç”¨å‘½ä»¤&lt;/h5&gt;&lt;h6 id=&quot;mongoå¤‡ä»½-mongoexportå¯¼å‡ºjsonæ–‡ä»¶&quot;&gt;&lt;a href=&quot;#mongoå¤‡ä»½-mongoexpor</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="http://blog.3amupupup.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="mongodb" scheme="http://blog.3amupupup.online/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>tcp:ip</title>
    <link href="http://blog.3amupupup.online/2021/03/18/tcp:ip/"/>
    <id>http://blog.3amupupup.online/2021/03/18/tcp:ip/</id>
    <published>2021-03-18T03:09:52.067Z</published>
    <updated>2021-03-18T03:09:52.067Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h4><h5 id="1-2-åˆ†å±‚"><a href="#1-2-åˆ†å±‚" class="headerlink" title="1.2 åˆ†å±‚"></a>1.2 åˆ†å±‚</h5><p>tcp/ipé€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå››å±‚åè®®ç³»ç»Ÿï¼š</p><ol><li><p>é“¾è·¯å±‚</p><p>ä¹Ÿç§°ä½œæ•°æ®é“¾è·¯å±‚æˆ–ç½‘ç»œæ¥å£å±‚ã€‚é€šå¸¸åŒ…æ‹¬æ“ä½œç³»ç»Ÿä¸­çš„è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œè®¡ç®—æœºä¸­å¯¹åº”çš„ç½‘ç»œæ¥å£å¡ã€‚å®ƒä»¬ä¸€èµ·å¤„ç†ä¸ç”µç¼†ï¼ˆæˆ–è€…ä»»ä½•ä¼ è¾“ä»‹è´¨ï¼‰çš„ç‰©ç†æ¥å£ç»†èŠ‚ã€‚</p></li><li><p>ç½‘ç»œå±‚</p><p>ä¹Ÿç§°ä¸ºäº’è”ç½‘å±‚ï¼Œå¤„ç†åˆ†ç»„åœ¨ç½‘ç»œä¸­çš„æ´»åŠ¨ã€‚ç½‘ç»œå±‚IPæä¾›ä¸€ç§ä¸å¯é çš„æœåŠ¡ï¼Œå®ƒåªæ˜¯å°½å¯èƒ½çš„å¿«åœ°æŠŠæ•°æ®åŒ…ä»æºç»“ç‚¹é€åˆ°ç›®çš„ç»“ç‚¹ï¼Œä½†æ˜¯å¹¶ä¸æä¾›ä»»ä½•å¯é æ€§ä¿è¯ã€‚TCPåœ¨ä¸å¯é çš„IPå±‚ä¸Šæä¾›äº†ä¸€ä¸ªå¯é çš„è¿è¾“å±‚ï¼ˆTCPé‡‡ç”¨è¶…æ—¶é‡ä¼ ã€å‘é€å’Œæ¥æ”¶ç«¯çš„ç¡®è®¤åˆ†ç»„ç­‰æœºåˆ¶ï¼‰ã€‚ICMPæ˜¯IPåè®®çš„é™„å±åè®®ï¼ŒIPå±‚ç”¨å®ƒæ¥ä¸å…¶å®ƒä¸»æœºæˆ–è·¯ç”±å™¨äº¤æ¢é”™è¯¯æŠ¥æ–‡å’Œå…¶å®ƒé‡è¦ä¿¡æ¯ã€‚</p></li><li><p>è¿è¾“å±‚</p><p>ä¸ºä¸¤å°ä¸»æœºä¸Šçš„åº”ç”¨æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡ã€‚TCP/IPåè®®æ—ä¸­æœ‰ä¸¤ä¸ªäº’ä¸ç›¸åŒçš„ä¼ è¾“åè®®ï¼štcpï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰å’Œudpï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ã€‚è™½ç„¶TCPä½¿ç”¨ä¸å¯é çš„IPæœåŠ¡ï¼Œä½†æ˜¯å®ƒç¼ºæä¾›ä¸€ç§å¯é çš„è¿è¾“å±‚æœåŠ¡ã€‚UDPæ˜¯ä¸å¯é çš„ï¼Œå®ƒä¸èƒ½ä¿è¯æ•°æ®å®‰å…¨æ— è¯¯çš„åˆ°è¾¾æœ€ç»ˆç›®çš„åœ°ã€‚</p></li><li><p>åº”ç”¨å±‚</p><p>è´Ÿè´£å¤„ç†ç‰¹å®šçš„åº”ç”¨ç¨‹åºç»†èŠ‚ã€‚</p></li></ol><h5 id="1-4-äº’è”ç½‘çš„åœ°å€"><a href="#1-4-äº’è”ç½‘çš„åœ°å€" class="headerlink" title="1.4 äº’è”ç½‘çš„åœ°å€"></a>1.4 äº’è”ç½‘çš„åœ°å€</h5><p>Aã€Bã€Cç±»ä¸ºå•†ç”¨</p><p><img src="../../../Desktop/source/image/image-20210207235709211.png" alt="äº”ç±»äº’è”ç½‘åœ°å€"></p><h5 id="1-6-å°è£…"><a href="#1-6-å°è£…" class="headerlink" title="1.6 å°è£…"></a>1.6 å°è£…</h5><p><img src="../../../Desktop/source/image/image-20210208000359450.png" alt="æ•°æ®åœ¨åè®®æ ˆä¸­çš„å°è£…"></p><h5 id="1-7-åˆ†ç”¨"><a href="#1-7-åˆ†ç”¨" class="headerlink" title="1.7 åˆ†ç”¨"></a>1.7 åˆ†ç”¨</h5><p><img src="../../../Desktop/source/image/image-20210208000627638.png" alt="åˆ†ç”¨è¿‡ç¨‹"></p><h5 id="1-9-ç«¯å£å·"><a href="#1-9-ç«¯å£å·" class="headerlink" title="1.9 ç«¯å£å·"></a>1.9 ç«¯å£å·</h5><p>TCPå’ŒUDPé‡‡ç”¨16bitä½çš„ç«¯å£å·æ¥è¯†åˆ«åº”ç”¨ç¨‹åºã€‚</p><p>å®¢æˆ·ç«¯é€šå¸¸å¯¹å®ƒä½¿ç”¨çš„ç«¯å£å·å¹¶ä¸å…³å¿ƒï¼Œåªéœ€è¦ä¿è¯ä½¿ç”¨çš„ç«¯å£å·åœ¨æœ¬æœºæ˜¯å”¯ä¸€å°±è¡Œäº†ã€‚å®¢æˆ·ç«¯ç«¯å£å·åˆç§°ä¸´æ—¶ç«¯å£å·ã€‚</p><h4 id="ç¬¬äºŒç« -é“¾è·¯å±‚"><a href="#ç¬¬äºŒç« -é“¾è·¯å±‚" class="headerlink" title="ç¬¬äºŒç«  é“¾è·¯å±‚"></a>ç¬¬äºŒç«  é“¾è·¯å±‚</h4><p>é“¾è·¯å±‚ä¸»è¦æœ‰ä¸‰ä¸ªç›®çš„ï¼š</p><ul><li>ä¸ºIPæ¨¡å—æ¥å—å’Œå‘é€æ•°æ®æŠ¥</li><li>ä¸ºARPæ¨¡å—å‘é€ARPè¯·æ±‚å’Œæ¥å—ARPåº”ç­”</li><li>ä¸ºRARPå‘é€RARPè¯·æ±‚å’Œæ¥å—RARPåº”ç­”</li></ul><h5 id="2-7-ç¯å›æ¥å£"><a href="#2-7-ç¯å›æ¥å£" class="headerlink" title="2.7 ç¯å›æ¥å£"></a>2.7 ç¯å›æ¥å£</h5><p>ä½¿è¿è¡Œåœ¨åŒä¸€å°ä¸»æœºä¸Šçš„å®¢æˆ·ç«¯ç¨‹åºå’ŒæœåŠ¡ç«¯ç¨‹åºèƒ½æŠ•é€šè¿‡TCP/IPè¿›è¡Œé€šä¿¡ã€‚ä¸€ä¸ªä¼ ç»™ç¯å›æ¥å£çš„IPæ•°æ®æŠ¥ä¸èƒ½åœ¨ä»»ä½•ç½‘ç»œä¸Šå‡ºç°ã€‚</p><h4 id="ç¬¬ä¸‰ç« -IP"><a href="#ç¬¬ä¸‰ç« -IP" class="headerlink" title="ç¬¬ä¸‰ç«  IP"></a>ç¬¬ä¸‰ç«  IP</h4><h5 id="3-2-IPé¦–éƒ¨"><a href="#3-2-IPé¦–éƒ¨" class="headerlink" title="3.2 IPé¦–éƒ¨"></a>3.2 IPé¦–éƒ¨</h5><h4 id=""><a href="#" class="headerlink" title=""></a><img src="../../../Desktop/source/image/image-20210207155438038.png" alt="IPæŠ¥å¤´"></h4><p>ç‰ˆæœ¬å·å­—æ®µï¼šåè®®ç‰ˆæœ¬å·ï¼Œå½“å‰æ˜¯ipv4ã€‚</p><p>é¦–éƒ¨é•¿åº¦å­—æ®µï¼š4ä¸ªæ¯”ç‰¹ä½ï¼Œèƒ½è¡¨ç¤ºèŒƒå›´æ˜¯0~15ï¼Œæ¯ä¸ªé•¿åº¦å•ä½ä¸º4å­—èŠ‚ï¼Œæ‰€ä»¥é¦–éƒ¨çš„æœ€å¤§é•¿åº¦ä¸º60å­—èŠ‚ã€‚</p><p>TOS:</p><p>æ€»é•¿åº¦å­—æ®µï¼šæ•´ä¸ªipæ•°æ®æŠ¥çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè¯¥å­—æ®µé•¿ä¸º16ä¸ªæ¯”ç‰¹ï¼Œç”±æ­¤å¯çŸ¥è¯¥å­—æ®µè¡¨ç¤ºçš„æ•°å€¼èŒƒå›´æ˜¯0~65535ï¼Œä¹Ÿè¯´æ˜ä¸€ä¸ªipæŠ¥æ–‡çš„æœ€å¤§é•¿åº¦æ˜¯65535å­—èŠ‚ï¼‰ã€‚åˆ©ç”¨é¦–éƒ¨é•¿åº¦å­—æ®µå’Œæ€»é•¿åº¦å­—æ®µå°±å¯ä»¥çŸ¥é“ipæ•°æ®æŠ¥ä¸­æ•°æ®å†…å®¹çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ï¼ˆé¦–éƒ¨é•¿åº¦+1 ï¼Œ æ€»é•¿åº¦-é¦–éƒ¨é•¿åº¦ï¼‰ã€‚</p><p>æ ‡è¯†å­—æ®µï¼š</p><p>æ ‡å¿—å­—æ®µï¼šå”¯ä¸€æ ‡è¯†ä¸»æœºå‘é€çš„æ¯ä¸€ä»½æ•°æ®æŠ¥ï¼Œé€šå¸¸æ¯å‘é€ä¸€æ¬¡æŠ¥æ–‡å®ƒçš„å€¼å°±ä¼šå¢åŠ 1ã€‚</p><p>ç‰‡åç§»å­—æ®µï¼š</p><p>TTLç”Ÿå­˜æ—¶é—´å­—æ®µï¼šè¡¨ç¤ºæ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤šè·¯ç”±å™¨æ•°ã€‚TTLé€šå¸¸ç”±æºä¸»æœºè®¾ç½®ï¼ˆ32æˆ–64ï¼‰ï¼Œç»è¿‡ä¸€ä¸ªå¤„ç†å®ƒçš„è·¯ç”±å™¨ï¼Œttlçš„å€¼å°±å‡å»1ï¼Œå½“è¯¥å­—æ®µä¸º0æ—¶ï¼Œæ•°æ®æŠ¥è¢«ä¸¢å¼ƒï¼Œå¹¶å‘é€ICMPæŠ¥æ–‡é€šçŸ¥æºä¸»æœºã€‚</p><p>åè®®å­—æ®µï¼š</p><p>é¦–éƒ¨æ ¡éªŒå’Œå­—æ®µï¼šæ ¹æ®ipé¦–éƒ¨è®¡ç®—çš„æ ¡éªŒå’Œç ï¼ˆä¸å¯¹é¦–éƒ¨åé¢çš„æ•°æ®è¿›è¡Œè®¡ç®—ï¼‰</p><p>é€‰é¡¹å­—æ®µï¼šä»¥32bitä½œä¸ºç•Œé™ï¼Œæœ‰å¿…è¦çš„æ—¶å€™æ’å…¥0ä½œä¸ºå¡«å……å­—èŠ‚ï¼Œä»¥ä¿è¯IPé¦–éƒ¨å§‹ç»ˆæ˜¯32bitçš„æ•´æ•°å€</p><h5 id="3-3-è·¯ç”±é€‰æ‹©"><a href="#3-3-è·¯ç”±é€‰æ‹©" class="headerlink" title="3.3 è·¯ç”±é€‰æ‹©"></a>3.3 è·¯ç”±é€‰æ‹©</h5><p>IPè·¯ç”±é€‰æ‹©æ˜¯ç®€å•çš„ï¼Œç‰¹åˆ«å¯¹äºä¸»æœºæ¥è¯´ï¼Œå¦‚æœç›®çš„ä¸»æœºä¸æºä¸»æœºç›´æ¥ç›¸è¿æˆ–è€…éƒ½åœ¨ä¸€ä¸ªå…±äº«ç½‘ç»œä¸Šï¼ˆä»¥å¤ªç½‘æˆ–è€…ä»¤ç‰Œç¯ç½‘ï¼‰ï¼Œé‚£ä¹ˆIPæ•°æ®å°±ç›´æ¥å‘é€åˆ°ç›®çš„ä¸»æœºä¸Šã€‚å¦åˆ™ï¼Œä¸»æœºæŠŠæ•°æ®æŠ¥å‘å¾€é»˜è®¤çš„è·¯ç”±å™¨ä¸Šï¼Œç”±è·¯ç”±å™¨è½¬å‘è¯¥æ•°æ®æŠ¥ã€‚</p><p>IPå±‚åœ¨å†…å­˜ä¸­å­˜åœ¨è·¯ç”±è¡¨ã€‚å½“æ”¶åˆ°ä¸€ä»½æ•°æ®æŠ¥å¹¶è¿›è¡Œè½¬å‘æ—¶ï¼Œéƒ½è¦å¯¹è¯¥è¡¨è¿›è¡Œæœç´¢ã€‚å½“æ•°æ®æŠ¥æ¥è‡ªæŸä¸ªç½‘ç»œæ¥å£æ—¶ï¼ŒIPé¦–å…ˆæ£€æŸ¥ç›®çš„IPåœ°å€æ˜¯å¦ä¸ºæœ¬æœºçš„IPåœ°å€ä¹‹ä¸€æˆ–è€…IPå¹¿æ’­åœ°å€ã€‚å¦‚æœæ˜¯ï¼Œæ•°æ®æŠ¥å°±ä¼šè¢«é€åˆ°ç”±IPé¦–éƒ¨åè®®å­—æ®µæ‰€æŒ‡å®šçš„åè®®æ¨¡å—è¿›è¡Œå¤„ç†ã€‚å¦‚æœä¸æ˜¯ä¸”IPå±‚è¢«è®¾ç½®ä¸ºè·¯ç”±å™¨çš„åŠŸèƒ½é‚£ä¹ˆå°±å¯¹æ•°æ®æŠ¥è¿›è¡Œè½¬å‘ï¼Œå¦åˆ™æ•°æ®æŠ¥è¢«ä¸¢å¼ƒã€‚</p><h6 id="è·¯ç”±è¡¨"><a href="#è·¯ç”±è¡¨" class="headerlink" title="è·¯ç”±è¡¨"></a>è·¯ç”±è¡¨</h6><ul><li><p>ç›®çš„IPåœ°å€(Destination)</p><p>å¯ä»¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸»æœºåœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç½‘ç»œåœ°å€ã€‚å›¾ä¸­ç¬¬ä¸€æ¡æ˜¯é»˜è®¤è§„åˆ™(0.0.0.0)ï¼Œä»…å½“åªæœ‰ä¸€æ¡å¯ç”¨è·¯å¾„æ—¶æ‰åŒ¹é…ã€‚</p></li><li><p>ä¸‹ä¸€ç«™ï¼ˆä¸‹ä¸€è·³ï¼‰è·¯ç”±å™¨çš„IPåœ°å€ï¼Œä¸‹ä¸€ç«™è·¯ç”±å™¨æ˜¯æŒ‡ä¸€ä¸ªç›´æ¥ç›¸è¿çš„ç½‘ç»œä¸Šçš„è·¯ç”±å™¨ï¼Œé€šè¿‡å®ƒå¯ä»¥è½¬å‘æ•°æ®æŠ¥ã€‚</p></li><li><p>æ ‡å¿—</p></li><li><p>ä¸ºæ•°æ®æŠ¥çš„ä¼ è¾“æŒ‡å®šä¸€ä¸ªç½‘ç»œæ¥å£ã€‚</p></li></ul><h6 id="IPè·¯ç”±é€‰æ‹©åŠŸèƒ½"><a href="#IPè·¯ç”±é€‰æ‹©åŠŸèƒ½" class="headerlink" title="IPè·¯ç”±é€‰æ‹©åŠŸèƒ½"></a>IPè·¯ç”±é€‰æ‹©åŠŸèƒ½</h6><ol><li>æœç´¢è·¯ç”±è¡¨ï¼Œå¯»æ‰¾ä¸ç›®çš„IPåœ°å€å®Œå…¨åŒ¹é…çš„è¡¨ç›®ï¼ˆç½‘ç»œå·å’Œä¸»æœºå·éƒ½è¦åŒ¹é…ï¼‰ã€‚</li><li>æœç´¢è·¯ç”±è¡¨ï¼Œå¯»æ‰¾èƒ½ä¸ç›®çš„ç½‘ç»œå·åŒ¹é…çš„è¡¨ç›®ã€‚å¦‚æœæ‰¾åˆ°åˆ™æŠŠæŠ¥æ–‡å‘é€ç»™è¯¥è¡¨ç›®æŒ‡å®šçš„ä¸‹ä¸€è·³è·¯ç”±å™¨æˆ–è€…ç›´æ¥è¿æ¥çš„ç½‘ç»œæ¥å£ã€‚</li><li>æœç´¢è·¯ç”±è¡¨ï¼Œå¯»æ‰¾æ ‡å¿—ä¸ºâ€œé»˜è®¤ï¼ˆdefaultï¼‰â€çš„è¡¨ç›®ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œåˆ™æŠŠæŠ¥æ–‡å‘é€ç»™æ”¹è¡¨ç›®æŒ‡å®šçš„ä¸‹ä¸€è·³è·¯ç”±å™¨ã€‚</li><li>å®Œæ•´çš„ä¸»æœºåœ°å€åŒ¹é…åœ¨ç½‘ç»œå·åŒ¹é…ä¹‹å‰æ‰§è¡Œã€‚åªæœ‰å½“ä»–ä»¬éƒ½å¤±è´¥åæ‰ä¼šé€‰æ‹©é»˜è®¤è·¯ç”±ã€‚</li><li>ä¸ºç½‘ç»œæŒ‡å®šä¸€ä¸ªè·¯ç”±å™¨ï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸€ä¸ªä¸»æœºéƒ½æŒ‡å®šä¸€ä¸ªè·¯ç”±å™¨ï¼Œå¯ä»¥æå¤§ç¼©å°è·¯ç”±è¡¨çš„è§„æ¨¡ã€‚</li></ol><h5 id="3-4-å­ç½‘å¯»å€"><a href="#3-4-å­ç½‘å¯»å€" class="headerlink" title="3.4 å­ç½‘å¯»å€"></a>3.4 å­ç½‘å¯»å€</h5><p><img src="../../../Desktop/source/image/image-20210208163443250.png" alt="å­ç½‘å¯»å€"></p><p>æ‰€æœ‰ä¸»æœºéƒ½è¦æ±‚æ”¯æŒå­ç½‘ç¼–å€ã€‚ä¸å†æ˜¯æŠŠIPåœ°å€çœ‹æˆå•çº¯çš„ä¸€ä¸ªç½‘ç»œå·å’Œä¸€ä¸ªä¸»æœºå·ç»„æˆï¼Œè€Œæ˜¯æŠŠä¸»æœºå·å†åˆ†æˆä¸€ä¸ªå­ç½‘å·å’Œä¸€ä¸ªä¸»æœºå·ã€‚åŸå› ï¼šAç±»å’ŒBç±»åœ°å€ä¸ºä¸»æœºå·åˆ†é…äº†å¤ªå¤šç©ºé—´ï¼ŒAç±»ï¼š2<sup>24</sup>-2ï¼ˆ24ä½ä¸»æœºå·:2<sup>24</sup>ï¼Œå…¨0å’Œå…¨1æ˜¯æ— æ•ˆçš„ï¼Œæ‰€ä»¥å‡å»2ï¼‰ï¼ŒBç±»ï¼š2<sup>16</sup>-2ï¼Œäº‹å®ä¸Šä¸€ä¸ªç½‘ç»œå®‰æ’ä¸äº†è¿™ä¹ˆå¤šä¸»æœºã€‚</p><p>ä¾‹å¦‚ä¸Šå›¾ä¸­çš„Bç±»åœ°å€ï¼šå¯ä»¥å°†ä¸»æœºå·åˆ’åˆ†ä¸º8bitçš„å­ç½‘å·ï¼Œ8bitçš„ä¸»æœºå·ã€‚ä¹Ÿå°±æ˜¯è¯´å°†ç½‘ç»œå·æ˜¯140.252çš„IPåœ°å€åˆ’åˆ†ä¸º254ä¸ªå­ç½‘ï¼Œæ¯ä¸ªå­ç½‘å¯ä»¥æœ‰254å°ä¸»æœºã€‚</p><h5 id="3-5-å­ç½‘æ©ç "><a href="#3-5-å­ç½‘æ©ç " class="headerlink" title="3.5 å­ç½‘æ©ç "></a>3.5 å­ç½‘æ©ç </h5><p>å­ç½‘æ©ç ç”¨äºç¡®å®šIPåœ°å€ä¸­å¤šå°‘æ¯”ç‰¹ä½ç”¨äºå­ç½‘å·å¤šå°‘æ¯”ç‰¹ä½ç”¨äºä¸»æœºå·ã€‚</p><p>æ©ç æ˜¯ä¸€ä¸ª32bitçš„å€¼ï¼Œå…¶ä¸­å€¼ä¸º1çš„ç•™ç»™ç½‘ç»œå·å’Œå­ç½‘å·ï¼Œä¸º0çš„æ¯”ç‰¹ç•™ç»™ä¸»æœºå·ã€‚</p><pre><code class="txt">10101100 00010000 00000000 00000000 IPç½‘æ®µ: 172.16.0.011111111 11111111 00000000 00000000 æ©ç : 1610101100 00010000 00000000 00000000 IPç½‘æ®µ: 172.16.16.011111111 11111111 11110000 00000000 æ©ç : 20</code></pre><p>ç»™å®šIPåœ°å€å’Œå­ç½‘æ©ç ä¹‹åï¼Œä¸»æœºå°±å¯ä»¥ç¡®å®šIPæ•°æ®æŠ¥çš„ç›®çš„åœ°æ˜¯ï¼š</p><ol><li>æœ¬å­ç½‘ä¸Šçš„ä¸»æœº</li><li>æœ¬ç½‘ç»œä¸­å…¶å®ƒå­ç½‘ä¸Šçš„ä¸»æœº</li><li>å…¶å®ƒç½‘ç»œä¸Šçš„ä¸»æœº</li></ol><h4 id="ç¬¬å…­ç« -ICMP"><a href="#ç¬¬å…­ç« -ICMP" class="headerlink" title="ç¬¬å…­ç«  ICMP"></a>ç¬¬å…­ç«  ICMP</h4><p>ICMPæŠ¥æ–‡æ˜¯åœ¨IPæ•°æ®æŠ¥å†…éƒ¨è¢«ä¼ è¾“çš„ã€‚</p><p><img src="../../../Desktop/source/image/image-20210208204348894.png" alt="image-20210208204348894"></p><p><img src="../../../Desktop/source/image/image-20210208204543776.png" alt="image-20210208204543776"></p><p>ç±»å‹å­—æ®µæœ‰15ä¸ªä¸åŒçš„å€¼ï¼Œä»¥æè¿°ç‰¹å®šç±»å‹çš„ICMPæŠ¥æ–‡ã€‚æŸäº›ICMPæŠ¥æ–‡è¿˜ä½¿ç”¨ä»£ç å­—æ®µçš„å€¼æ¥è¿›ä¸€æ­¥æè¿°ä¸åŒçš„æ¡ä»¶ã€‚</p><p>æ£€éªŒå’Œå­—æ®µè¦†ç›–æ•´ä¸ªICMPæŠ¥æ–‡ã€‚ICMPçš„æ ¡éªŒå’Œæ—¶å¿…é¡»çš„ã€‚</p><h4 id="ç¬¬å…«ç« -Traceroute"><a href="#ç¬¬å…«ç« -Traceroute" class="headerlink" title="ç¬¬å…«ç«  Traceroute"></a>ç¬¬å…«ç«  Traceroute</h4><p>TTLå­—æ®µçš„ç›®çš„æ˜¯é˜²æ­¢æ•°æ®æŠ¥åœ¨é€‰è·¯æ—¶æ— ä¼‘æ­¢çš„åœ¨ç½‘ç»œä¸­æµåŠ¨ã€‚</p><p>å½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä»½IPæ•°æ®æŠ¥æ—¶ï¼Œå¦‚æœå…¶ttlå­—æ®µæ—¶0æˆ–è€…1ï¼Œåˆ™è·¯ç”±å™¨ä¸è½¬å‘è¯¥æ•°æ®æŠ¥ï¼Œè·¯ç”±å™¨ä¼šå°†è¯¥æ•°æ®æŠ¥ä¸¢å¼ƒå¹¶ç»™ä¿¡æºæœºå‘é€ä¸€ä»½ICMPè¶…æ—¶ä¿¡æ¯ï¼ŒTracerouteç¨‹åºçš„å…³é”®åœ¨äºåŒ…å«è¿™ä»½icmpä¿¡æ¯çš„ipæŠ¥æ–‡çš„ä¿¡æºåœ°å€æ˜¯è¯¥è·¯ç”±å™¨çš„åœ°å€ã€‚</p><p>Tracerouteå·¥ä½œåŸç†ï¼šå‘é€ä¸€ä¸ªttlä¸º1çš„ipæ•°æ®æŠ¥ç»™ç›®çš„ä¸»æœºï¼Œè¿™æ ·å°±å¾—åˆ°äº†ç¬¬ä¸€ä¸ªè·¯ç”±å™¨çš„ipåœ°å€ï¼›ç´§æ¥ç€å‘é€ä¸€ä¸ªttlä¸º2çš„æ•°æ®åŒ…ç»™ç›®çš„ä¸»æœºâ€¦â€¦.ã€‚ç»§ç»­è¯¥è¿‡ç¨‹ç›´åˆ°è¯¥æ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºã€‚Tracerouteå‘é€ä¸€ä»½udpæ•°æ®æŠ¥ç»™ç›®çš„ä¸»æœºï¼Œä½†å®ƒé€‰æ‹©ä¸€ä¸ªä¸å¯èƒ½çš„å€¼ä½œä¸ºudpç«¯å£å·(å¤§äº30000)ï¼Œä½¿ç›®çš„ä¸»æœºçš„ä»»ä½•ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½ä¸èƒ½ä½¿ç”¨è¯¥ç«¯å£ã€‚å› ä¸ºï¼Œå½“è¯¥æ•°æ®æŠ¥åˆ°è¾¾æ—¶ï¼Œä½¿ç›®çš„ä¸»æœºçš„udpæ¨¡å—äº§ç”Ÿä¸€ä»½â€œç«¯å£ä¸å¯è¾¾â€é”™è¯¯çš„icmpæŠ¥æ–‡ï¼Œæ­¤æ—¶Tracetouteç¨‹åºéœ€è¦åšçš„å°±æ˜¯åŒºåˆ†æ¥å—åˆ°çš„icmpæŠ¥æ–‡æ˜¯è¶…æ—¶è¿˜æ˜¯ç«¯å£ä¸å¯è¾¾ã€‚</p><h4 id="ç¬¬ä¹ç« -IPé€‰è·¯"><a href="#ç¬¬ä¹ç« -IPé€‰è·¯" class="headerlink" title="ç¬¬ä¹ç«  IPé€‰è·¯"></a>ç¬¬ä¹ç«  IPé€‰è·¯</h4><p>éœ€è¦è¿›è¡Œé€‰è·¯çš„æ•°æ®æŠ¥å¯ä»¥ç”±æœ¬æœºäº§ç”Ÿï¼Œä¹Ÿå¯ä»¥ç”±å…¶å®ƒä¸»æœºäº§ç”Ÿ(æ­¤ç§æƒ…å†µä¸‹ï¼šä¸»æœºå¿…é¡»è¢«é…ç½®æˆä¸€ä¸ªè·¯ç”±å™¨ï¼Œå¦åˆ™é€šè¿‡ç½‘ç»œæ¥å£æ¥å—åˆ°çš„æ•°æ®æŠ¥ï¼Œå¦‚æœç›®çš„åœ°å€ä¸æ˜¯æœ¬çº§å°±ä¼šè¢«ä¸¢å¼ƒ)</p><p>IPæœç´¢è·¯ç”±è¡¨çš„æ­¥éª¤ï¼š</p><ol><li>æœç´¢åŒ¹é…çš„ä¸»æœºåœ°å€(ç½‘ç»œå·ã€ä¸»æœºå·å®Œå…¨ä¸€è‡´)</li><li>æœç´¢åŒ¹é…çš„ç½‘ç»œåœ°å€(ç½‘ç»œå·ä¸€è‡´)</li><li>æœç´¢é»˜è®¤è¡¨é¡¹</li></ol><p>åŒ¹é…ä¸»æœºåœ°å€å§‹ç»ˆå‘ç”Ÿåœ¨åŒ¹é…ç½‘ç»œåœ°å€æ­¥éª¤ä¹‹å‰ã€‚</p><h5 id="9-2-1-è·¯ç”±è¡¨"><a href="#9-2-1-è·¯ç”±è¡¨" class="headerlink" title="9.2.1 è·¯ç”±è¡¨"></a>9.2.1 è·¯ç”±è¡¨</h5><p><img src="../../../Desktop/source/image/image-20210301163425431.png" alt="image-20210301163425431"></p><p><img src="../../../Desktop/source/image/image-20210301163453659.png" alt="image-20210301163453659"></p><p>æ ‡å¿—GåŒºåˆ†æ˜¯ç›´æ¥è·¯ç”±è¿˜æ˜¯é—´æ¥è·¯ç”±(ç›´æ¥è·¯ç”±ä¸è®¾ç½®Gæ ‡å¿—)ï¼šå‘å¾€ç›´æ¥è·¯ç”±çš„åˆ†ç»„ä¸­ä¸ä½†å…·æœ‰æŒ‡æ˜ç›®çš„ç«¯çš„ipåœ°å€ï¼Œè¿˜å…·æœ‰å…¶é“¾è·¯å±‚åœ°å€ã€‚å½“åˆ†ç»„è¢«å‘å¾€ä¸€ä¸ªé—´æ¥è·¯ç”±æ—¶ï¼ŒIPåœ°å€æŒ‡æ˜çš„æ˜¯æœ€ç»ˆçš„ç›®çš„åœ°ï¼Œä½†æ˜¯é“¾è·¯å±‚æŒ‡æ˜çš„æ˜¯ç½‘å…³(ä¸‹ä¸€ç«™è·¯ç”±å™¨)ã€‚</p><h4 id="ç¬¬11ç« -ç”¨æˆ·æ•°æ®æŠ¥åè®®"><a href="#ç¬¬11ç« -ç”¨æˆ·æ•°æ®æŠ¥åè®®" class="headerlink" title="ç¬¬11ç«  ç”¨æˆ·æ•°æ®æŠ¥åè®®"></a>ç¬¬11ç«  ç”¨æˆ·æ•°æ®æŠ¥åè®®</h4><p>udpé¦–éƒ¨</p><p><img src="../../../Desktop/source/image/image-20210301171045570.png" alt="image-20210301171045570"></p><h5 id="11-5-IPåˆ†ç‰‡"><a href="#11-5-IPåˆ†ç‰‡" class="headerlink" title="11.5 IPåˆ†ç‰‡"></a>11.5 IPåˆ†ç‰‡</h5><p>ç‰©ç†ç½‘ç»œå±‚ä¸€èˆ¬è¦é™åˆ¶æ¯æ¬¡å‘é€æ•°æ®å¸§çš„æœ€å¤§é•¿åº¦ã€‚ä»»ä½•æ—¶å€™IPå±‚æ¥æ”¶åˆ°ä¸€ä»½è¦å‘é€çš„IPæ•°æ®æŠ¥æ—¶ï¼Œå®ƒè¦åˆ¤æ–­å‘æœ¬åœ°å“ªä¸ªæ¥å£å‘é€æ•°æ®(é€‰è·¯)ï¼Œå¹¶æŸ¥è¯¢è¯¥æ¥å£è·å¾—MTU(æœ€å¤§ä¼ è¾“å•å…ƒ,netstat -i)ã€‚IPæŠŠMTUä¸æ•°æ®æŠ¥é•¿åº¦è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœéœ€è¦åˆ™è¿›è¡Œåˆ†ç‰‡ã€‚åˆ†ç‰‡å¯ä»¥å‘ç”Ÿåœ¨åŸå§‹å‘é€ç«¯ä¸»æœºä¸Šï¼Œä¹Ÿå¯ä»¥å‘ç”Ÿåœ¨ä¸­é—´è·¯ç”±å™¨ä¸Šã€‚</p><blockquote><p>å¼•è‡ª ã€Šè®¡ç®—æœºç½‘ç»œã€‹</p><p>æ ‡è¯†ï¼ˆidentificationï¼‰ï¼š<strong>å 16ä½</strong>ã€‚IPè½¯ä»¶åœ¨å­˜å‚¨å™¨ä¸­ç»´æŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯äº§ç”Ÿä¸€ä¸ªæ•°æ®æŠ¥ï¼Œè®¡æ•°å™¨å°±åŠ 1ï¼Œå¹¶å°†æ­¤å€¼èµ‹ç»™æ ‡è¯†å­—æ®µã€‚</p><p>ä½†è¿™ä¸ªâ€œæ ‡è¯†â€ä¸æ˜¯åºå·ï¼Œå› ä¸ºIPæ˜¯æ— è¿æ¥æœåŠ¡ï¼Œ<strong>æ•°æ®æŠ¥ä¸å­˜åœ¨æŒ‰åºæ¥æ”¶çš„é—®é¢˜</strong>ã€‚å½“æ•°æ®æŠ¥ç”±äºé•¿åº¦è¶…è¿‡ç½‘ç»œçš„MTUè€Œå¿…é¡»åˆ†ç‰‡æ—¶ï¼Œè¿™ä¸ªæ ‡è¯†å­—æ®µçš„å€¼å°±è¢«å¤åˆ¶åˆ°æ‰€æœ‰çš„æ•°æ®æŠ¥ç‰‡çš„æ ‡è¯†å­—æ®µä¸­ã€‚ç›¸åŒçš„æ ‡è¯†å­—æ®µçš„å€¼ä½¿åˆ†ç‰‡åçš„å„æ•°æ®æŠ¥ç‰‡æœ€åèƒ½æ­£ç¡®åœ°é‡è£…æˆä¸ºåŸ</p><p>æ¥çš„æ•°æ®æŠ¥ã€‚</p><p><strong>æ ‡å¿—ï¼ˆflagï¼‰ï¼š</strong>å 3ä½ï¼Œä½†ç›®å‰åªæœ‰ä¸¤ä½æœ‰æ„ä¹‰ã€‚</p><p>â€‹    â€“ æ ‡å¿—å­—æ®µä¸­çš„æœ€ä½ä½ä¸ºMFï¼ˆMore Fragmentï¼‰ã€‚MF=1å³è¡¨ç¤ºåé¢â€œè¿˜æœ‰åˆ†ç‰‡â€çš„æ•°æ®æŠ¥ã€‚MF=0è¡¨ç¤ºè¿™å·²æ˜¯è‹¥å¹²æ•°æ®æŠ¥ç‰‡ä¸­çš„æœ€åä¸€ä¸ªã€‚</p><p>â€‹    â€“ æ ‡å¿—å­—æ®µä¸­é—´çš„ä¸€ä½è®°ä¸ºDFï¼ˆDonâ€™t Fragmentï¼‰ï¼Œæ„æ€æ˜¯â€œä¸èƒ½åˆ†ç‰‡â€ã€‚åªæœ‰å½“DF=0æ—¶æ‰å…è®¸åˆ†ç‰‡ã€‚</p><p><strong>ç‰‡åç§» ï¼š</strong>å 13ä½ã€‚ç‰‡åç§»æŒ‡å‡ºï¼šè¾ƒé•¿çš„åˆ†ç»„åœ¨åˆ†ç‰‡åï¼ŒæŸç‰‡åœ¨åŸåˆ†ç»„ä¸­çš„ç›¸å¯¹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸å¯¹äºç”¨æˆ·æ•°æ®å­—æ®µçš„èµ·ç‚¹ï¼Œè¯¥ç‰‡ä»ä½•å¤„å¼€å§‹ã€‚ç‰‡åç§»ä»¥8ä¸ªå­—èŠ‚ä¸ºåç§»å•ä½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªåˆ†ç‰‡çš„é•¿åº¦ä¸€å®šæ˜¯8å­—èŠ‚ï¼ˆ64ä½ï¼‰çš„æ•´æ•°å€ã€‚</p></blockquote><h4 id="ç¬¬åä¸ƒç« -TCP-ä¼ è¾“æ§åˆ¶åè®®"><a href="#ç¬¬åä¸ƒç« -TCP-ä¼ è¾“æ§åˆ¶åè®®" class="headerlink" title="ç¬¬åä¸ƒç«  TCP:ä¼ è¾“æ§åˆ¶åè®®"></a>ç¬¬åä¸ƒç«  TCP:ä¼ è¾“æ§åˆ¶åè®®</h4><h5 id="17-2-TCPçš„æœåŠ¡"><a href="#17-2-TCPçš„æœåŠ¡" class="headerlink" title="17.2 TCPçš„æœåŠ¡"></a>17.2 TCPçš„æœåŠ¡</h5><p>å°½ç®¡tcpå’Œudpéƒ½ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œå±‚(IP)ï¼Œtcpå‘åº”ç”¨å±‚æä¾›ä¸udpå®Œå…¨ä¸åŒçš„æœåŠ¡ã€‚tcpæä¾›ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„å­—èŠ‚æµæœåŠ¡ã€‚</p><p>tcpé€šè¿‡ä¸‹åˆ—æ–¹å¼æä¾›å¯é æ€§ï¼š</p><ul><li>åº”ç”¨æ•°æ®è¢«åˆ†å‰²æˆtcpè®¤ä¸ºæœ€é€‚åˆå‘é€çš„æ•°æ®å—ã€‚ï¼ˆudpï¼šåº”ç”¨äº§ç”Ÿçš„æŠ¥æ–‡é•¿åº¦ä¿æŒä¸å˜ï¼‰</li><li>å½“tcpå‘å‡ºä¸€ä¸ªæ®µä¹‹åï¼Œå®ƒå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…ç›®çš„ç«¯ç¡®è®¤æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡æ®µã€‚å¦‚æœä¸èƒ½åŠæ—¶æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œå°†é‡å‘è¿™ä¸ªæŠ¥æ–‡æ®µã€‚</li><li>å½“tcpæ”¶åˆ°å‘è‡ªtcpè¿æ¥å¦ä¸€ç«¯çš„æ•°æ®ï¼Œå®ƒå°†å‘é€ä¸€ä¸ªç¡®è®¤ã€‚</li><li>tcpå°†ä¿æŒå®ƒé¦–éƒ¨å’Œæ•°æ®çš„æ ¡éªŒå’Œã€‚ï¼ˆå¦‚æœæ”¶åˆ°æ®µçš„æ£€éªŒå’Œæœ‰å·®é”™ï¼Œtcpå°†ä¸¢å¼ƒè¿™ä¸ªæŠ¥æ–‡æ®µå¹¶ä¸ç¡®è®¤æ”¶åˆ°æ­¤æŠ¥æ–‡æ®µï¼‰</li><li>tcpæŠ¥æ–‡æ®µä½œä¸ºIPæ•°æ®æŠ¥ä¼ è¾“ï¼Œè€Œipæ•°æ®æŠ¥çš„åˆ°è¾¾å¯èƒ½ä¼šå¤±åºï¼Œå› æ­¤tcpæŠ¥æ–‡æ®µçš„åˆ°è¾¾ä¹Ÿæœ‰å¯èƒ½å¤±åºã€‚tcpå°†ä¼šå¯¹æ”¶åˆ°çš„æ•°æ®è¿›è¡Œæ’åºç„¶åäº¤ç»™åº”ç”¨å±‚ã€‚</li><li>ipæ•°æ®æŠ¥ä¼šå‘ç”Ÿé‡å¤ï¼Œå› æ­¤æ¥æ”¶ç«¯å¿…é¡»ä¸¢å¼ƒé‡å¤çš„æ•°æ®ã€‚</li><li>tcpèƒ½æä¾›æµé‡æ§åˆ¶ã€‚tcpè¿æ¥çš„æ¯ä¸€æ–¹éƒ½æœ‰å›ºå®šå¤§å°çš„ç¼“å†²ç©ºé—´ã€‚tcpçš„æ¥æ”¶ç«¯åªå…è®¸å¦ä¸€ç«¯å‘é€æ¥æ”¶ç«¯ç¼“å†²åŒºæ‰€èƒ½æ¥çº³çš„å¤§å°ã€‚ï¼ˆé˜²æ­¢å‘é€è¾ƒå¿«çš„ä¸»æœºä½¿æ¥æ”¶çš„è¾ƒæ…¢çš„ä¸»æœºç¼“å†²åŒºæº¢å‡ºï¼‰</li></ul><h5 id="17-3-TCPçš„é¦–éƒ¨"><a href="#17-3-TCPçš„é¦–éƒ¨" class="headerlink" title="17.3 TCPçš„é¦–éƒ¨"></a>17.3 TCPçš„é¦–éƒ¨</h5><p>tcpæ•°æ®è¢«å°è£…åœ¨ä¸€ä¸ªipæ•°æ®æŠ¥ä¸­ã€‚</p><p><img src="../../../Desktop/source/image/image-20210217022249843.png" alt="image-20210217022249843"></p><p>tcpé¦–éƒ¨ï¼š</p><ul><li>16ä½çš„æºç«¯å£å·å’Œç›®çš„ç«¯å£å·ï¼ˆç”¨äºå¯»æ‰¾å‘ç«¯å’Œæ¥æ”¶ç«¯çš„åº”ç”¨ç¨‹åºï¼‰ï¼Œå®¢æˆ·ç«¯ipã€å®¢æˆ·ç«¯ç«¯å£ã€æœåŠ¡ç«¯ipã€æœåŠ¡ç«¯ç«¯å£å¯å”¯ä¸€ç¡®å®šä¸€ä¸ªtcpè¿æ¥ã€‚</li><li>åºå·ï¼šæ ‡è¯†ä»tcpå‘ç«¯å‘tcpæ”¶ç«¯å‘é€çš„æ•°æ®å­—èŠ‚æµï¼Œå®ƒè¡¨ç¤ºåœ¨è¿™ä¸ªæŠ¥æ–‡æ®µä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚ã€‚å¦‚æœå°†å­—èŠ‚æµçœ‹ä½œåœ¨ä¸¤ä¸ªåº”ç”¨ç¨‹åºé—´çš„å•å‘æµåŠ¨ï¼Œåˆ™tcpç”¨åºå·å¯¹æ¯ä¸ªå­—èŠ‚è¿›è¡Œè®¡æ•°ã€‚ï¼ˆåºå·æ˜¯32bitï¼Œåºå·è¾¾åˆ°2<sup>32</sup>-1ååˆä»0å¼€å§‹ã€‚ï¼‰å½“å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥æ—¶ï¼ŒSYNæ ‡å¿—ä½å˜æˆ1ã€‚åºå·å­—æ®µåŒ…å«ç”±è¿™ä¸ªä¸»æœºé€‰æ‹©çš„è¯¥è¿æ¥çš„åˆå§‹åºå·ISN(Initial Sequece Number)ã€‚è¯¥ä¸»æœºè¦å‘é€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åºåˆ—å·ä¸ºISN+1(SYNæ ‡å¿—æ¶ˆè€—äº†ä¸€ä¸ªåºå·)ã€‚</li><li>ç¡®è®¤åºå·ï¼šæ˜¯å‘é€ç«¯åºå·çš„ä¸‹ä¸€ä¸ªåºå·ã€‚åªæœ‰ACKæ ‡å¿—ä¸º1æ—¶ç¡®è®¤åºå·æ‰æœ‰æ•ˆã€‚å‘é€ACKä¸éœ€è¦ä»»ä½•ä»£ä»·ï¼Œå› ä¸ºæ˜¯åŒ…å«åœ¨é¦–éƒ¨ä¸­çš„å­—æ®µï¼Œä¸€ä¸ªtcpè¿æ¥ä¸€æ—¦å»ºç«‹èµ·æ¥ï¼ŒACKæ ‡è¯†æ€»æ˜¯è¢«ç½®ä¸º1ã€‚tcpæä¾›å…¨åŒå·¥æœåŠ¡</li><li>é¦–éƒ¨é•¿åº¦ï¼š4bitï¼Œèƒ½è¡¨ç¤ºçš„èŒƒå›´æ˜¯0-15ï¼Œå•ä½æ˜¯4å­—èŠ‚ï¼Œæ‰€ä»¥tcpé¦–éƒ¨æœ€å¤§ä¸º60å­—èŠ‚ã€‚</li><li>æ ‡å¿—ä½ï¼š6ä¸ªæ ‡å¿—ä½<ul><li>URGï¼šç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆ</li><li>ACKï¼šç¡®è®¤åºå·æœ‰æ•ˆ</li><li>PSHï¼šæ¥æ”¶æ–¹åº”å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡äº¤ç»™åº”ç”¨å±‚</li><li>RSTï¼šé‡å»ºè¿æ¥</li><li>SYNï¼šåŒæ­¥åºå·ï¼Œç”¨æ¥å‘èµ·ä¸€ä¸ªè¿æ¥</li><li>FINï¼šå‘ç«¯å®Œæˆå‘é€ä»»åŠ¡</li></ul></li><li>çª—å£ï¼štcpçš„æµé‡æ§åˆ¶ç”±è¿æ¥çš„æ¯ä¸€ç«¯é€šè¿‡å£°æ˜çš„çª—å£å¤§å°æä¾›ã€‚çª—å£å¤§å°ä¸ºå­—èŠ‚æ•°ï¼Œ16bitå› è€Œçª—å£å¤§å°æœ€å¤§ä¸º65535å­—èŠ‚ã€‚</li><li>æ£€éªŒå’Œï¼šè¦†ç›–æ•´ä¸ªtcpæŠ¥æ–‡æ®µâ€”-é¦–éƒ¨å’Œæ•°æ®</li><li>ç´§æ€¥æŒ‡é’ˆï¼šåªæœ‰URGæ ‡å¿—ç½®ä¸º1æ—¶æ‰æœ‰æ•ˆã€‚</li><li>å¸¸è§å¯é€‰å­—æ®µï¼šæœ€é•¿æŠ¥æ–‡å¤§å°ï¼Œåˆç§°ä¸ºMSS(Maximum Segment Size)ï¼Œæ¯ä¸ªè¿æ¥æ–¹é€šå¸¸éƒ½åœ¨é€šä¿¡çš„ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µä¸­å£°æ˜è¿™ä¸ªé€‰é¡¹ï¼Œå®ƒæŒ‡æ˜æœ¬ç«¯èƒ½æ¥æ”¶æœ€å¤§é•¿åº¦çš„æŠ¥æ–‡æ®µã€‚</li></ul><p><img src="../../../Desktop/source/image/image-20210217022444857.png" alt="image-20210217022444857"></p><h4 id="ç¬¬åå…«ç« -TCPè¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢"><a href="#ç¬¬åå…«ç« -TCPè¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢" class="headerlink" title="ç¬¬åå…«ç«  TCPè¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢"></a>ç¬¬åå…«ç«  TCPè¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢</h4><h5 id="18-2-è¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢"><a href="#18-2-è¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢" class="headerlink" title="18.2 è¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢"></a>18.2 è¿æ¥çš„å»ºç«‹ä¸ç»ˆæ­¢</h5><p>æ³¨ï¼šFlags [S.]ï¼ŒSè¡¨ç¤ºSYNï¼Œâ€œ.â€è¡¨ç¤ºACK</p><p><img src="../../../Desktop/source/image/tcpdump.jpg" alt="tcpdumpæŠ“åŒ…"></p><p>è¿™æ˜¯ç”¨telnetå®ç°çš„ä¸€æ¬¡é€šä¿¡ï¼Œåˆ©ç”¨tcpdumpè¿›è¡ŒæŠ“åŒ…ï¼Œå¦‚ä¸‹æ˜¯åˆ†æï¼ˆiZbp11u8qxiwepq15dm1liZè¡¨ç¤ºæœ¬æœºï¼‰ï¼š</p><p><img src="../../../Desktop/source/image/tcp.jpg" alt="tcpdumpè¾“å‡ºå­—æ®µè§£é‡Šè¯´æ˜"></p><p>ç¬¬ä¸€è¡Œï¼šæ–¹å‘ï¼šiZbp11u8qxiwepq15dm1liZ &gt; 47.96.67.121ã€‚iZbp11u8qxiwepq15dm1liZ é€šè¿‡54008ç«¯å£å‘é€ä¸€ä¸ªSYNæ ‡å¿—ä½ä¸º1(é€šè¿‡Flagså­—æ®µå¾—çŸ¥)çš„æŠ¥æ–‡ç»™è¿œç«¯ä¸»æœº47.96.67.121çš„sshç«¯å£â€“ä¹Ÿå°±æ˜¯22ç«¯å£ï¼Œæ­¤æŠ¥æ–‡çš„åºå·å³seqæ˜¯ï¼š826162287ï¼ˆISNï¼‰ï¼Œåé¢çš„å­—æ®µæš‚æ—¶å¯ä»¥å¿½ç•¥ã€‚</p><p>ç¬¬äºŒè¡Œï¼šæ–¹å‘ï¼š47.96.67.121 &gt; iZbp11u8qxiwepq15dm1liZã€‚è¿œç¨‹ä¸»æœº47.96.67.121 å›å¤ä¸€ä¸ªSYNæ ‡å¿—ä½ä¸º1çš„æŠ¥æ–‡ç»™ iZbp11u8qxiwepq15dm1liZï¼Œæ­¤æŠ¥æ–‡åºå·å³seqæ˜¯ï¼š1641364849ï¼Œæ­¤æŠ¥æ–‡ä¸­å‡ºç°äº†ackå­—æ®µï¼ˆè¡¨ç¤ºç¡®è®¤ï¼‰ï¼Œåªæœ‰åœ¨é¦–éƒ¨ä¸­ACKæ ‡å¿—è¢«ç½®ä¸º1æ—¶æ‰æ˜¾ç¤ºï¼Œè¯´æ˜æ­¤æŠ¥æ–‡ä¸­SYNã€ACKä¸¤ä¸ªæ ‡å¿—ä½ä¸º1ï¼Œå½“ACKä¸º1æ—¶ç¡®è®¤åºå·ç”Ÿæ•ˆâ€”826162288</p><p>ç¬¬ä¸‰è¡Œï¼šæ–¹å‘ï¼šiZbp11u8qxiwepq15dm1liZ &gt; 47.96.67.121ã€‚ç”±äº47.96.67.121å‘æ¥çš„æŠ¥æ–‡é¦–éƒ¨ä¸­åºå·æ˜¯1641364849(ç¬¬äºŒè¡Œ)ï¼Œæ‰€ä»¥åœ¨ç»™47.96.67.121 å›åŒ…æ—¶ä¼šå°†ç¡®è®¤åºå·ç½®ä¸º åºå·ï¼ˆ1641364849ï¼‰çš„ä¸‹ä¸€ä¸ªåºå·ã€‚</p><p>ç¬¬å››è¡Œï¼šæ–¹å‘ï¼š47.96.67.121 &gt; iZbp11u8qxiwepq15dm1liZã€‚åˆ°è¿™é‡Œè¿æ¥å»ºç«‹æˆåŠŸï¼Œå¼€å§‹æ•°æ®ä¼ è¾“ï¼Œæ®å›¾ç¬¬å››è¡Œå¯çŸ¥ä¼ è¾“äº†21å­—èŠ‚ã€‚</p><p>ç¬¬äº”è¡Œï¼šæ–¹å‘ï¼šiZbp11u8qxiwepq15dm1liZ &gt; 47.96.67.121ã€‚æ”¶åˆ°ç¡®è®¤æ•°æ®æŠ¥æ–‡åé€šçŸ¥å‘é€ç«¯ã€‚</p><p>ç¬¬å…­è¡Œï¼šæ–¹å‘ï¼šiZbp11u8qxiwepq15dm1liZ &gt; 47.96.67.121ã€‚å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œæ ‡å¿—ä½FINä¸º1ï¼Œæ„æ€æ˜¯ç»™47.96.67.121è¯´æ•°æ®å‘é€å®Œæ¯•ï¼Œæˆ‘è¦å…³é—­äº†ã€‚</p><p>ç¬¬ä¸ƒè¡Œï¼šæ–¹å‘ï¼š47.96.67.121 &gt; iZbp11u8qxiwepq15dm1liZã€‚æœåŠ¡ç«¯å›å¤ä¸€ä¸ªackç»™iZbp11u8qxiwepq15dm1liZè¯´ æˆ‘å·²ç»æ”¶åˆ°ä½ è¦å…³é—­çš„æ¶ˆæ¯äº†ã€‚</p><p>ç¬¬å…«è¡Œï¼šæ–¹å‘ï¼š47.96.67.121 &gt; iZbp11u8qxiwepq15dm1liZã€‚47.96.67.121å‘é€FINç»™iZbp11u8qxiwepq15dm1liZè¯´æˆ‘å…³é—­äº†ã€‚</p><p>ç¬¬ä¹è¡Œï¼šæ–¹å‘ï¼šiZbp11u8qxiwepq15dm1liZ &gt; 47.96.67.121ã€‚å‘Šè¯‰47.96.67.121æˆ‘æ”¶åˆ°ä½ çš„å…³é—­æ¶ˆæ¯äº†ï¼Œç„¶åå‘é€ä¸€ä¸ªackå‘47.96.67.121ç¡®è®¤ã€‚</p><h5 id="18-4-æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦"><a href="#18-4-æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦" class="headerlink" title="18.4 æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦"></a>18.4 æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦</h5><p><img src="../../../Desktop/source/image/tcpdump.jpg" alt="tcpdumpæŠ“åŒ…"></p><p>æœ€å¤§æŠ¥æ–‡é•¿åº¦(MSS)è¡¨ç¤ºtcpç©¿å¾€å¦ä¸€ç«¯çš„æœ€å¤§å—æ•°æ®é•¿åº¦ã€‚å½“ä¸€ä¸ªè¿æ¥å»ºç«‹æ—¶ï¼Œè¿æ¥åŒæ–¹éƒ½è¦é€šå‘Šå„è‡ªçš„MMS(MSSåªèƒ½å‡ºç°åœ¨SYNæŠ¥æ–‡æ®µä¸­)ã€‚ä¸Šå›¾ä¸­ç¬¬ä¸€è¡Œï¼šmssä¸º1406ã€‚</p><h5 id="18-5-TCPçš„åŠå…³é—­"><a href="#18-5-TCPçš„åŠå…³é—­" class="headerlink" title="18.5 TCPçš„åŠå…³é—­"></a>18.5 TCPçš„åŠå…³é—­</h5><p>TCPæä¾›äº†è¿æ¥çš„ä¸€æ®µåœ¨ç»“æŸäº†å®ƒçš„å‘é€ä¹‹åè¿˜èƒ½æ¥æ”¶å¦ä¸€ç«¯çš„æ•°æ®çš„èƒ½åŠ›ã€‚</p><h5 id="18-6-1-2MSLç­‰å¾…çŠ¶æ€"><a href="#18-6-1-2MSLç­‰å¾…çŠ¶æ€" class="headerlink" title="18.6.1 2MSLç­‰å¾…çŠ¶æ€"></a>18.6.1 2MSLç­‰å¾…çŠ¶æ€</h5><p>å½“tcpæ‰§è¡Œä¸€ç«¯ä¸»åŠ¨å…³é—­ï¼Œå¹¶å‘å›æœ€åä¸€ä¸ªackï¼Œè¯¥è¿æ¥å¿…é¡»åœ¨TIME_WAITçŠ¶æ€åœç•™çš„æ—¶é—´ä¸º2MSL(Max Segment LifeTime)ï¼Œè¿™æ ·å¯ä»¥è®©tcpèƒ½å¤Ÿå†æ¬¡å‘é€æœ€åçš„ACKä»¥é˜²æ­¢è¿™ä¸ªACKä¸¢å¤±ã€‚åœ¨2MSLç­‰å¾…æœŸé—´ï¼Œæ’å£ä¸­ä½¿ç”¨çš„æœ¬åœ°ç«¯å£åœ¨é»˜è®¤æƒ…å†µä¸‹ä¸èƒ½å†è¢«ä½¿ç”¨ã€‚</p><h5 id="18-6-3-FIN-WAIT-2çŠ¶æ€"><a href="#18-6-3-FIN-WAIT-2çŠ¶æ€" class="headerlink" title="18.6.3 FIN_WAIT_2çŠ¶æ€"></a>18.6.3 FIN_WAIT_2çŠ¶æ€</h5><p><img src="../../../Desktop/source/image/image-20210217195649249.png" alt="image-20210217195649249"></p><h5 id="18-7-å¤ä½æŠ¥æ–‡æ®µ"><a href="#18-7-å¤ä½æŠ¥æ–‡æ®µ" class="headerlink" title="18.7 å¤ä½æŠ¥æ–‡æ®µ"></a>18.7 å¤ä½æŠ¥æ–‡æ®µ</h5><p><img src="../../../Desktop/source/image/image-20210217200503883.png" alt="tcpdump"></p><p><img src="../../../Desktop/source/image/image-20210217200816830.png" alt="è¯•å›¾åœ¨ä¸å­˜åœ¨çš„ç«¯å£ä¸Šæ‰“å¼€è¿æ¥è€Œäº§ç”Ÿçš„å¤ä½"></p><p>å‘ä¸€ä¸ªæ²¡æœ‰ç›‘å¬çš„ç«¯å£å‘èµ·è¿æ¥ï¼ŒæœåŠ¡ç«¯è¿”å›äº†ä¸€ä¸ªRSTæ ‡å¿—ä¸º1çš„æŠ¥æ–‡ã€‚</p><h4 id="ç¬¬äºŒåç« "><a href="#ç¬¬äºŒåç« " class="headerlink" title="ç¬¬äºŒåç« "></a>ç¬¬äºŒåç« </h4><h5 id="20-6-æ…¢å¯åŠ¨"><a href="#20-6-æ…¢å¯åŠ¨" class="headerlink" title="20.6 æ…¢å¯åŠ¨"></a>20.6 æ…¢å¯åŠ¨</h5><p>åœ¨å±€åŸŸç½‘ç»œä¸­ï¼Œå‘é€æ–¹ä¸€å¼€å§‹ä¾¿å‘ç½‘ç»œä¸­å‘é€å¤šä¸ªæŠ¥æ–‡æ®µï¼Œç›´åˆ°è¾¾åˆ°æ¥æ”¶æ–¹é€šå‘Šçš„çª—å£å¤§å°ä¸ºæ­¢ï¼Œè¿™ç§æ–¹å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯å½“å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¹‹é—´å­˜åœ¨å¤šä¸ªè·¯ç”±å™¨å’Œé€Ÿç‡è¾ƒæ…¢çš„é“¾è·¯æ—¶ï¼Œå°±æœ‰å¯èƒ½å‡ºç°ä¸€äº›é—®é¢˜ï¼šä¸€äº›ä¸­é—´è·¯ç”±å™¨å¿…é¡»ç¼“å­˜åˆ†ç»„(æŠ¥æ–‡)ï¼Œå¹¶æœ‰å¯èƒ½è€—å°½å­˜å‚¨å™¨çš„ç©ºé—´(å­˜å‚¨å™¨è€—å°½ä¹‹åè·¯ç”±å™¨ä¼šä¸¢å¼ƒæ–°æ”¶åˆ°çš„åˆ†ç»„)ã€‚</p><p>tcpæ”¯æŒæ…¢å¯åŠ¨ç®—æ³•ï¼Œè¯¥ç®—æ³•é€šè¿‡è§‚å¯Ÿåˆ°æ–°åˆ†ç»„è¿›å…¥ç½‘ç»œçš„é€Ÿç‡åº”è¯¥å’Œå¦ä¸€ç«¯è¿”å›ç¡®è®¤çš„é€Ÿç‡ç›¸åŒè€Œè¿›è¡Œå·¥ä½œã€‚</p><p>æ…¢å¯åŠ¨ä¸ºå‘é€æ–¹tcpå¢åŠ äº†å¦ä¸€ä¸ªæ–°çª—å£ï¼šæ‹¥å¡çª—å£(cwnd)ã€‚å½“ä¸å¦ä¸€ä¸ªç½‘ç»œçš„ä¸»æœºå»ºç«‹tcpè¿æ¥æ—¶ï¼Œæ‹¥å¡çª—å£è¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªæŠ¥æ–‡æ®µå¤§å°(å¦ä¸€ç«¯é€šå‘Šçš„çª—å£å¤§å°)ã€‚æ¯æ”¶åˆ°ä¸€ä¸ªackï¼Œæ‹¥å¡çª—å£å°±å¢åŠ ä¸€ä¸ªæŠ¥æ–‡æ®µ(cwndä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œä½†æ˜¯æ…¢å¯åŠ¨ä»¥æŠ¥æ–‡æ®µå¤§å°ä¸ºå•ä½è¿›è¡Œå¢åŠ )ã€‚å‘é€æ–¹å–æ‹¥å¡çª—å£ä¸é€šå‘Šçª—å£ä¸­çš„æœ€å°å€¼ä½œä¸ºå‘é€ä¸Šé™(æŠ¥æ–‡é•¿åº¦)ã€‚æ‹¥å¡çª—å£æ˜¯å‘é€å‘ä½¿ç”¨çš„æµé‡æ§åˆ¶ï¼Œé€šå‘Šçª—å£æ˜¯æ¥æ”¶æ–¹ä½¿ç”¨çš„æµé‡æ§åˆ¶ã€‚</p><p>æ‹¥å¡çª—å£ä¹Ÿä¸å¯èƒ½æ— é™å¢å¤§ï¼Œåœ¨ç½‘ç»œä¼ è¾“ä¸­ï¼Œå½“æŸäº›ç‚¹ä¸Šçš„è·¯ç”±å™¨ç½‘ç»œå®¹é‡è¾¾åˆ°äº†ä¸Šé™ï¼Œäºæ˜¯ä¸­é—´è·¯ç”±å™¨å¼€å§‹ä¸¢å¼ƒåˆ†ç»„å¹¶é€šçŸ¥å‘é€æ–¹ã€‚</p><h4 id="ç¬¬äºŒåä¸€ç« -TCPçš„è¶…æ—¶ä¸é‡ä¼ "><a href="#ç¬¬äºŒåä¸€ç« -TCPçš„è¶…æ—¶ä¸é‡ä¼ " class="headerlink" title="ç¬¬äºŒåä¸€ç«  TCPçš„è¶…æ—¶ä¸é‡ä¼ "></a>ç¬¬äºŒåä¸€ç«  TCPçš„è¶…æ—¶ä¸é‡ä¼ </h4><p>tcpæä¾›å¯é çš„è¿è¾“å±‚ï¼šç¡®è®¤ä»å¦ä¸€ç«¯æ”¶åˆ°çš„æ•°æ®(ack)ï¼Œä½†æ•°æ®å’Œç¡®è®¤éƒ½å¯èƒ½ä¼šå‘ç”Ÿä¸¢å¤±ã€‚tcpé€šè¿‡åœ¨å‘é€æ—¶è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨è§£å†³æ•°æ®å’Œç¡®è®¤ä¸¢å¤±çš„é—®é¢˜ï¼Œå½“å®šæ—¶å™¨å‘ç”Ÿæº¢å‡ºæ—¶è¿˜æ²¡æœ‰æ”¶åˆ°è¯¥æ•°æ®çš„ç¡®è®¤å°±é‡ä¼ è¯¥æ•°æ®ã€‚</p><p>å¯¹äºæ¯ä¸ªè¿æ¥ï¼Œtcpç®¡ç†å››ä¸ªå®šæ—¶å™¨ï¼š</p><ol><li>é‡ä¼ å®šæ—¶å™¨ï¼šæœŸæœ›æ”¶åˆ°å¯¹ç«¯ç¡®è®¤çš„æœ€å¤§ç­‰å¾…æ—¶é—´ã€‚</li><li>åšæŒå®šæ—¶å™¨ï¼šä½¿çª—å£å¤§å°ä¿¡æ¯ä¿æŒä¸æ–­æµåŠ¨ï¼Œå½“å‘é€ç«¯çš„å‘é€é€Ÿåº¦è¿‡å¿«ï¼Œæ¥æ”¶æ–¹çš„ç¼“å†²åŒºè¢«æ‰“æ»¡æ—¶ï¼Œæ¥æ”¶æ–¹ä¼šé€šå‘Šçª—å£å¤§å°ä¸º0ï¼Œæ­¤æ—¶å‘é€æ–¹ä¼šæš‚åœæ•°æ®å‘é€ï¼ŒåšæŒå®šæ—¶å™¨çš„ä½œç”¨å°±æ˜¯ä¸æ–­å‘é€æŠ¥æ–‡è¯¢é—®çª—å£å¤§å°é˜²æ­¢å‡ºç°æ­»é”(æ¥æ”¶ç«¯ä¸é€šå‘Šæ–°çš„çª—å£å¤§å°ï¼Œå‘é€æ–¹ä¸€ç›´ç­‰å¾…ã€‚)</li><li>ä¿æ´»å®šæ—¶å™¨ï¼šå¯ä»¥æ£€æµ‹åˆ°ä¸€ä¸ªç©ºé—²è¿æ¥çš„å¦ä¸€ç«¯ä½•æ—¶å´©æºƒæˆ–è€…é‡å¯ã€‚</li><li>2MSLå®šæ—¶å™¨ï¼šæµ‹é‡ä¸€ä¸ªè¿æ¥å¤„äºTIME_WAITçŠ¶æ€çš„æ—¶é—´ã€‚</li></ol><h4 id="21-2-è¶…æ—¶é‡ä¼ ä¾‹å­"><a href="#21-2-è¶…æ—¶é‡ä¼ ä¾‹å­" class="headerlink" title="21.2 è¶…æ—¶é‡ä¼ ä¾‹å­"></a>21.2 è¶…æ—¶é‡ä¼ ä¾‹å­</h4><p><img src="../../../Desktop/source/image/image-20210305165017197.png" alt="image-20210305165017197"></p><h4 id="21-3-å¾€è¿”æ—¶é—´æµ‹é‡"><a href="#21-3-å¾€è¿”æ—¶é—´æµ‹é‡" class="headerlink" title="21.3 å¾€è¿”æ—¶é—´æµ‹é‡"></a>21.3 å¾€è¿”æ—¶é—´æµ‹é‡</h4><p>tcpè¶…æ—¶ä¸é‡ä¼ ä¸­æœ€é‡è¦çš„éƒ¨åˆ†å°±æ˜¯å¯¹ä¸€ä¸ªç»™å®šçš„è¿æ¥çš„å¾€è¿”æ—¶é—´(RTT)æµ‹é‡</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;ç¬¬ä¸€ç« &quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€ç« &quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€ç« &quot;&gt;&lt;/a&gt;ç¬¬ä¸€ç« &lt;/h4&gt;&lt;h5 id=&quot;1-2-åˆ†å±‚&quot;&gt;&lt;a href=&quot;#1-2-åˆ†å±‚&quot; class=&quot;headerlink&quot; title=&quot;1.2 åˆ†å±‚&quot;&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Cå’ŒæŒ‡é’ˆ</title>
    <link href="http://blog.3amupupup.online/2021/03/18/C%E5%92%8C%E6%8C%87%E9%92%88/"/>
    <id>http://blog.3amupupup.online/2021/03/18/C%E5%92%8C%E6%8C%87%E9%92%88/</id>
    <published>2021-03-18T03:09:52.067Z</published>
    <updated>2021-03-18T03:09:52.067Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç¬¬3ç« "><a href="#ç¬¬3ç« " class="headerlink" title="ç¬¬3ç« "></a>ç¬¬3ç« </h4><h5 id="3-1-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#3-1-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="3.1 åŸºæœ¬æ•°æ®ç±»å‹"></a>3.1 åŸºæœ¬æ•°æ®ç±»å‹</h5><h6 id="3-1-1-æ•´å½¢å®¶æ—"><a href="#3-1-1-æ•´å½¢å®¶æ—" class="headerlink" title="3.1.1 æ•´å½¢å®¶æ—"></a>3.1.1 æ•´å½¢å®¶æ—</h6><p>é•¿æ•´å‹è‡³å°‘åº”è¯¥å’Œæ•´å‹ä¸€æ ·ï¼Œè€Œæ•´å‹è‡³å°‘åº”è¯¥å’ŒçŸ­æ•´å‹ä¸€æ ·é•¿ã€‚</p><p>ä¸€ã€æ•´å‹å­—é¢å€¼</p><p>åˆå§‹åŒ–ä¹‹åä¸å¯ä»¥è¢«ä¿®æ”¹ã€‚</p><p>åœ¨æ•´æ•°å­—é¢å€¼åé¢æ·»åŠ Læˆ–lï¼Œå¯ä»¥ä½¿è¿™ä¸ªæ•´æ•°è¢«è§£é‡Šä¸ºlongç±»å‹å€¼ï¼Œå­—ç¬¦Uæˆ–uåˆ™ç”¨äºæŠŠæ•°å€¼æŒ‡å®šä¸ºunsignedæ•´å‹å€¼ã€‚å¦‚æœæ·»åŠ luåˆ™è¢«è§£é‡Šä¸º unsigned long æ•´å‹å€¼ã€‚å­—ç¬¦å¸¸é‡çš„ç±»å‹æ€»æ˜¯intã€‚</p><pre><code class="c">int main(){    123L;    123u;    123LU;    0123; // 8è¿›åˆ¶    0x1561; // 16è¿›åˆ¶    printf(&quot;%lu\n&quot;,sizeof(&#39;a&#39;)); // 4    return 0;}</code></pre><p>äºŒã€æšä¸¾ç±»å‹</p><p>ä»¥æ•´å‹æ–¹å¼å­˜å‚¨ã€‚</p><pre><code class="c">enum age{    a,    b,    c,    d};</code></pre><h6 id="3-1-1-æµ®ç‚¹ç±»å‹"><a href="#3-1-1-æµ®ç‚¹ç±»å‹" class="headerlink" title="3.1.1 æµ®ç‚¹ç±»å‹"></a>3.1.1 æµ®ç‚¹ç±»å‹</h6><pre><code class="c">int main(){    printf(&quot;%lu\n&quot;,sizeof(3.14)); // 8,ç¼ºçœæ—¶é»˜è®¤ä¸ºdoubleç±»å‹    printf(&quot;%lu\n&quot;,sizeof(3.14l)); // 16,long double    printf(&quot;%lu\n&quot;,sizeof(3.14f)); // 4    printf(&quot;%lu\n&quot;,sizeof(double )); // 8    printf(&quot;%lu\n&quot;,sizeof(float )); // 4    return 0;}</code></pre><h6 id="3-1-3-æŒ‡é’ˆ"><a href="#3-1-3-æŒ‡é’ˆ" class="headerlink" title="3.1.3 æŒ‡é’ˆ"></a>3.1.3 æŒ‡é’ˆ</h6><p>æŠŠå†…å­˜æƒ³è±¡æˆä¸€æ¡é•¿è¡—ï¼Œæ¯é—´æˆ¿å­éƒ½ç”¨ä¸€ä¸ªå”¯ä¸€çš„å·ç è¿›è¡Œæ ‡è¯†ã€‚æ¯ä¸€ä¸ªä½ç½®åŒ…å«ä¸€ä¸ªå€¼ï¼Œè¿™å’Œå®ƒçš„åœ°å€å¼ç‹¬ç«‹ä¸”æ˜¾è‘—ä¸åŒçš„ï¼Œå³ä½¿ä»–ä»¬éƒ½æ˜¯æ•°å­—ã€‚</p><p>ä¸€ã€æŒ‡é’ˆå¸¸é‡</p><p>äºŒã€å­—ç¬¦ä¸²å¸¸é‡</p><p>å­—ç¬¦ä¸²ï¼šä¸€ä¸²ä»¥NULå­—èŠ‚ç»“å°¾çš„é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚å­—ç¬¦ä¸²é€šå¸¸å­˜å‚¨åœ¨å­—ç¬¦æ•°ç»„æ€»ï¼Œæ‰€ä»¥cè¯­è¨€ä¸­æ²¡æœ‰æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ç±»å‹ã€‚</p><pre><code class="c">int main(){    printf(&quot;%lu\n&quot;,sizeof(&quot;&quot;)); // 1ï¼Œè™½ç„¶å­—ç¬¦ä¸²ä¸ºç©ºï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šåˆ†é…å†…å­˜    return 0;}</code></pre><p>åœ¨ç¨‹åºä¸­ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æ—¶ä¼šç”Ÿæˆä¸€ä¸ªâ€œæŒ‡å‘å­—ç¬¦çš„å¸¸é‡æŒ‡é’ˆâ€ï¼Œå½“ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡å‡ºç°äºä¸€ä¸ªè¡¨è¾¾å¼ä¸­æ—¶ï¼Œè¡¨è¾¾å¼æ‰€ä½¿ç”¨çš„å€¼å°±æ˜¯è¿™äº›å­—ç¬¦æ‰€å­˜å‚¨çš„åœ°å€ï¼Œè€Œä¸æ˜¯è¿™äº›å­—ç¬¦æœ¬èº«ã€‚å› æ­¤ï¼Œå¯ä»¥æŠŠå­—ç¬¦ä¸²å¸¸é‡èµ‹å€¼ç»™ä¸€ä¸ªâ€œæŒ‡å‘å­—ç¬¦çš„æŒ‡é’ˆâ€ã€‚ä½†æ˜¯ä¸èƒ½æŠŠå­—ç¬¦ä¸²å¸¸é‡èµ‹å€¼ç»™ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œå› ä¸ºå­—ç¬¦ä¸²å¸¸é‡çš„ç›´æ¥å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè€Œä¸æ˜¯è¿™äº›å­—ç¬¦æœ¬èº«ã€‚</p><h5 id="3-2-åŸºæœ¬ç”³æ˜"><a href="#3-2-åŸºæœ¬ç”³æ˜" class="headerlink" title="3.2 åŸºæœ¬ç”³æ˜"></a>3.2 åŸºæœ¬ç”³æ˜</h5><p>int a;</p><h6 id="3-2-1-åˆå§‹åŒ–"><a href="#3-2-1-åˆå§‹åŒ–" class="headerlink" title="3.2.1 åˆå§‹åŒ–"></a>3.2.1 åˆå§‹åŒ–</h6><h6 id="3-2-2-å£°æ˜ç®€å•æ•°ç»„"><a href="#3-2-2-å£°æ˜ç®€å•æ•°ç»„" class="headerlink" title="3.2.2 å£°æ˜ç®€å•æ•°ç»„"></a>3.2.2 å£°æ˜ç®€å•æ•°ç»„</h6><pre><code class="c">int arr[100];</code></pre><h6 id="3-2-3-å£°æ˜æŒ‡é’ˆ"><a href="#3-2-3-å£°æ˜æŒ‡é’ˆ" class="headerlink" title="3.2.3 å£°æ˜æŒ‡é’ˆ"></a>3.2.3 å£°æ˜æŒ‡é’ˆ</h6><pre><code class="c">int *a;int *b,*c;char *message = &quot;hello world&quot;;/*char *message;message = &quot;hello world&quot;;*/</code></pre><h6 id="3-2-4-éšå¼å£°æ˜"><a href="#3-2-4-éšå¼å£°æ˜" class="headerlink" title="3.2.4 éšå¼å£°æ˜"></a>3.2.4 éšå¼å£°æ˜</h6><p>å‡½æ•°å¦‚æœä¸æ˜¾ç¤ºçš„å£°æ˜è¿”å›å€¼çš„ç±»å‹ï¼Œå°±é»˜è®¤è¿”å›æ•´å‹ã€‚</p><pre><code class="c">f(int x){    return x*2;}int main(){    printf(&quot;ret = %d\n&quot;,f(3));    return 0;}</code></pre><h5 id="3-3-typedef"><a href="#3-3-typedef" class="headerlink" title="3.3 typedef"></a>3.3 typedef</h5><p>ä¸ºæ•°æ®ç±»å‹å®šä¹‰æ–°çš„åå­—ï¼Œè€Œä¸æ˜¯äº§ç”Ÿæ–°çš„ç±»å‹ã€‚</p><pre><code class="c">int const a;const int a; // äºŒè€…ç­‰ä»·int const *pi; // constä¿®é¥° *pi ï¼Œå¯ä»¥ä¿®æ”¹piçš„å€¼ä½†æ˜¯ä¸å¯ä»¥ä¿®æ”¹piæ‰€æŒ‡å‘çš„åœ°å€çš„å€¼int * const cpi; // å¯ä»¥ä¿®æ”¹cpiæ‰€æŒ‡å‘åœ°å€çš„å€¼ä½†æ˜¯ä¸å¯ä»¥ä¿®æ”¹cpiæŒ‡å‘çš„åœ°å€ã€‚int const * const cpci; // æ— è®ºæ˜¯cpciæŒ‡é’ˆæœ¬èº«è¿˜æ˜¯å®ƒæ‰€æŒ‡å‘çš„åœ°å€çš„å€¼ éƒ½ä¸å¯ä»¥ä¿®æ”¹</code></pre><h5 id="3-5-ä½œç”¨åŸŸ"><a href="#3-5-ä½œç”¨åŸŸ" class="headerlink" title="3.5 ä½œç”¨åŸŸ"></a>3.5 ä½œç”¨åŸŸ</h5><h6 id="3-5-1-ä»£ç å—ä½œç”¨åŸŸ"><a href="#3-5-1-ä»£ç å—ä½œç”¨åŸŸ" class="headerlink" title="3.5.1 ä»£ç å—ä½œç”¨åŸŸ"></a>3.5.1 ä»£ç å—ä½œç”¨åŸŸ</h6><p>ä»»ä½•åœ¨ä»£ç å—çš„å¼€å§‹ä½ç½®å£°æ˜çš„æ ‡è¯†ç¬¦éƒ½å…·æœ‰ä»£ç å—ä½œç”¨åŸŸã€‚</p><h6 id="3-5-2-æ–‡ä»¶ä½œç”¨åŸŸ"><a href="#3-5-2-æ–‡ä»¶ä½œç”¨åŸŸ" class="headerlink" title="3.5.2 æ–‡ä»¶ä½œç”¨åŸŸ"></a>3.5.2 æ–‡ä»¶ä½œç”¨åŸŸ</h6><p>åœ¨ä»£ç å—ä¹‹å¤–å£°æ˜çš„æ ‡è¯†ç¬¦éƒ½å…·æœ‰æ–‡ä»¶ä½œç”¨åŸŸã€‚</p><h6 id="3-5-3-åŸå‹ä½œç”¨åŸŸ"><a href="#3-5-3-åŸå‹ä½œç”¨åŸŸ" class="headerlink" title="3.5.3 åŸå‹ä½œç”¨åŸŸ"></a>3.5.3 åŸå‹ä½œç”¨åŸŸ</h6><p>åªé€‚ç”¨äºåœ¨å‡½æ•°åŸå‹ä¸­å£°æ˜çš„å‚æ•°åã€‚</p><pre><code class="c">int f(int x){ return x;  }</code></pre><h5 id="3-6-é“¾æ¥å±æ€§"><a href="#3-6-é“¾æ¥å±æ€§" class="headerlink" title="3.6 é“¾æ¥å±æ€§"></a>3.6 é“¾æ¥å±æ€§</h5><p>æ ‡è¯†ç¬¦çš„é“¾æ¥å±æ€§å†³å®šå¦‚ä½•å¤„ç†åœ¨ä¸åŒæ–‡ä»¶ä¸­å‡ºç°çš„æ ‡è¯†ç¬¦ã€‚</p><p>é“¾æ¥å±æ€§</p><ul><li><p>external (extern)</p><p>å±äºexternalé“¾æ¥å±æ€§çš„è¡¨ç¤ºç¬¦ä¸è®ºå£°æ˜å¤šå°‘æ¬¡ã€ä½äºå‡ ä¸ªæºæ–‡ä»¶éƒ½è¡¨ç¤ºåŒä¸€å®ä½“ã€‚</p></li><li><p>internal (static)</p><p>å±äºinternalçš„è¿æ¥å±æ€§çš„æ ‡è¯†ç¬¦åœ¨åŒä¸€æºæ–‡ä»¶å†…çš„æ‰€æœ‰å£°æ˜ä¸­éƒ½æŒ‡åŒä¸€ä¸ªå®ä½“ã€‚</p></li><li><p>none (auto)</p><p>æ²¡æœ‰é“¾æ¥å±æ€§çš„æ ‡è¯†ç¬¦æ€»æ˜¯è¢«å½“åšå•ç‹¬çš„ä¸ªä½“ã€‚</p></li></ul><h5 id="3-7-å­˜å‚¨ç±»å‹"><a href="#3-7-å­˜å‚¨ç±»å‹" class="headerlink" title="3.7 å­˜å‚¨ç±»å‹"></a>3.7 å­˜å‚¨ç±»å‹</h5><p>å˜é‡çš„å­˜å‚¨ç±»å‹æ˜¯æŒ‡å­˜å‚¨å˜é‡å€¼çš„å†…å­˜ç±»å‹ã€‚å˜é‡çš„å­˜å‚¨ç±»å‹å†³å®šå˜é‡ä½•æ—¶åˆ›å»ºã€ä½•æ—¶é”€æ¯ä»¥åŠå®ƒçš„å€¼å°†ä¿æŒå¤šä¹…ã€‚</p><ul><li>æ™®é€šå†…å­˜</li><li>è¿è¡Œæ—¶å †æ ˆ</li><li>ç¡¬ä»¶å¯„å­˜å™¨</li></ul><p>å˜é‡çš„ç¼ºçœå­˜å‚¨ç±»å‹å–å†³äºå®ƒçš„å£°æ˜ä½ç½®ã€‚åœ¨ä»»ä½•ä»£ç å—ä¹‹å¤–å£°æ˜çš„å˜é‡æ€»æ˜¯å­˜å‚¨äºé™æ€å†…å­˜ä¸­(ä¸å±äºå †æ ˆ)ï¼Œè¿™ç±»å˜é‡ç§°ä¸ºé™æ€å˜é‡ã€‚é™æ€å˜é‡åœ¨ç¨‹åºè¿è¡Œä¹‹å‰åˆ›å»ºï¼Œåœ¨ç¨‹åºçš„æ•´ä¸ªæ‰§è¡ŒæœŸé—´å§‹ç»ˆå­˜åœ¨ã€‚</p><p>åœ¨ä»£ç å—å†…éƒ¨å£°æ˜çš„å˜é‡çš„ç¼ºçœå†…å­˜å­˜å‚¨ç±»å‹æ˜¯è‡ªåŠ¨çš„(automatic)ï¼Œå®ƒå­˜å‚¨äºå †æ ˆä¸­ï¼Œç§°ä¸ºè‡ªåŠ¨(auto)å˜é‡ã€‚åœ¨ç¨‹åºæ‰§è¡Œåˆ°å£°æ˜è‡ªåŠ¨å˜é‡çš„ä»£ç å—æ—¶ï¼Œè‡ªåŠ¨å˜é‡æ‰è¢«åˆ›å»ºï¼Œå½“ç¨‹åºç¦»å¼€è¯¥ä»£ç å—æ—¶è‡ªè¡Œé”€æ¯ã€‚</p><p>å¯¹äºåœ¨ä»£ç å—å†…éƒ¨å£°æ˜çš„å˜é‡ï¼ŒåŠ ä¸Šstaticå…³é”®å­—ï¼Œå¯ä»¥ä½¿å®ƒçš„å­˜å‚¨ç±»å‹ä»è‡ªåŠ¨å˜ä¸ºé™æ€ã€‚å…·æœ‰é™æ€å­˜å‚¨ç±»å‹çš„å˜é‡åœ¨æ•´ä¸ªç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸€ç›´å­˜åœ¨ï¼Œè€Œä¸ä»…ä»…åœ¨å£°æ˜å®ƒçš„ä»£ç å—çš„æ‰§è¡Œæ—¶å­˜åœ¨ã€‚ä¿®æ”¹å˜é‡çš„å­˜å‚¨ç±»å‹å¹¶ä¸è¡¨ç¤ºä¿®æ”¹è¯¥å˜é‡çš„ä½œç”¨åŸŸï¼Œå®ƒä»ç„¶åªèƒ½åœ¨è¯¥ä»£ç å—å†…éƒ¨æŒ‰å˜é‡åè®¿é—®ã€‚å‡½æ•°å½¢å¼å‚æ•°ä¸èƒ½å£°æ˜ä¸ºé™æ€ï¼Œå› ä¸ºå®å‚æ€»æ˜¯åœ¨å †æ ˆä¸­ä¼ é€’ç»™å‡½æ•°ï¼Œç”¨äºæ”¯æŒé€’å½’ã€‚</p><p>registerå¯ä»¥ç”¨äºè‡ªåŠ¨å˜é‡å£°æ˜ï¼Œæç¤ºä»–ä»¬åº”è¯¥å­˜å‚¨äºæœºå™¨çš„ç¡¬ä»¶å¯„å­˜å™¨è€Œä¸æ˜¯å†…å­˜ä¸­ï¼Œè¿™ç±»å˜é‡ç§°ä¸ºå¯„å­˜å™¨å˜é‡(å› ä¸ºä¸åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨&amp;å–åœ°å€ã€‚)</p><p>åˆå§‹åŒ–</p><ul><li><p>é™æ€å˜é‡</p><p>é™æ€å˜é‡çš„åˆå§‹åŒ–ä¸­ï¼Œå¯ä»¥æŠŠå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶æƒ³è¦åˆå§‹åŒ–çš„å€¼æ”¾åœ¨å½“ç¨‹åºæ‰§è¡Œæ—¶å˜é‡å°†ä¼šä½¿ç”¨çš„ä½ç½®ã€‚å½“å¯æ‰§è¡Œæ–‡ä»¶è½½å…¥åˆ°å†…å­˜æ—¶ï¼Œè¿™ä¸ªå·²ç»ä¿å­˜äº†æ­£ç¡®åˆå§‹å€¼çš„ä½ç½®å°†èµ‹å€¼ç»™é‚£ä¸ªå˜é‡ã€‚å®Œæˆè¿™ä¸ªä»»åŠ¡å¹¶ä¸éœ€è¦é¢å¤–æ—¶é—´ï¼Œä¹Ÿä¸éœ€è¦é¢å¤–æŒ‡ä»¤ï¼Œå˜é‡å°†ä¼šå¾—åˆ°æ­£ç¡®çš„å€¼ã€‚å¦‚æœä¸æ˜¾å¼çš„æŒ‡å®šå…¶åˆå§‹å€¼ï¼Œé™æ€å˜é‡å°†åˆå§‹åŒ–ä¸º0ã€‚</p></li><li><p>è‡ªåŠ¨å˜é‡</p><p>è‡ªåŠ¨å˜é‡åˆå§‹åŒ–éœ€è¦æ›´å¤šçš„å¼€é”€ï¼Œå› ä¸ºå½“ç¨‹åºé“¾æ¥æ—¶è¿˜æ— æ³•åˆ¤æ–­è‡ªåŠ¨å˜é‡çš„å­˜å‚¨ä½ç½®ã€‚</p></li></ul><h4 id="ç¬¬å…­ç« -æŒ‡é’ˆ"><a href="#ç¬¬å…­ç« -æŒ‡é’ˆ" class="headerlink" title="ç¬¬å…­ç«  æŒ‡é’ˆ"></a>ç¬¬å…­ç«  æŒ‡é’ˆ</h4><h5 id="6-14-æ€»ç»“"><a href="#6-14-æ€»ç»“" class="headerlink" title="6.14 æ€»ç»“"></a>6.14 æ€»ç»“</h5><p>å£°æ˜ä¸€ä¸ªæŒ‡é’ˆå˜é‡å¹¶ä¸ä¼šè‡ªåŠ¨åˆ†é…ä»»ä½•å†…å­˜ã€‚</p><h5 id="ç¬¬ä¸ƒç« -å‡½æ•°"><a href="#ç¬¬ä¸ƒç« -å‡½æ•°" class="headerlink" title="ç¬¬ä¸ƒç«  å‡½æ•°"></a>ç¬¬ä¸ƒç«  å‡½æ•°</h5><pre><code class="c">int*find_int(int key, int arr[], int length);</code></pre><p>è¿™ç§å£°æ˜æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ç”¨å•ç‹¬çš„ä¸€è¡Œç»™å‡ºå‚æ•°çš„ç±»å‹ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±åªè®°ä½å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œä¸ä¿å­˜å‡½æ•°çš„å‚æ•°æ•°é‡å’Œç±»å‹ä¿¡æ¯ã€‚</p><pre><code>int func();è¿™ç§å£°æ˜ä¼šè¢«è§£é‡Šä¸ºæ—§å¼é£æ ¼çš„å£°æ˜ï¼Œåªä¿å­˜äº†å‡½æ•°çš„è¿”å›å€¼ç±»å‹ã€‚int func(void);ä½¿ç”¨æ–°é£æ ¼åŸå‹æ—¶ï¼Œå¾—åŠ ä¸Švoidæç¤ºæ²¡æœ‰ä»»ä½•å‚æ•°</code></pre><h5 id="7-3-å‡½æ•°çš„å‚æ•°"><a href="#7-3-å‡½æ•°çš„å‚æ•°" class="headerlink" title="7.3 å‡½æ•°çš„å‚æ•°"></a>7.3 å‡½æ•°çš„å‚æ•°</h5><p>Cå‡½æ•°çš„æ‰€æœ‰å‚æ•°å‡ä»¥â€œå€¼ä¼ é€’è°ƒç”¨â€æ–¹å¼è¿›è¡Œä¼ é€’ã€‚(å‚æ•°ä¸ºæŒ‡é’ˆæ—¶ä¹Ÿä¼šå‘ç”Ÿå€¼æ‹·è´ï¼Œæ‹·è´åœ°å€)</p><h5 id="7-6-å¯å˜å‚æ•°åˆ—è¡¨"><a href="#7-6-å¯å˜å‚æ•°åˆ—è¡¨" class="headerlink" title="7.6 å¯å˜å‚æ•°åˆ—è¡¨"></a>7.6 å¯å˜å‚æ•°åˆ—è¡¨</h5><h6 id="7-6-1-stdargå®"><a href="#7-6-1-stdargå®" class="headerlink" title="7.6.1 stdargå®"></a>7.6.1 stdargå®</h6><h4 id="ç¬¬å…«ç« -æ•°ç»„"><a href="#ç¬¬å…«ç« -æ•°ç»„" class="headerlink" title="ç¬¬å…«ç«  æ•°ç»„"></a>ç¬¬å…«ç«  æ•°ç»„</h4><ul><li><p>ä¸‹æ ‡ï¼šä¸ºäº†å¯¹ä¸‹æ ‡è¡¨è¾¾å¼æ±‚å€¼ï¼Œç¼–è¯‘å™¨åœ¨ç¨‹åºä¸­æ’å…¥æŒ‡ä»¤ï¼Œå–å¾—açš„å€¼ï¼Œå¹¶æŠŠå®ƒä¸æ•´å½¢çš„é•¿åº¦(ä¹Ÿå°±æ˜¯4)ç›¸ä¹˜ï¼Œè¿™ä¸ªä¹˜æ³•éœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´å’Œç©ºé—´ã€‚</p></li><li><p>æŒ‡é’ˆï¼šå°½ç®¡ä¸å­˜åœ¨ä¸‹æ ‡ï¼Œä½†è¿˜æ˜¯å­˜åœ¨ä¹˜æ³•è¿ç®—ï¼Œ1è¿™ä¸ªå€¼å¿…é¡»å’Œæ•´æ•°çš„é•¿åº¦ç›¸ä¹˜ï¼Œç„¶åå†ä¸æŒ‡é’ˆç›¸åŠ ã€‚ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé‡å¤§åŒºåˆ«ï¼šå¾ªç¯æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œæ‰§è¡Œä¹˜æ³•çš„è¿ç®—éƒ½æ˜¯ä¸¤ä¸ªç›¸åŒçš„æ•°(1å’Œ4)ã€‚ç»“æœï¼Œè¿™ä¸ªä¹˜æ³•åªåœ¨ç¼–è¯‘æ—¶æ‰§è¡Œä¸€æ¬¡â€”-ç¨‹åºç°åœ¨åŒ…å«äº†ä¸€æ¡æŒ‡ä»¤ï¼ŒæŠŠ4ä¸æŒ‡é’ˆç›¸åŠ ã€‚ç¨‹åºåœ¨æ‰§è¡Œæ—¶å¹¶ä¸æ‰§è¡Œä¹˜æ³•è¿ç®—ã€‚</p><pre><code class="c">int main(){    int arr[100] = { 0 }, *ap;    for (int i = 0; i &lt; 100; ++i) { // ä¸‹æ ‡        arr[i] = 0;    }    for (ap = arr; ap &lt; arr+10; ++ap) { // æŒ‡é’ˆ        *ap = 0;    }    return 0;}</code></pre></li></ul><h5 id="8-1-ä¸€ç»´æ•°ç»„"><a href="#8-1-ä¸€ç»´æ•°ç»„" class="headerlink" title="8.1 ä¸€ç»´æ•°ç»„"></a>8.1 ä¸€ç»´æ•°ç»„</h5><h6 id="8-1-1-æ•°ç»„å"><a href="#8-1-1-æ•°ç»„å" class="headerlink" title="8.1.1 æ•°ç»„å"></a>8.1.1 æ•°ç»„å</h6><pre><code class="c">int a; // æ ‡é‡int b[10]; // é›†åˆï¼Œç§°ä¸ºæ•°ç»„</code></pre><p>æ•°æ®åæ˜¯å¸¸é‡æŒ‡é’ˆã€‚</p><p>æ•°ç»„ååœ¨ä¸¤ç§æƒ…å†µä¸‹è¡¨ç¤ºæ•´ä¸ªæ•°ç»„ï¼Œå…¶ä½™ä¸€å¾‹è¡¨ç¤ºé¦–å…ƒç´ ã€‚</p><pre><code>int arr[10];sizeof(arr);&amp;arr;</code></pre><h6 id="8-1-2-ä¸‹æ ‡å¼•ç”¨"><a href="#8-1-2-ä¸‹æ ‡å¼•ç”¨" class="headerlink" title="8.1.2 ä¸‹æ ‡å¼•ç”¨"></a>8.1.2 ä¸‹æ ‡å¼•ç”¨</h6><p>æ•°ç»„ä¸‹æ ‡å¼•ç”¨å’Œé—´æ¥è®¿é—®å®Œå…¨ç›¸åŒã€‚</p><p>Cæ£€æŸ¥ä¸‹æ ‡æ‰€æ¶‰åŠçš„å¼€é”€æ¯”ä½ æƒ³è±¡çš„å¤§å¾—å¤šã€‚ç¼–è¯‘å™¨å¿…é¡»åœ¨ç¨‹åºä¸­æ’å…¥æŒ‡ä»¤ï¼Œè¯å®ä¸‹æ ‡è¡¨è¾¾å¼çš„ç»“æœæ‰€å¼•ç”¨çš„å…ƒç´ å’ŒæŒ‡é’ˆè¡¨è¾¾å¼æ‰€æŒ‡å‘çš„å…ƒç´ å±äºåŒä¸€æ•°ç»„ã€‚è¿™ä¸ªæ¯”è¾ƒæ“ä½œéœ€è¦ç¨‹åºä¸­æ‰€æœ‰æ•°ç»„çš„ä½ç½®å’Œé•¿åº¦æ–¹é¢çš„ä¿¡æ¯ã€‚è¿™å°†å ç”¨ä¸€äº›ç©ºé—´ã€‚å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œè¿™äº›ä¿¡æ¯å¿…é¡»è¿›è¡Œæ›´æ–°ï¼Œä»¥åæ˜ è‡ªåŠ¨å’ŒåŠ¨æ€åˆ†é…çš„æ•°ç»„ï¼Œè¿™åˆå°†å ç”¨ä¸€å®šçš„æ—¶é—´ã€‚</p><h6 id="8-1-3-æŒ‡é’ˆä¸ä¸‹æ ‡"><a href="#8-1-3-æŒ‡é’ˆä¸ä¸‹æ ‡" class="headerlink" title="8.1.3 æŒ‡é’ˆä¸ä¸‹æ ‡"></a>8.1.3 æŒ‡é’ˆä¸ä¸‹æ ‡</h6><pre><code class="c">int main(){    int arr1[10],a;     for ( a = 0; a &lt; 10; ++a) {        arr1[a] = 0;    }    return 0;}</code></pre><p>ä¸ºäº†å¯¹ä¸‹æ ‡è¡¨è¾¾å¼æ±‚å€¼ï¼Œç¼–è¯‘å™¨åœ¨ç¨‹åºä¸­æ’å…¥æŒ‡ä»¤ï¼Œå–å¾—açš„å€¼ï¼Œå¹¶æŠŠå®ƒä¸æ•´å½¢çš„é•¿åº¦(4)ç›¸ä¹˜ã€‚è¿™ä¸ªä¹˜æ³•éœ€è¦èŠ±è´¹ä¸€å®šçš„ç©ºé—´å’Œæ—¶é—´ã€‚</p><pre><code class="c">int main(){    int arr2[10],*ap;    for (ap=arr2; ap &lt; arr2; ++ap) {        *ap = 0;    }    return 0;}</code></pre><p>è¿™é‡Œçš„ä¹˜æ³•è¿ç®—å‡ºç°åœ¨forè¯­å¥çš„è°ƒæ•´éƒ¨åˆ†(++ap)ï¼Œ1è¿™ä¸ªå€¼å¿…é¡»ä¸æ•´å½¢çš„é•¿åº¦ç›¸ä¹˜ï¼Œç„¶åå†ä¸æŒ‡é’ˆç›¸åŠ ã€‚ä½†æ˜¯è¿™é‡Œå­˜åœ¨å¾ˆå¤§çš„åŒºåˆ«ï¼šå¾ªç¯æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œæ‰§è¡Œä¹˜æ³•è¿ç®—çš„éƒ½æ˜¯ä¸¤ä¸ªç›¸åŒçš„æ•°(1å’Œ4)ã€‚ç»“æœè¿™ä¸ªä¹˜æ³•åªä¼šåœ¨ç¼–è¯‘æ—¶æ‰§è¡Œä¸€æ¬¡â€”-ç¨‹åºåŒ…å«ä¸€æ¡æŒ‡ä»¤ï¼ŒæŠŠ4ä¸æŒ‡é’ˆç›¸åŠ ã€‚ç¨‹åºåœ¨è¿è¡Œæ—¶å¹¶ä¸æ‰§è¡Œä¹˜æ³•è¿ç®—ã€‚</p><h6 id="8-1-4-æŒ‡é’ˆçš„æ•ˆç‡"><a href="#8-1-4-æŒ‡é’ˆçš„æ•ˆç‡" class="headerlink" title="8.1.4 æŒ‡é’ˆçš„æ•ˆç‡"></a>8.1.4 æŒ‡é’ˆçš„æ•ˆç‡</h6><h6 id="8-1-5-æŒ‡é’ˆå’Œæ•°ç»„"><a href="#8-1-5-æŒ‡é’ˆå’Œæ•°ç»„" class="headerlink" title="8.1.5 æŒ‡é’ˆå’Œæ•°ç»„"></a>8.1.5 æŒ‡é’ˆå’Œæ•°ç»„</h6><p>æ•°ç»„å’ŒæŒ‡é’ˆä¸ç›¸ç­‰ã€‚</p><pre><code class="c">int a[5];int *p;</code></pre><p>å£°æ˜ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œç¼–è¯‘å™¨å°†æ ¹æ®å£°æ˜æ‰€æŒ‡å®šçš„å…ƒç´ æ•°é‡ä¸ºæ•°ç»„ä¿å­˜å†…å­˜ç©ºé—´ï¼Œç„¶ååˆ›å»ºæ•°ç»„åï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¸¸é‡ï¼ŒæŒ‡å‘è¿™æ®µç©ºé—´çš„èµ·å§‹ä½ç½®ã€‚</p><p>å£°æ˜ä¸€ä¸ªæŒ‡é’ˆå˜é‡æ—¶ï¼Œç¼–è¯‘å™¨åªä¸ºæŒ‡é’ˆæœ¬èº«ä¿ç•™å†…å­˜ç©ºé—´ï¼Œå®ƒå¹¶ä¸ä¸ºä»»ä½•æ•´å½¢å€¼åˆ†é…å†…å­˜ç©ºé—´ã€‚è€Œä¸”æŒ‡é’ˆå˜é‡å¹¶æœªè¢«åˆå§‹åŒ–ä¸ºæŒ‡å‘ä»»ä½•ç°æœ‰çš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªè‡ªåŠ¨å˜é‡ï¼Œå®ƒç”šè‡³ä¸ä¼šè¢«åˆå§‹åŒ–ã€‚</p><p>å› æ­¤ï¼š*aæ˜¯åˆæ³•çš„ã€‚*bå°†è®¿é—®å†…å­˜ä¸­æŸä¸ªä¸ç¡®å®šçš„ä½ç½®ï¼Œæˆ–è€…å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚ä½†æ˜¯b++å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œa++ç¼ºä¸è¡Œï¼Œå› ä¸ºaæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚</p><h6 id="8-1-6-ä½œä¸ºå‡½æ•°å‚æ•°çš„æ•°ç»„å"><a href="#8-1-6-ä½œä¸ºå‡½æ•°å‚æ•°çš„æ•°ç»„å" class="headerlink" title="8.1.6 ä½œä¸ºå‡½æ•°å‚æ•°çš„æ•°ç»„å"></a>8.1.6 ä½œä¸ºå‡½æ•°å‚æ•°çš„æ•°ç»„å</h6><p>ä¸€ä¸ªæ•°ç»„åä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼šåœ¨å‡½æ•°ä¼ å‚æ—¶å°±ä¼šå‘ç”Ÿæ‹·è´ã€‚å¯çŸ¥æ•°ç»„æ˜¯ä¸€ä¸ªåœ°å€å¸¸é‡ï¼Œåœ¨ä¼ å‚ç»™å‡½æ•°æ—¶ï¼Œå‘ç”Ÿåœ°å€æ‹·è´ï¼Œæ•°ç»„å(åœ°å€å¸¸é‡)ä¼ é€’ç»™å‡½æ•°çš„å½¢å‚ï¼Œå½¢å‚å®ä¾‹åŒ–æˆä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼ŒæŒ‡é’ˆå˜é‡å­˜æ”¾æ•°ç»„çš„åœ°å€å¸¸é‡ã€‚å› æ­¤æ•°ç»„åœ°å€ä¼ å…¥å‡½æ•°ä¹‹åï¼Œå‘ç”Ÿé™ç»´ï¼Œé™ç»´æˆä¸€ä¸ªæŒ‡é’ˆã€‚å‡½æ•°å¦‚æœæ‰§è¡Œäº†ä¸‹æ ‡åº”ç”¨ï¼Œå®é™…å±±æ˜¯å¯¹è¿™ä¸ªæŒ‡é’ˆè¿›è¡Œé—´æ¥è®¿é—®æ“ä½œï¼Œå¹¶ä¸”é€šè¿‡è¿™ç§é—´æ¥è®¿é—®ï¼Œå‡½æ•°å¯ä»¥è®¿é—®å’Œä¿®æ”¹è°ƒç”¨ç¨‹åºçš„æ•°ç»„å…ƒç´ ã€‚</p><h6 id="8-1-7-å£°æ˜æ•°ç»„å‚æ•°"><a href="#8-1-7-å£°æ˜æ•°ç»„å‚æ•°" class="headerlink" title="8.1.7 å£°æ˜æ•°ç»„å‚æ•°"></a>8.1.7 å£°æ˜æ•°ç»„å‚æ•°</h6><pre><code>int strlen(char *string);int strlen(char string[]);</code></pre><h6 id="8-1-8-åˆå§‹åŒ–"><a href="#8-1-8-åˆå§‹åŒ–" class="headerlink" title="8.1.8 åˆå§‹åŒ–"></a>8.1.8 åˆå§‹åŒ–</h6><pre><code>char message1[] = &quot;Hello&quot;;char *message2 = &quot;Hello&quot;;</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/15150075-912a16aa87956bdb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h6 id="8-2-3-ä¸‹æ ‡"><a href="#8-2-3-ä¸‹æ ‡" class="headerlink" title="8.2.3 ä¸‹æ ‡"></a>8.2.3 ä¸‹æ ‡</h6><pre><code>int matrix[3][10];</code></pre><ul><li><p>matrix</p><p><img src="https://upload-images.jianshu.io/upload_images/15150075-4e7271031de98d6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>martrixæ­¤æ—¶æŒ‡å‘ç¬¬ä¸€ä¸ªäºŒç»´æ•°ç»„</p></li><li><p>matrix+1</p><p><img src="https://upload-images.jianshu.io/upload_images/15150075-cf614cf0e6dea534.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li><li><p>*(matrix+1)</p><p><img src="https://upload-images.jianshu.io/upload_images/15150075-abe44a68c361cd8e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li><li><p>*(matrix+1)+5</p><p><img src="https://upload-images.jianshu.io/upload_images/15150075-921e9fc90ec740f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p></li></ul><h5 id="8-5-æ€»ç»“"><a href="#8-5-æ€»ç»“" class="headerlink" title="8.5 æ€»ç»“"></a>8.5 æ€»ç»“</h5><ul><li>åœ¨ç»å¤§å¤šæ•°è¡¨è¾¾å¼ä¸­ï¼Œæ•°ç»„åæ˜¯æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚åªæœ‰ä¸¤ä¸ªè§„åˆ™ä¾‹å¤–ï¼š<ul><li>sizeof(arr)ï¼Œè¿”å›æ•´ä¸ªæ•°ç»„å ç”¨çš„å­—èŠ‚ï¼Œè€Œä¸æ˜¯è¿”å›æŒ‡é’ˆå ç”¨çš„å­—èŠ‚ã€‚</li><li>&amp;arrï¼Œå•ç›®æ“ä½œç¬¦&amp;è¿”å›ä¸€ä¸ªæŒ‡å‘æ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆçš„æŒ‡é’ˆã€‚</li></ul></li><li>æŒ‡é’ˆå’Œæ•°ç»„ä¸ç›¸ç­‰ã€‚<ul><li>å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼ŒåŒæ—¶ä¹Ÿåˆ†é…äº†ä¸€äº›å†…å­˜ï¼Œç”¨äºå®¹çº³æ•°ç»„å…ƒç´ ã€‚</li><li>å£°æ˜ä¸€ä¸ªæŒ‡é’ˆï¼Œåªåˆ†é…ç”¨äºå®¹çº³æŒ‡é’ˆæœ¬èº«çš„ç©ºé—´ã€‚</li></ul></li><li>å½“æ•°ç»„åä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ã€‚å®é™…ä¼ é€’çš„æ˜¯ä¸€ä¸ªæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚å‡½æ•°æ‰€æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯åŸå‚æ•°çš„ä¸€ä»½æ‹·è´ï¼Œæ‰€ä»¥å‡½æ•°å¯ä»¥å¯¹å…¶è¿›è¡Œæ“çºµè€Œä¸å½±å“å®é™…çš„å‚æ•°ã€‚ä½†æ˜¯å¯¹æŒ‡é’ˆæ‰§è¡Œé—´æ¥è®¿é—®æ“ä½œå…è®¸å‡½æ•°ä¿®æ”¹åŸå…ˆæ•°ç»„çš„å…ƒç´ ã€‚</li><li>æ•°ç»„å½¢å‚æ—¢å¯ä»¥å£°æ˜æˆæ•°ç»„ä¹Ÿå¯ä»¥å£°æ˜æˆæŒ‡é’ˆï¼Œè¿™ä¸¤ç§å£°æ˜å½¢å¼åªæœ‰å½“ä»–ä»¬ä½œä¸ºå‡½æ•°å½¢å‚æ—¶æ‰ç›¸ç­‰ã€‚</li></ul><h4 id="ç¬¬ä¹ç« -å­—ç¬¦ä¸²ã€å­—ç¬¦å’Œå­—èŠ‚"><a href="#ç¬¬ä¹ç« -å­—ç¬¦ä¸²ã€å­—ç¬¦å’Œå­—èŠ‚" class="headerlink" title="ç¬¬ä¹ç«  å­—ç¬¦ä¸²ã€å­—ç¬¦å’Œå­—èŠ‚"></a>ç¬¬ä¹ç«  å­—ç¬¦ä¸²ã€å­—ç¬¦å’Œå­—èŠ‚</h4><h5 id="9-1-å­—ç¬¦ä¸²åŸºç¡€"><a href="#9-1-å­—ç¬¦ä¸²åŸºç¡€" class="headerlink" title="9.1 å­—ç¬¦ä¸²åŸºç¡€"></a>9.1 å­—ç¬¦ä¸²åŸºç¡€</h5><p>å­—ç¬¦ä¸²æ˜¯ä¸€ä¸²é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œä»¥NULç»“å°¾ã€‚</p><h5 id="9-3-ä¸å—é™åˆ¶çš„å­—ç¬¦ä¸²å‡½æ•°"><a href="#9-3-ä¸å—é™åˆ¶çš„å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="9.3 ä¸å—é™åˆ¶çš„å­—ç¬¦ä¸²å‡½æ•°"></a>9.3 ä¸å—é™åˆ¶çš„å­—ç¬¦ä¸²å‡½æ•°</h5><h6 id="9-3-1-å¤åˆ¶å­—ç¬¦ä¸²"><a href="#9-3-1-å¤åˆ¶å­—ç¬¦ä¸²" class="headerlink" title="9.3.1 å¤åˆ¶å­—ç¬¦ä¸²"></a>9.3.1 å¤åˆ¶å­—ç¬¦ä¸²</h6><p>char *strcpy(char *dst, char const *src);</p><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main(){    char dest[] = &quot;abcde&quot;;    strcpy(dest,&quot;xyz&quot;);    printf(&quot;%s\n&quot;,dest); // xyz    return 0;}</code></pre><p>ç›®æ ‡å‚æ•°ä»¥å‰çš„å†…å®¹å°†è¢«è¦†ç›–ï¼Œå³ä½¿æ–°çš„å­—ç¬¦ä¸²æ¯”deståŸå…ˆçš„å†…å­˜æ›´çŸ­ã€‚(NULä¹Ÿä¼šè¢«å¤åˆ¶)</p><p><img src="https://upload-images.jianshu.io/upload_images/15150075-5f82cd2ae2a6e440.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h6 id="9-3-2-è¿æ¥å­—ç¬¦ä¸²"><a href="#9-3-2-è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="9.3.2 è¿æ¥å­—ç¬¦ä¸²"></a>9.3.2 è¿æ¥å­—ç¬¦ä¸²</h6><p>char * strcat(char *dst, char const *src);</p><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main(){    char message[100] = {0};    strcat(message,&quot;hello&quot;);    strcat(message,&quot; world&quot;);    printf(&quot;%s\n&quot;,message);    return 0;}</code></pre><h6 id="9-3-3-å‡½æ•°çš„è¿”å›å€¼ã€‚"><a href="#9-3-3-å‡½æ•°çš„è¿”å›å€¼ã€‚" class="headerlink" title="9.3.3 å‡½æ•°çš„è¿”å›å€¼ã€‚"></a>9.3.3 å‡½æ•°çš„è¿”å›å€¼ã€‚</h6><p>strcpyå’Œstrcatéƒ½è¿”å›å®ƒä»¬ç¬¬ä¸€ä¸ªå‚æ•°çš„ä¸€ä»½æ‹·è´ï¼Œå°±æ˜¯æŒ‡å‘ç›®æ ‡å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆã€‚</p><h6 id="9-3-4-å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#9-3-4-å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="9.3.4 å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>9.3.4 å­—ç¬¦ä¸²æ¯”è¾ƒ</h6><p>int strcmp(char const *s1, char const *s2);</p><pre><code>int main(){    int ret = strcmp(&quot;duwei&quot;,&quot;zhangsan&quot;);    /*    if (ret){ // retçš„å€¼æœ‰ä¸‰ç§æƒ…å†µï¼šå¤§äº0ï¼Œç­‰äº0ï¼Œå°äº0ã€‚å°†å…¶ç”¨boolå€¼è¡¨è¾¾æ˜¯ä¸€ç§åé£æ ¼ï¼Œæ­£ç¡®çš„æ–¹å¼æ˜¯å°†å…¶ä¸0å€¼è¿›è¡Œæ¯”è¾ƒ        printf(&quot;duwei &gt; zhangsan&quot;);    }    */    if (ret &gt; 0){        printf(&quot;duwei &gt; zhangsan&quot;);    }    return 0;}</code></pre><h5 id="9-5-å­—ç¬¦ä¸²æŸ¥æ‰¾"><a href="#9-5-å­—ç¬¦ä¸²æŸ¥æ‰¾" class="headerlink" title="9.5 å­—ç¬¦ä¸²æŸ¥æ‰¾"></a>9.5 å­—ç¬¦ä¸²æŸ¥æ‰¾</h5><h6 id="9-5-1-æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦"><a href="#9-5-1-æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦" class="headerlink" title="9.5.1 æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦"></a>9.5.1 æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦</h6><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main(){    char message[] = &quot;learn C language.&quot;;    char *p1 = strchr(message,&#39;a&#39;); // è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®    printf(&quot;p1 - message = %lu\n&quot;,p1-message);    char *p2 = strrchr(message, &#39;a&#39;); // è¿”å›æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®    printf(&quot;p2 - message = %lu\n&quot;,p2-message);    return 0;}</code></pre><h6 id="9-5-2-æŸ¥æ‰¾ä»»ä½•å‡ ä¸ªå­—ç¬¦"><a href="#9-5-2-æŸ¥æ‰¾ä»»ä½•å‡ ä¸ªå­—ç¬¦" class="headerlink" title="9.5.2 æŸ¥æ‰¾ä»»ä½•å‡ ä¸ªå­—ç¬¦"></a>9.5.2 æŸ¥æ‰¾ä»»ä½•å‡ ä¸ªå­—ç¬¦</h6><p>char *strpbrk(char const *str, char const *group); æŸ¥æ‰¾ä¸€ç»„å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</p><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main(){    char message[] = &quot;learn C language.&quot;;    char *p = strpbrk(message,&quot;zC&quot;); // è¿”å›zæˆ–è€…Cç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œ    printf(&quot;%s\n&quot;,p);    return 0;}</code></pre><h6 id="9-5-3-æŸ¥æ‰¾ä¸€ä¸ªå­ä¸²"><a href="#9-5-3-æŸ¥æ‰¾ä¸€ä¸ªå­ä¸²" class="headerlink" title="9.5.3 æŸ¥æ‰¾ä¸€ä¸ªå­ä¸²"></a>9.5.3 æŸ¥æ‰¾ä¸€ä¸ªå­ä¸²</h6><p>char *strstr(char const *s1, char const *s2);</p><pre><code class="c">#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main(){    char message[] = &quot;learn C language.&quot;;    char *p = strstr(message,&quot;lang&quot;);    printf(&quot;%s\n&quot;,p);    return 0;}</code></pre><h5 id="9-9-å†…å­˜æ“ä½œ"><a href="#9-9-å†…å­˜æ“ä½œ" class="headerlink" title="9.9 å†…å­˜æ“ä½œ"></a>9.9 å†…å­˜æ“ä½œ</h5>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;ç¬¬3ç« &quot;&gt;&lt;a href=&quot;#ç¬¬3ç« &quot; class=&quot;headerlink&quot; title=&quot;ç¬¬3ç« &quot;&gt;&lt;/a&gt;ç¬¬3ç« &lt;/h4&gt;&lt;h5 id=&quot;3-1-åŸºæœ¬æ•°æ®ç±»å‹&quot;&gt;&lt;a href=&quot;#3-1-åŸºæœ¬æ•°æ®ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;3</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="book" scheme="http://blog.3amupupup.online/tags/book/"/>
    
  </entry>
  
  <entry>
    <title>C Primer Plus</title>
    <link href="http://blog.3amupupup.online/2021/03/18/C%20Primer%20Plus/"/>
    <id>http://blog.3amupupup.online/2021/03/18/C%20Primer%20Plus/</id>
    <published>2021-03-18T03:09:52.065Z</published>
    <updated>2021-03-18T03:09:52.066Z</updated>
    
    <content type="html"><![CDATA[<pre><code class="c">#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt;#include &lt;errno.h&gt;#include &lt;stddef.h&gt;#define LEN 40#define MAX 41/*å¸¸é‡ï¼šåœ¨ç¨‹åºä½¿ç”¨ä¹‹å‰å·²ç»é¢„è®¾å®šå¥½ï¼Œåœ¨æ•´ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰å˜åŒ–å˜é‡ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´å¯èƒ½ä¼šè¢«æ”¹å˜æˆ–è€…èµ‹å€¼æ•°æ®ï¼š    æ˜¾ç¤ºåè¿›åˆ¶æ•°ï¼š%d    æ˜¾ç¤ºå…«è¿›åˆ¶æ•°ï¼š%o    æ˜¾ç¤ºåå…­è¿›åˆ¶æ•°ï¼š%xæŒ‡é’ˆ&amp;æ•°ç»„ï¼š    æ•°ç»„åæ˜¯é¦–å…ƒç´ åœ°å€ï¼š        arr[i]=*(arr+i) äºŒè€…ç­‰ä»·        ç‰¹æ®Šæƒ…å†µï¼š            1. sizeof(æ•°ç»„å) - æ•°ç»„åè¡¨ç¤ºæ•´ä¸ªæ•°ç»„            2. &amp;æ•°ç»„å - æ•°ç»„åè¡¨ç¤ºæ•´ä¸ªæ•°ç»„    æŒ‡é’ˆæ“ä½œï¼š        èµ‹å€¼ï¼šå¯ä»¥æŠŠåœ°å€èµ‹ç»™æŒ‡é’ˆ        è§£å¼•ç”¨ï¼š*è¿ç®—ç¬¦è·å¾—æŒ‡é’ˆæŒ‡å‘åœ°å€ä¸Šå­˜å‚¨çš„å€¼        å–åœ°å€ï¼š&amp;è¿ç®—ç¬¦ï¼ŒæŒ‡é’ˆä¹Ÿæ‹¥æœ‰è‡ªå·±çš„åœ°å€        æŒ‡é’ˆä¸æ•´æ•°ç›¸åŠ ï¼šint *a = 1; a+1 å³ açš„åœ°å€ + sizeof(int)*1ï¼Œæ­¥é•¿ä¸ºaæŒ‡å‘çš„æ•°æ®ç±»å‹çš„å¤§å°        æŒ‡é’ˆæ±‚å·®        æ¯”è¾ƒï¼šå¦‚æœè¦ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆï¼Œé‚£ä¹ˆè¦ç¡®ä¿ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€æ•°æ®ç±»å‹çš„å¯¹è±¡        è§£å¼•ç”¨æœªåˆå§‹åŒ–çš„æŒ‡é’ˆï¼šä¸¥é‡çš„é”™è¯¯            int main(void){                int *pt; //é”™è¯¯å†™æ³•                int *pt = NULL; //æ­£ç¡®å†™æ³•                *pt = 100; // ptåœ¨å®šä¹‰ä¹‹åæœªè¢«åˆå§‹åŒ–ï¼Œå…¶å€¼æ˜¯ä¸€ä¸ªéšæœºå€¼ï¼Œä¸èƒ½ç¡®å®š100çš„å­˜å‚¨ä½ç½®ï¼Œè¿™å¯èƒ½ä¸ä¼šå‡ºä»€ä¹ˆé”™ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½æ“¦å†™æ•°æ®æˆ–ä»£ç ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå› æ­¤åˆ›å»ºæŒ‡é’ˆå¿…é¡»åˆå§‹åŒ–ï¼Œç‰¹æ®Šæƒ…å†µä¸‹å¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘NULL                printf(&quot;%d\n&quot;, *p);                return 0;            }    constï¼š        1ã€æŠŠconstæˆ–è€…éconstæ•°æ®çš„åœ°å€åˆå§‹åŒ–ä¸ºæŒ‡å‘constçš„æŒ‡é’ˆæˆ–è€…ä¸ºå…¶èµ‹å€¼æ˜¯åˆæ³•çš„ã€‚            int main(void){                int arr1[10] = {1,2,3,4,5,6,7,8,9,10};                const int arr2[10] = {11,12,13,14,15,16,17,18,19,20};                 const int * pt = arr1; //æŠŠptæŒ‡å‘çš„intç±»å‹çš„å€¼å£°æ˜ä¸ºconst(æ³¨æ„æ˜¯å€¼è€Œéåœ°å€)ï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿç”¨*ptä¿®æ”¹æ•°ç»„çš„å€¼ï¼Œä½†æ˜¯èƒ½ä¿®æ”¹ptæ‰€æŒ‡å‘çš„åœ°å€                pt = arr2;                pt = &amp;arr1[3];                return 0;            }        2ã€åªèƒ½æŠŠéconstæ•°æ®çš„åœ°å€èµ‹ç»™æ™®é€šæŒ‡é’ˆï¼Œ            int main(void){                int arr1[10] = {1,2,3,4,5,6,7,8,9,10};                const int arr2[10] = {11,12,13,14,15,16,17,18,19,20};                const int * pt = arr1;                int * pt2 = arr1;                pt2 = arr2; //éæ³•ï¼Œåªèƒ½å°†éconstçš„æ•°æ®çš„åœ°å€èµ‹å€¼ç»™æ™®é€šæŒ‡é’ˆï¼Œå¦åˆ™é€šè¿‡æŒ‡é’ˆå°±èƒ½æ”¹å˜constæ•°ç»„ä¸­çš„æ•°ç»„ï¼Œæ˜¾ç„¶ä¸åˆç†ã€‚                pt2 = &amp;arr1[3];                return 0;            }        3ã€åˆ›å»ºä¸€ä¸ªä¸èƒ½æ”¹å˜æŒ‡å‘åœ°å€çš„æŒ‡é’ˆï¼Œä½†æ˜¯èƒ½æ”¹å˜æŒ‡é’ˆæŒ‡å‘çš„åœ°å€çš„å€¼                int main(void){                    int arr1[10] = {1,2,3,4,5,6,7,8,9,10};                    const int arr2[10] = {11,12,13,14,15,16,17,18,19,20};                    const int * pt = arr1;                    int * pt2 = arr1;                    pt2 = &amp;arr1[3];                    int * const pt3 = arr1;                    pt3 = &amp;arr1[3]; //éæ³•                    *(pt3+1) = 100;                     printf(&quot;new = %d\n&quot;,arr1[1]);                    return 0;                }    æŒ‡é’ˆå’Œå¤šç»´æ•°ç»„ï¼š        int main(void){            int arr[3][4];            printf(&quot;%d\n&quot;,**arr); // arr = arr[0] = &amp;arr[0][0],**arr ä¸ *&amp;arr[0][0]ç­‰ä»·ï¼Œ**arrdç¬¬ä¸€æ¬¡è§£å¼•ç”¨è¡¨ç¤ºarr[0],æ­¤æ—¶ä»ç„¶æ˜¯ä¸ªåœ°å€æ‰€ä»¥éœ€è¦å†æ¬¡è§£å¼•ç”¨            printf(&quot;arr = %p, arr[0] = %p, arr[0][0] = %p\n&quot;,arr,arr[0],&amp;arr[0][0]); // arr = 0x7ffeeeec7be0, arr[0] = 0x7ffeeeec7be0, arr[0][0] = 0x7ffeeeec7be0            return 0;        }    æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼š        int *p[]; //æŒ‡é’ˆæ•°ç»„        int (*p)[]; // æ•°ç»„æŒ‡é’ˆ                ----ä¾‹é¢˜ï¼š                    int main(void){                        int arr[10] = {100 ,2,3,4,5,6,7,8,9,10};                        int res = max(arr);                        printf(&quot;%d\n&quot;,res);                        return 0;                    }                    int max(int *arr){                        int temp;                        for (int i = 1; i &lt; 10; ++i)                        {                            if (arr[0]&lt;arr[i])                            {                                temp = arr[0];                                arr[0] = arr[i];                                arr[i] = temp;                            }                        }                        return arr[0];                    }åˆ†é…å†…å­˜ malloc å’Œ free    ä¹‹å‰æ‰€ä½¿ç”¨çš„çš„å­˜å‚¨ç±»åˆ«æœ‰ä¸€ä¸ªå…±åŒä¹‹å¤„ï¼šåœ¨ç¡®å®šå­˜å‚¨ç±»åˆ«ä¹‹åï¼Œæ ¹æ®å·²å®šåˆ¶å¥½çš„å†…å­˜ç®¡ç†è§„åˆ™ï¼Œå°†è‡ªåŠ¨é€‰æ‹©å…¶ä½œç”¨åŸŸå’Œå­˜å‚¨æœŸï¼Œç„¶è€Œè¿˜æœ‰æ›´çµæ´»çš„é€‰æ‹©ï¼Œå³ä½¿ç”¨åº“å‡½æ•°åˆ†é…å’Œç®¡ç†å†…å­˜ã€‚    int main(){    double * ptd1;    ptd1 = (double *)malloc(30 * sizeof(double));  //ä¸º30ä¸ªdoubleç±»å‹çš„å€¼ç”³è¯·å†…å­˜ç©ºé—´ï¼Œå¹¶è®©ptdæŒ‡å‘è¯¥ç‰‡å†…å­˜çš„é¦–åœ°å€ã€‚doubleç±»å‹ä¸”é•¿åº¦ä¸º30çš„æ•°ç»„    if (ptd1==NULL){        printf(&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;);        exit(-1);    }    free(ptd1); //é‡Šæ”¾å†…å­˜    long * ptd2;    ptd2 = (long *)calloc(100,sizeof(long));    printf(&quot;ptd2 = %d\n&quot;,ptd2);    free(ptd2);    return 0;}    å¯ä»¥è®¤ä¸ºç¨‹åºæŠŠå®ƒçš„å¯ç”¨å†…å­˜åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†ä¾›å…·æœ‰å¤–éƒ¨é“¾æ¥ã€å†…éƒ¨é“¾æ¥å’Œæ— è¿æ¥çš„é™æ€å˜é‡ä½¿ç”¨ï¼›ä¸€éƒ¨åˆ†ä¾›è‡ªåŠ¨å˜é‡ä½¿ç”¨ï¼›ä¸€éƒ¨åˆ†ä¾›åŠ¨æ€å†…å­˜åˆ†é…ã€‚    int num1 = 100; //æ–‡ä»¶ä½œç”¨åŸŸï¼Œå¤–éƒ¨é“¾æ¥    static int num2 = 100; //æ–‡ä»¶ä½œç”¨åŸŸï¼Œå†…éƒ¨é“¾æ¥ã€‚    //æ— è®ºå¤–éƒ¨è¿˜æ˜¯å†…éƒ¨é“¾æ¥ï¼Œæ–‡ä»¶ä½œç”¨åŸŸå˜é‡éƒ½å…·æœ‰é™æ€å­˜å‚¨æœŸ(éšç¨‹åºæ‰§è¡Œåˆ›å»ºï¼Œç¨‹åºç»“æŸé”€æ¯ï¼Œåœ¨ç¨‹åºæ‰§è¡Œå’Œç»“æŸæœŸé—´ä¸€ç›´å­˜åœ¨)    //å—çº§ä½œç”¨åŸŸå…·æœ‰è‡ªåŠ¨å­˜å‚¨å™¨ã€‚å½“ç¨‹åºè¿›å…¥å®šä¹‰è¿™äº›å˜é‡çš„å—æ—¶ï¼Œä¸ºè¿™äº›å˜é‡åˆ†é…å†…å­˜ï¼Œå½“é€€å‡ºè¿™ä¸ªå—æ—¶ï¼Œé‡Šæ”¾åˆšæ‰ä¸ºå˜é‡åˆ†é…çš„å†…å­˜ã€‚(å˜é•¿æ•°ç»„ç•¥æœ‰ä¸åŒï¼Œå®ƒçš„å­˜å‚¨å™¨ä»ç”Ÿå‘½åˆ°å—ç»“å°¾)    //å—çº§ä½œç”¨åŸŸä¹Ÿèƒ½å…·æœ‰é™æ€å­˜å‚¨æœŸã€‚åœ¨å—ä¸­å£°æ˜å˜é‡æ—¶ï¼ŒåŠ ä¸Šstaticå…³é”®å­—ã€‚ä½†æ˜¯åªæœ‰æ‰§è¡Œå…¶æ‰€åœ¨çš„å‡½æ•°æ—¶æ‰èƒ½è®¿é—®ï¼Œè¯¥å‡½æ•°å¯ä»¥æä¾›æ”¹å˜é‡çš„å­˜å‚¨åœ°å€ä»¥ä¾¿é—´æ¥çš„è®¿é—®å¯¹è±¡ï¼Œä¾‹å¦‚è¿”å›ä¸€ä¸ªæŒ‡é’ˆ    //é™æ€å˜é‡ï¼šè¯¥å˜é‡åœ¨å†…å­˜ä¸­åŸåœ°ä¸åŠ¨ï¼Œå¹¶ä¸æ˜¯å€¼ä¸å¯æ”¹å˜ã€‚    void trystat(void){        int fade = 1; //å‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼Œåˆå§‹åŒ–ä¸€æ¬¡        static int stay = 1; //åªåœ¨ç¼–è¯‘é˜¶æ®µåˆå§‹åŒ–ä¸€æ¬¡        printf(&quot;fade = %d and stay = %d\n&quot;,fade++,stay++);    }    void test(void){        extern int num1; //å¯é€‰é‡å¤å£°æ˜        printf(&quot;%d\n&quot;,num1);    }----------------------------------------------------------------------------------    Cçš„å­˜å‚¨ç±»åˆ«ï¼š(é™æ€å­˜å‚¨æœŸï¼šéšç€ç¨‹åºè¿è¡Œåˆ›å»ºï¼Œç¨‹åºç»“æŸé”€æ¯ï¼Œåœ¨è¿™æœŸé—´ä¸€ç›´å­˜åœ¨ï¼›æ–‡ä»¶ä½œç”¨åŸŸï¼šå¯ä»¥å¤šä¸ªç¨‹åºæ–‡ä»¶ä½¿ç”¨ï¼›è‡ªåŠ¨å­˜å‚¨æœŸï¼šå½“ç¨‹åºè¿›å…¥å®šä¹‰è¿™äº›å˜é‡çš„å—æ—¶ï¼Œä¸ºè¿™äº›å˜é‡åˆ†é…å†…å­˜ï¼Œå½“é€€å‡ºè¿™ä¸ªå—æ—¶ï¼Œé‡Šæ”¾åˆšæ‰ä¸ºå˜é‡åˆ†é…çš„å†…å­˜ï¼›é™æ€å­˜å‚¨æœŸï¼šåœ¨å—ä¸­å£°æ˜å˜é‡æ—¶ï¼ŒåŠ ä¸Šstaticå…³é”®å­—ã€‚ä½†æ˜¯åªæœ‰æ‰§è¡Œå…¶æ‰€åœ¨çš„å‡½æ•°æ—¶æ‰èƒ½è®¿é—®ï¼Œè¯¥å‡½æ•°å¯ä»¥æä¾›æ”¹å˜é‡çš„å­˜å‚¨åœ°å€ä»¥ä¾¿é—´æ¥çš„è®¿é—®å¯¹è±¡)        è‡ªåŠ¨ï¼šåœ¨å—ä¸­ä¸å¸¦å­˜å‚¨ç±»åˆ«è¯´æ˜ç¬¦æˆ–å¸¦auto(é»˜è®¤)å­˜å‚¨ç±»è¯´æ˜ç¬¦å£°æ˜çš„å˜é‡(æˆ–è€…ä½œä¸ºå‡½æ•°å¤´ä¸­çš„å½¢å‚)å±äºè‡ªåŠ¨å­˜å‚¨ç±»åˆ«ã€‚        å¯„å­˜å™¨ï¼šåœ¨å—ä¸­å¸¦registerå­˜å‚¨ç±»åˆ«è¯´æ˜ç¬¦å£°æ˜çš„å˜é‡(æˆ–ä½œä¸ºå‡½æ•°å¤´ä¸­çš„å½¢å‚)å±äºå¯„å­˜å™¨å­˜å‚¨ç±»åˆ«ï¼Œå…·æœ‰è‡ªåŠ¨å­˜å‚¨åŒºã€å—ä½œç”¨åŸŸã€æ— é“¾æ¥ä¸”æ— æ³•è·å–å…¶åœ°å€ã€‚        é™æ€ã€æ— é“¾æ¥ï¼šåœ¨å—ä¸­å¸¦æœ‰staticå­˜å‚¨ç±»åˆ«è¯´æ˜ç¬¦å£°æ˜çš„å˜é‡ï¼Œå…·æœ‰é™æ€å­˜å‚¨æœŸã€å—ä½œç”¨åŸŸã€æ— é“¾æ¥ï¼Œåªåœ¨ç¼–è¯‘æ—¶åˆå§‹åŒ–ä¸€æ¬¡        é™æ€ã€å¤–éƒ¨é“¾æ¥ï¼šåœ¨æ‰€æœ‰å‡½æ•°å¤–éƒ¨ä¸”æ²¡æœ‰ä½¿ç”¨staticå­˜å‚¨ç±»åˆ«è¯´æ˜ç¬¦ï¼Œå…·æœ‰é™æ€å­˜å‚¨æœŸã€æ–‡ä»¶ä½œç”¨åŸŸã€å¤–éƒ¨é“¾æ¥ã€‚åªèƒ½åœ¨ç¼–è¯‘å™¨è¢«åˆå§‹åŒ–ä¸€æ¬¡        é™æ€ã€å†…éƒ¨é“¾æ¥ï¼šåœ¨æ‰€æœ‰å‡½æ•°å¤–ä½¿ç”¨äº†staticå­˜å‚¨ç±»åˆ«è¯´æ˜ç¬¦ï¼Œå…·æœ‰é™æ€å­˜å‚¨æœŸã€æ–‡ä»¶ä½œç”¨åŸŸã€å†…éƒ¨é“¾æ¥ã€‚åªèƒ½åœ¨ç¼–è¯‘å™¨è¢«åˆå§‹åŒ–ä¸€æ¬¡        åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼šç”±malloc()ç›¸å…³å‡½æ•°åˆ†é…ã€‚        ç±»å‹é™å®šç¬¦ï¼šconstã€volatileã€restrictã€_Automicï¼Œconsté™å®šç¬¦é™å®šæ•°æ®åœ¨ç¨‹åºè¿è¡Œæ—¶ä¸èƒ½æ”¹å˜ã€‚å¯¹æŒ‡é’ˆä½¿ç”¨constæ—¶ï¼Œå¯é™å®šæŒ‡é’ˆæœ¬èº«ä¸èƒ½æ”¹å˜æˆ–è€…æŒ‡å‘çš„æ•°æ®ä¸èƒ½æ”¹å˜ã€‚----------------------------------------------------------------------------------æ–‡ä»¶è¾“å…¥ä¸è¾“å‡ºï¼š    r:åªè¯»æ‰“å¼€    w:è¦†ç›–å†™    a:è¿½åŠ å†™    r+:è¯»å†™    w+:è¯»ï¼Œè¦†ç›–å†™    a+:è¯»ï¼Œè¿½åŠ å†™    int main(){        int ch; //è¯»æ–‡ä»¶æ—¶å­˜å‚¨æ¯ä¸ªå­—ç¬¦çš„åœ°æ–¹        FILE *fp; //æ–‡ä»¶æŒ‡é’ˆ        int count = 0;        fp = fopen(&quot;test.txt&quot;,&quot;r&quot;);        if (fp==NULL){            return 0;        }        for (;(ch = getc(fp))!=EOF;){ //getc() putc() è¦ä¼ é€’æ–‡ä»¶çš„æŒ‡é’ˆã€‚            putc(ch,stdout);            count++;         }        fclose(fp);        printf(&quot;\n%d\n&quot;, count);        return 0;    }    ---------------    æ–‡ä»¶è¯»å†™demo:        int main(){            int ch;            FILE *fp,*wfp;            int count = 0;            wfp = fopen(&quot;test.txt&quot;,&quot;a+&quot;);            if ((fp=fopen(&quot;/Users/duwei/ingress-controller-manager.yaml&quot;,&quot;r&quot;))==NULL)            {                printf(&quot;%s\n&quot;,strerror(errno)); //strerror(errno)            }            for (;(ch = getc(fp)) != EOF;)            {                putc(ch,wfp);            }            fclose(fp);            return 0;        }    ---------------    rewindï¼š        int main(){            FILE *fp;            char str1[10],str2[10],str3[10];            int year;            fp = fopen(&quot;test.txt&quot;,&quot;w+&quot;);            fputs(&quot;we are in 2020&quot;,fp);            rewind(fp);//å†™å®Œæ—¶æ–‡ä»¶æè¿°ç¬¦åœ¨æœ«å°¾ï¼Œrewindå°†æ–‡ä»¶æè¿°ç¬¦æ‹‰å›æ–‡ä»¶å¼€å§‹çš„åœ°æ–¹            fscanf(fp,&quot;%s %s %s %de&quot;,&amp;str1,&amp;str2,&amp;str3,&amp;year);            printf(&quot;Read String1 |%s|\n&quot;, str1 );            printf(&quot;Read String2 |%s|\n&quot;, str2 );            printf(&quot;Read String3 |%s|\n&quot;, str3 );            printf(&quot;Read Integer |%d|\n&quot;, year );            fprintf(stderr, &quot;end.\n&quot;);            fclose(fp);            return 0;        }ç»“æ„ä½“ï¼š    ---------------    struct book{        char title[100];        char author[100];        int value;    };    void setV(struct book bk);    int main(){        struct book  library[100];        library[0].value = 99;        printf(&quot;out func,value = %d\n&quot;,library[0].value );        setV(library[0]);        printf(&quot;out func,value = %d\n&quot;,library[0].value );    }    void setV(struct book bk){        bk.value=999;        printf(&quot;in func,value = %d\n&quot;,bk.value);    }    stdout:        out func,value = 99        in func,value = 999        out func,value = 99    ç»“è®ºï¼šç»“æ„ä½“æ˜¯å€¼ä¼ é€’ã€‚    ---------------    å¯¹é½è§„åˆ™ï¼š    1ã€ç¬¬ä¸€ä¸ªæˆå‘˜åœ¨ä¸ç»“æ„ä½“å˜é‡åç§»é‡ä¸º0çš„åœ°å€å¤„ã€‚(c1ä¸ºèµ·å§‹ä½ç½®)    2ã€å…¶å®ƒæˆå‘˜å˜é‡è¦å¯¹é½åˆ°æŸä¸ªæ•°(å¯¹é½æ•°ï¼Œvsé»˜è®¤ä¸º8ï¼Œæˆ‘ç”¨çš„gccï¼Œå¯¹é½æ•°å°±æ˜¯æˆå‘˜è‡ªèº«å¤§å°)çš„æ•´æ•°å€çš„åœ°å€å¤„ã€‚(å¯¹é½æ•°: ç¼–è¯‘å™¨é»˜è®¤çš„å¯¹é½æ•° ä¸ è¯¥æˆå‘˜å¤§å° æ¯”è¾ƒï¼Œå°çš„å°±æ˜¯è¯¥æˆå‘˜çš„å¯¹é½æ•°ã€‚aå¤§å°ä¸º4ï¼Œç¼–è¯‘å™¨é»˜è®¤çš„æ˜¯8ï¼Œé‚£ä¹ˆè¯¥æˆå‘˜çš„å¯¹é½æ•°å°±æ˜¯4ï¼Œ    æ‰€ä»¥açš„ä½ç½®è¦ä¸º4çš„å€æ•°å¤„ï¼Œæ‰€ä»¥açš„ä½ç½®ä¸º4ï¼Œå¦å¤–aå å››ä¸ªå­—èŠ‚ã€‚åŒç†c2çš„å¯¹é½æ•°æ˜¯1(1ä¸8æ¯”è¾ƒ)ï¼Œæ‰€ä»¥c2çš„ä½ç½®ä¸º8ã€‚)    3ã€ç»“æ„ä½“æ€»å¤§å°ä¸ºæœ€å¤§å¯¹é½æ•°(æ¯ä¸ªæˆå‘˜å˜é‡éƒ½æœ‰ä¸€ä¸ªå¯¹é½æ•°)çš„æ•´æ•°å€ã€‚(s1ä¸­çš„æœ€å¤§å¯¹é½æ•°ä¸º4[æ¥è‡ªa]ï¼Œå½“å‰ä¸‰ä¸ªå˜é‡å äº†0-8ä¹Ÿå°±æ˜¯9ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ç»“æ„ä½“s1çš„æ•´ä½“å¤§å°ä¸º3*4=12å­—èŠ‚)    4ã€å¦‚æœåµŒå¥—äº†ç»“æ„çš„æƒ…å†µï¼ŒåµŒå¥—çš„ç»“æ„ä½“å¯¹é½åˆ°è‡ªå·±çš„æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€å¤„ï¼Œç»“æ„ä½“çš„æ•´ä½“å¤§å°å°±æ˜¯æ‰€æœ‰æœ€å¤§å¯¹é½æ•°(å«åµŒå¥—ç»“æ„ä½“çš„å¯¹é½æ•°)çš„æ•´æ•°å€ã€‚     åœ¨è®¾è®¡ç»“æ„ä½“æ—¶å€™ï¼Œå°†å ç”¨ç©ºé—´å°çš„æˆå‘˜å°½é‡é›†ä¸­åœ¨ä¸€èµ·ã€‚     #pragma pack(4) //è®¾ç½®é»˜è®¤å¯¹é½æ•°    struct S1    {    char c1;    int a;    char c2;    };        _________________    ____         __________                                  0 |_________________|    c1              |                                      1 |_________________|    |               |                                        2 |_________________|    |               |                      3 |_________________|   _|__ 4 |_________________|    a          s1: 12ä¸ªå­—èŠ‚,1ã€2ã€3ã€9ã€10ã€11æµªè´¹æ‰ 5 |_________________|                    |    6 |_________________|                    | 7 |_________________|   ____             | 8 |_________________|   _c2_             | 9 |_________________|                    |10 |_________________|                    | 11 |_________________|               _____|____12 |_________________|13 |_________________|14 |_________________|   |_________________|   |_________________|   |_________________|   |_________________|   |_________________|   |_________________|   |_________________|    åŒç†s2å¦‚ä¸‹ï¼š    struct S2    {    char c1;    char c2;    int a;    };    _________________    ____         _________ 0 |_________________|   _c1_            | 1 |_________________|   _c2_            | 2 |_________________|                   | 3 |_________________|   ____ 4 |_________________|    a          s1: 8 ä¸ªå­—èŠ‚,2ã€3æµªè´¹æ‰ 5 |_________________|                   |    6 |_________________|                   | 7 |_________________|   ____        ____|_____ 8 |_________________|                     9 |_________________|                    10 |_________________|                    11 |_________________|           12 |_________________|13 |_________________|14 |_________________|   |_________________|   |_________________|   |_________________|   |_________________|   |_________________|   |_________________|   |_________________|   struct S3    {    double d;    char c;    int i;    };   struct S4    {    char c1;   struct S3 s3;    double d;    };â€”â€”â€”â€”â€”â€”â€”â€”----------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”    struct S{    int a;    char c;    double d;    };void Init(struct S * tmp){    tmp-&gt;a = 100;    tmp-&gt;c = &#39;d&#39;;    tmp-&gt;d = 3.14;}int main(){    struct S s = {0};    Init(&amp;s);    printf(&quot;%d\n&quot;, s.a);}â€”â€”â€”â€”â€”â€”â€”â€”----------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ä½æ®µï¼š(äºŒè¿›åˆ¶ä½)    1ã€ä½æ®µçš„æˆå‘˜å¯ä»¥ä½¿ intã€unsigned intã€signed int æˆ–è€…æ˜¯charï¼ˆå±äºæ•´å‹å®¶æ—ï¼‰ç±»å‹ã€‚    2ã€ä½æ®µçš„ç©ºé—´ä¸Šæ˜¯æŒ‰ç…§éœ€è¦ä»¥4ä¸ªå­—èŠ‚(int)æˆ–è€…ä¸€ä¸ªå­—èŠ‚(char)çš„æ–¹å¼æ¥å¼€è¾Ÿçš„ã€‚    3ã€ä½æ®µæ¶‰åŠå¾ˆå¤šä¸ç¡®å®šå› ç´ ï¼Œä¸è·¨å¹³å°ï¼Œæ³¨é‡å¯ç§»æ¤çš„ç¨‹åºåº”é¿å…ä½¿ç”¨ä½æ®µã€‚    4ã€æ¯ä¸€æ¬¡å¼€è¾Ÿçš„å†…å­˜ï¼Œä»å³å¾€å·¦ä½¿ç”¨ã€‚            struct S             {                int _a:2; //2ä»£è¡¨åªéœ€è¦ä¸¤ä¸ªæ¯”ç‰¹ä½                int _b:5; //5ä»£è¡¨åªéœ€è¦äº”ä¸ªæ¯”ç‰¹ä½                int _c:10;                int _d:30;            };            //47ä¸ªæ¯”ç‰¹ä½ éœ€è¦ 6å­—èŠ‚*8bit = 48æ¯”ç‰¹            int main()            {                struct S s;                printf(&quot;%d\n&quot;, sizeof(s)); //ç»“æœä¸º8ï¼Œintç±»å‹æ‰€ä»¥ä¸€æ¬¡å¼€è¾Ÿå››ä¸ªå­—èŠ‚ï¼Œå¼€è¾Ÿä¸¤æ¬¡ã€‚                return 0;            }            â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”                    struct S                     {                        char a:3;                        char b:4;                        char c:5;                        char d:4;                    };                    int main()                    {                                                   |               |               |               |                        struct S s = {0};                                | | | | | | | | | | | | | | | | | | | | | | | | |                        s.a = 10; //äºŒè¿›åˆ¶ï¼š1010ï¼Œä½†æ˜¯é•¿åº¦åªç»™äº†3            |  b    |  a  |     |    b    |       |   d   |                        s.b = 20;                        s.c = 3;                        s.d = 4;                        printf(&quot;%d\n&quot;, sizeof(s)); // ç±»å‹æ˜¯charï¼šå¼€è¾Ÿä¸€ä¸ªå­—èŠ‚æ”¾å…¥aï¼Œå†æ”¾å…¥bï¼Œæ­¤æ—¶ä¸€ä¸ªå­—èŠ‚è¢«å ç”¨äº†7ä¸ªæ¯”ç‰¹ï¼Œå‰©ä¸‹çš„1ä¸ªæ¯”ç‰¹ä¸è¶³ä»¥å­˜æ”¾cï¼Œæ‰€ä»¥å†å¼€è¾Ÿä¸€ä¸ªå­—èŠ‚æ”¾å…¥5ï¼Œå‰©ä¸‹çš„3ä¸ªå­—èŠ‚ä¸è¶³ä»¥å­˜æ”¾dï¼Œsoå†æ¬¡å¼€è¾Ÿä¸€ä¸ªå­—èŠ‚ã€‚æµªè´¹äº†8æ¯”ç‰¹ã€‚                        printf(&quot;%d\n&quot;, s.a);                        return 0;                    }â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æšä¸¾ï¼š    enum Sex    {        MALE,        FAMALE,        SECRET    };    enum Color    {        RED, //0        GREEN, //1        BLUE //2    };    int main(){        enum Sex s = MALE;        enum Color c = BLUE;        printf(&quot;%d,%d,%d\n&quot;, RED,GREEN,BLUE);    }â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”union:    union Un    {        char c;         int i; //å¯¹é½æ•°ä¸º4        char arr[5]; //å¯¹é½æ•°æ˜¯1è€Œä¸æ˜¯5ï¼Œæœ€å°å ç”¨å†…å­˜ä¸º æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€    };    int main()    {        union Un u;        printf(&quot;%lu\n&quot;, sizeof(u));        printf(&quot;%p\n&quot;, &amp;u);        printf(&quot;%p\n&quot;, &amp;u.c);    }â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åŠ¨æ€å†…å­˜åˆ†é…ï¼š    _____________________________________    |          å±€éƒ¨å˜é‡                  |    |          å‡½æ•°å½¢å‚                  |    |                                   |    |                                   |    |                                   |  æ ˆåŒº    |                                   |    |                                   |    |                                   |    |                                   |    |â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|    |      åŠ¨æ€å†…å­˜åˆ†é…                   |    |                                   |    |                                   |    |                                   |    |                                   |    |                                   |    |                                   |  å †åŒº    |                                   |    |                                   |    |                                   |    |                                   |    |                                   |    |                                   |    |â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|    |                                   |    |        å…¨å±€å˜é‡                    |    |        é™æ€å˜é‡                    |    |                                   |    |                                   |    |                                   |  é™æ€åŒº    |                                   |    |                                   |    |                                   |    |                                   |    |                                   |    |                                   |    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”            int main()            {            int * p1 = (int *)malloc(10*sizeof(int)); //åˆå§‹åŒ–ä¹‹åé»˜è®¤å€¼æ˜¯éšæœºçš„ï¼Œint * p = realloc(NULL,40)            if (p1 == NULL)            {                printf(&quot;%s\n&quot;, strerror(errno));            }            else            {                for (int i = 0; i &lt; 10; ++i)                {                    printf(&quot;p1 = %d\n&quot;, p1[i]);                }            }            free(p1);            p1 = NULL;            printf(&quot;\n&quot;);            int * p2 = (int *)calloc(10,sizeof(int));  //åˆå§‹åŒ–ä¹‹åé»˜è®¤å€¼æ˜¯0            if (p2 == NULL)            {                printf(&quot;%s\n&quot;, strerror(errno));            }            else            {                for (int i = 0; i &lt; 10; ++i)                {                printf(&quot;p2 = %d\n&quot;, *(p2+i));                }            }            free(p2);            p2 = NULL;            printf(&quot;\n&quot;);            int * p3 = (int *)malloc(20);            if (p3 == NULL)            {                printf(&quot;%s\n&quot;, strerror(errno));            }            else            {                for (int i = 0; i &lt; 5; ++i)                {                    *(p3+i) = i;                }            }            int * p4 = realloc(p3,40); //è°ƒæ•´å·²å¼€è¾Ÿå†…å­˜çš„å¤§å°ã€‚            // 1ã€å¦‚æœp3æŒ‡å‘çš„å†…å­˜ç©ºé—´åæœ‰è¶³å¤Ÿçš„ç©ºé—´å¯ä»¥è¿½åŠ ï¼Œåˆ™ç›´æ¥è¿½åŠ åè¿”å›p3ã€‚            // 2ã€å¦‚æœp3æŒ‡å‘çš„å†…å­˜ç©ºé—´åæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å¯ä»¥è¿½åŠ ï¼Œåˆ™å¼€è¾Ÿä¸€å—å…¨æ–°çš„å†…å­˜åŒºåŸŸï¼Œå°†åŸæ¥å†…å­˜ä¸­çš„æ•°æ®æ‹·è´è‡³æ–°å†…å­˜ï¼Œé‡Šæ”¾æ—§å†…å­˜ç©ºé—´ï¼Œè¿”å›æ–°å¼€è¾Ÿçš„å†…å­˜ç©ºé—´åœ°å€            if (p4!=NULL)            {                p3 = p4;            }            for (int i = 0; i &lt; 40; ++i)            {                printf(&quot;p3 = %d\n&quot;, *(p4+i));            }            free(p3);            p3 = NULL;            return 0;        }*/// #pragma pack(4) //è®¾ç½®é»˜è®¤å¯¹é½æ•°// void GetMemory(char **p)// {//     p = (char *)malloc(100);// }// void Test(void)// {//     char * str = NULL;//     GetMemory(&amp;str);//     strcpy(str,&quot;hello world&quot;);//     printf(str);// }// int main()// {//     //strä¼ ç»™GetMemory()å‡½æ•°ï¼Œä¼ çš„æ˜¯strè€Œä¸æ˜¯strçš„åœ°å€ï¼Œæ‰€ä»¥pæ˜¯strçš„å€¼æ‹·è´ï¼Œpçš„å€¼ä¸ºNULLï¼Œå‡½æ•°é‡Œå°†ç”³è¯·çš„å†…å­˜çš„åœ°å€èµ‹ç»™pï¼ŒGetMemoryæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œ//     //pæ˜¯ä¸´æ—¶å˜é‡è¢«é”€æ¯ï¼Œæ‰€ä»¥strçš„å€¼è¿˜æ˜¯NULL//     Test();//     return 0;// }// char *GetMemory(void)// {//      char p[] = &quot;hello world&quot;;//     return p;// }// void Test(void)// {//     char * str = NULL;//     str = GetMemory();//     printf(str);// }// int main()// {//     Test();//     return 0;// }int main(){    int a = 10000;    FILE* pf = fopen(&quot;test.txt&quot;,&quot;wb&quot;);    fwrite(&amp;a,4,1,pf);    fclose(pf);    pf = NULL;    return 0;}</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;#include &amp;lt;stdio.h&amp;gt; 
#include &amp;lt;stdlib.h&amp;gt; 
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;errno.h&amp;gt;
#include &amp;lt;st</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://blog.3amupupup.online/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="c primer plus" scheme="http://blog.3amupupup.online/tags/c-primer-plus/"/>
    
  </entry>
  
</feed>
